.. index:: pair: class; cv::BackgroundSubtractorKNN
.. _doxid-da/d35/classcv_1_1_background_subtractor_k_n_n:

class cv::BackgroundSubtractorKNN
=================================

.. toctree::
	:hidden:

Overview
~~~~~~~~

K-nearest neigbours - based Background/Foreground Segmentation :ref:`Algorithm <doxid-d1/d41/classcv_1_1_algorithm>`. :ref:`More...<details-da/d35/classcv_1_1_background_subtractor_k_n_n>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <background_segm.hpp>
	
	class BackgroundSubtractorKNN: public :ref:`cv::BackgroundSubtractor<doxid-d5/d6d/classcv_1_1_background_subtractor>`
	{
	public:
		// methods
	
		virtual
		bool
		:ref:`getDetectShadows<doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1ae1efd8a9c7287f0b01ff024d3eaeff0a>`() const = 0;
	
		virtual
		double
		:ref:`getDist2Threshold<doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1acb609e83ae670195a9d4b7985d319def>`() const = 0;
	
		virtual
		int
		:ref:`getHistory<doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1adca11897141bae5e5959ace3e6dd3896>`() const = 0;
	
		virtual
		int
		:ref:`getkNNSamples<doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1a90323a86c7d9a54f35ff37053d830107>`() const = 0;
	
		virtual
		int
		:ref:`getNSamples<doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1a26f9cb9cd9b8b6a7966b453bd69d3caf>`() const = 0;
	
		virtual
		double
		:ref:`getShadowThreshold<doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1a9c72132fe895b12f71719f4edd3e02fa>`() const = 0;
	
		virtual
		int
		:ref:`getShadowValue<doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1a5a7271ec772d5eea1ebb97b1963cc7d1>`() const = 0;
	
		virtual
		void
		:ref:`setDetectShadows<doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1a7bc545ab1db20d1522b429cacbf4917d>`(bool detectShadows) = 0;
	
		virtual
		void
		:ref:`setDist2Threshold<doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1aae40ce724aa313259609606853b6956f>`(double _dist2Threshold) = 0;
	
		virtual
		void
		:ref:`setHistory<doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1adc3ce00b7ff6061ec0d255405aa1625f>`(int history) = 0;
	
		virtual
		void
		:ref:`setkNNSamples<doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1acac38a02b7b32add859fbe78ef01b4ec>`(int _nkNN) = 0;
	
		virtual
		void
		:ref:`setNSamples<doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1aff347ac596a90bb3db2ceb91f19b5d87>`(int _nN) = 0;
	
		virtual
		void
		:ref:`setShadowThreshold<doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1a85efc41f5e3e7f7ca2c92245829043c0>`(double threshold) = 0;
	
		virtual
		void
		:ref:`setShadowValue<doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1a5a4d993edba38be565198098bcc40004>`(int value) = 0;
	};

Inherited Members
-----------------

.. ref-code-block:: cpp
	:class: doxyrest-overview-inherited-code-block

	public:
		// methods
	
		virtual
		void
		:ref:`clear<doxid-d1/d41/classcv_1_1_algorithm_1aec9c965448e4dc851d7cacd3abd84cd1>`();
	
		virtual
		bool
		:ref:`empty<doxid-d1/d41/classcv_1_1_algorithm_1ab6a18f1825475643e94381697d413972>`() const;
	
		virtual
		:ref:`String<doxid-dc/d0e/classcv_1_1_string>`
		:ref:`getDefaultName<doxid-d1/d41/classcv_1_1_algorithm_1a286fc82744ccab3d248aca44524266a9>`() const;
	
		virtual
		void
		:ref:`read<doxid-d1/d41/classcv_1_1_algorithm_1aef2ad3f4145bd6e8c3664eb1c4b5e1e6>`(const :ref:`FileNode<doxid-dc/d21/classcv_1_1_file_node>`& fn);
	
		virtual
		void
		:ref:`save<doxid-d1/d41/classcv_1_1_algorithm_1a0a880744bc4e3f45711444571df47d67>`(const :ref:`String<doxid-dc/d0e/classcv_1_1_string>`& filename) const;
	
		virtual
		void
		:ref:`write<doxid-d1/d41/classcv_1_1_algorithm_1a1f8ad7b8add515077367fb9949a174d2>`(:ref:`FileStorage<doxid-d9/df9/classcv_1_1_file_storage>`& fs) const;
	
		template <typename _Tp>
		static
		:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<_Tp>
		:ref:`load<doxid-d1/d41/classcv_1_1_algorithm_1a623841c33b58ea9c4847da04607e067b>`(
			const :ref:`String<doxid-dc/d0e/classcv_1_1_string>`& filename,
			const :ref:`String<doxid-dc/d0e/classcv_1_1_string>`& objname = :ref:`String<doxid-dc/d0e/classcv_1_1_string>`()
			);
	
		template <typename _Tp>
		static
		:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<_Tp>
		:ref:`loadFromString<doxid-d1/d41/classcv_1_1_algorithm_1a3ba305a10d02479c13cf7d169c321547>`(
			const :ref:`String<doxid-dc/d0e/classcv_1_1_string>`& strModel,
			const :ref:`String<doxid-dc/d0e/classcv_1_1_string>`& objname = :ref:`String<doxid-dc/d0e/classcv_1_1_string>`()
			);
	
		template <typename _Tp>
		static
		:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<_Tp>
		:ref:`read<doxid-d1/d41/classcv_1_1_algorithm_1ad8c591bacb34c485f5b7a250c314fc53>`(const :ref:`FileNode<doxid-dc/d21/classcv_1_1_file_node>`& fn);
	
		virtual
		void
		:ref:`apply<doxid-d5/d6d/classcv_1_1_background_subtractor_1aa735e76f7069b3fa9c3f32395f9ccd21>`(
			:ref:`InputArray<doxid-dc/d84/group__core__basic_1ga353a9de602fe76c709e12074a6f362ba>` image,
			:ref:`OutputArray<doxid-dc/d84/group__core__basic_1gaad17fda1d0f0d1ee069aebb1df2913c0>` fgmask,
			double learningRate = -1
			) = 0;
	
		virtual
		void
		:ref:`getBackgroundImage<doxid-d5/d6d/classcv_1_1_background_subtractor_1a98cb8e292a6cbcb32436dad62a82f974>`(:ref:`OutputArray<doxid-dc/d84/group__core__basic_1gaad17fda1d0f0d1ee069aebb1df2913c0>` backgroundImage) const = 0;

	protected:
		// methods
	
		void
		:ref:`writeFormat<doxid-d1/d41/classcv_1_1_algorithm_1a68eeca71617474ad3d4561786f0289d2>`(:ref:`FileStorage<doxid-d9/df9/classcv_1_1_file_storage>`& fs) const;

.. _details-da/d35/classcv_1_1_background_subtractor_k_n_n:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

K-nearest neigbours - based Background/Foreground Segmentation :ref:`Algorithm <doxid-d1/d41/classcv_1_1_algorithm>`.

The class implements the K-nearest neigbours background subtraction described in :ref:`[97] <doxid-d0/de3/citelist_1CITEREF_Zivkovic2006>`. Very efficient if number of foreground pixels is low.

Methods
-------

.. index:: pair: function; getDetectShadows
.. _doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1ae1efd8a9c7287f0b01ff024d3eaeff0a:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	bool
	getDetectShadows() const = 0

Returns the shadow detection flag.

If true, the algorithm detects shadows and marks them. See createBackgroundSubtractorKNN for details.

.. index:: pair: function; getDist2Threshold
.. _doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1acb609e83ae670195a9d4b7985d319def:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	double
	getDist2Threshold() const = 0

Returns the threshold on the squared distance between the pixel and the sample.

The threshold on the squared distance between the pixel and the sample to decide whether a pixel is close to a data sample.

.. index:: pair: function; getHistory
.. _doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1adca11897141bae5e5959ace3e6dd3896:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	int
	getHistory() const = 0

Returns the number of last frames that affect the background model.

.. index:: pair: function; getkNNSamples
.. _doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1a90323a86c7d9a54f35ff37053d830107:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	int
	getkNNSamples() const = 0

Returns the number of neighbours, the k in the kNN.

K is the number of samples that need to be within dist2Threshold in order to decide that that pixel is matching the kNN background model.

.. index:: pair: function; getNSamples
.. _doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1a26f9cb9cd9b8b6a7966b453bd69d3caf:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	int
	getNSamples() const = 0

Returns the number of data samples in the background model.

.. index:: pair: function; getShadowThreshold
.. _doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1a9c72132fe895b12f71719f4edd3e02fa:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	double
	getShadowThreshold() const = 0

Returns the shadow threshold.

A shadow is detected if pixel is a darker version of the background. The shadow threshold (Tau in the paper) is a threshold defining how much darker the shadow can be. Tau= 0.5 means that if a pixel is more than twice darker then it is not shadow. See Prati, Mikic, Trivedi and Cucchiara, Detecting Moving Shadows...\*, IEEE PAMI,2003.

.. index:: pair: function; getShadowValue
.. _doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1a5a7271ec772d5eea1ebb97b1963cc7d1:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	int
	getShadowValue() const = 0

Returns the shadow value.

Shadow value is the value used to mark shadows in the foreground mask. Default value is 127. Value 0 in the mask always means background, 255 means foreground.

.. index:: pair: function; setDetectShadows
.. _doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1a7bc545ab1db20d1522b429cacbf4917d:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	setDetectShadows(bool detectShadows) = 0

Enables or disables shadow detection.

.. index:: pair: function; setDist2Threshold
.. _doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1aae40ce724aa313259609606853b6956f:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	setDist2Threshold(double _dist2Threshold) = 0

Sets the threshold on the squared distance.

.. index:: pair: function; setHistory
.. _doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1adc3ce00b7ff6061ec0d255405aa1625f:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	setHistory(int history) = 0

Sets the number of last frames that affect the background model.

.. index:: pair: function; setkNNSamples
.. _doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1acac38a02b7b32add859fbe78ef01b4ec:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	setkNNSamples(int _nkNN) = 0

Sets the k in the kNN. How many nearest neigbours need to match.

.. index:: pair: function; setNSamples
.. _doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1aff347ac596a90bb3db2ceb91f19b5d87:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	setNSamples(int _nN) = 0

Sets the number of data samples in the background model.

The model needs to be reinitalized to reserve memory.

.. index:: pair: function; setShadowThreshold
.. _doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1a85efc41f5e3e7f7ca2c92245829043c0:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	setShadowThreshold(double threshold) = 0

Sets the shadow threshold.

.. index:: pair: function; setShadowValue
.. _doxid-da/d35/classcv_1_1_background_subtractor_k_n_n_1a5a4d993edba38be565198098bcc40004:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	setShadowValue(int value) = 0

Sets the shadow value.

