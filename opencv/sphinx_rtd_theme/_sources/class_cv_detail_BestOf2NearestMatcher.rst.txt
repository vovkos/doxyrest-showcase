.. index:: pair: class; cv::detail::BestOf2NearestMatcher
.. _doxid-d1/d16/classcv_1_1detail_1_1_best_of2_nearest_matcher:

class cv::detail::BestOf2NearestMatcher
=======================================

.. toctree::
	:hidden:

Overview
~~~~~~~~

Features matcher which finds two best matches for each feature and leaves the best one only if the ratio between descriptor distances is greater than the threshold match_conf. :ref:`More...<details-d1/d16/classcv_1_1detail_1_1_best_of2_nearest_matcher>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <matchers.hpp>
	
	class BestOf2NearestMatcher: public :ref:`cv::detail::FeaturesMatcher<doxid-d2/da0/classcv_1_1detail_1_1_features_matcher>`
	{
	public:
		// construction
	
		:ref:`BestOf2NearestMatcher<doxid-d1/d16/classcv_1_1detail_1_1_best_of2_nearest_matcher_1a442057203008c200e381b7baf2697c80>`(
			bool try_use_gpu = false,
			float match_conf = 0.3f,
			int num_matches_thresh1 = 6,
			int num_matches_thresh2 = 6
			);

		// methods
	
		virtual
		void
		:ref:`collectGarbage<doxid-d1/d16/classcv_1_1detail_1_1_best_of2_nearest_matcher_1a333bdd073ad0ea67b67230408813f365>`();

	protected:
		// fields
	
		:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<:ref:`FeaturesMatcher<doxid-d2/da0/classcv_1_1detail_1_1_features_matcher>`> :target:`impl_<doxid-d1/d16/classcv_1_1detail_1_1_best_of2_nearest_matcher_1a9e6b74e94d69e18705e961fe753c45c4>`;
		int :target:`num_matches_thresh1_<doxid-d1/d16/classcv_1_1detail_1_1_best_of2_nearest_matcher_1a9feea2b5ac622dcacf9eba2f5a27dafd>`;
		int :target:`num_matches_thresh2_<doxid-d1/d16/classcv_1_1detail_1_1_best_of2_nearest_matcher_1ad1395b7d534b402b215519b6e9ac8bd9>`;

		// methods
	
		virtual
		void
		:ref:`match<doxid-d1/d16/classcv_1_1detail_1_1_best_of2_nearest_matcher_1a427ee6f0c9a75766b535e721d3e395df>`(
			const :ref:`ImageFeatures<doxid-d4/dbe/structcv_1_1detail_1_1_image_features>`& features1,
			const :ref:`ImageFeatures<doxid-d4/dbe/structcv_1_1detail_1_1_image_features>`& features2,
			:ref:`MatchesInfo<doxid-d2/d99/structcv_1_1detail_1_1_matches_info>`& matches_info
			);
	};

	// direct descendants

	class :ref:`AffineBestOf2NearestMatcher<doxid-d3/dc2/classcv_1_1detail_1_1_affine_best_of2_nearest_matcher>`;
	class :ref:`BestOf2NearestRangeMatcher<doxid-d8/dde/classcv_1_1detail_1_1_best_of2_nearest_range_matcher>`;

Inherited Members
-----------------

.. ref-code-block:: cpp
	:class: doxyrest-overview-inherited-code-block

	public:
		// methods
	
		virtual
		void
		:ref:`collectGarbage<doxid-d2/da0/classcv_1_1detail_1_1_features_matcher_1a8520ff70e51e0bb138891ce410abf6e4>`();
	
		bool
		:ref:`isThreadSafe<doxid-d2/da0/classcv_1_1detail_1_1_features_matcher_1a0bcd4038054223f4cda9f6c3eb7e7c11>`() const;
	
		void
		:ref:`operator()<doxid-d2/da0/classcv_1_1detail_1_1_features_matcher_1a5d5793f2f71bae1cb72acc3e95d069df>`(
			const :ref:`ImageFeatures<doxid-d4/dbe/structcv_1_1detail_1_1_image_features>`& features1,
			const :ref:`ImageFeatures<doxid-d4/dbe/structcv_1_1detail_1_1_image_features>`& features2,
			:ref:`MatchesInfo<doxid-d2/d99/structcv_1_1detail_1_1_matches_info>`& matches_info
			);
	
		void
		:ref:`operator()<doxid-d2/da0/classcv_1_1detail_1_1_features_matcher_1a2df19558a646700d9543841cafae4bc2>`(
			const std::vector<:ref:`ImageFeatures<doxid-d4/dbe/structcv_1_1detail_1_1_image_features>`>& features,
			std::vector<:ref:`MatchesInfo<doxid-d2/d99/structcv_1_1detail_1_1_matches_info>`>& pairwise_matches,
			const :ref:`cv::UMat<doxid-d8/d82/classcv_1_1_u_mat>`& mask = :ref:`cv::UMat<doxid-d8/d82/classcv_1_1_u_mat>`()
			);

	protected:
		// fields
	
		bool :ref:`is_thread_safe_<doxid-d2/da0/classcv_1_1detail_1_1_features_matcher_1ae3b24af101c26164a5a253b7d1c37dda>`;

		// methods
	
		virtual
		void
		:ref:`match<doxid-d2/da0/classcv_1_1detail_1_1_features_matcher_1a22005bcc8bf637398b2a325121b44bb1>`(
			const :ref:`ImageFeatures<doxid-d4/dbe/structcv_1_1detail_1_1_image_features>`& features1,
			const :ref:`ImageFeatures<doxid-d4/dbe/structcv_1_1detail_1_1_image_features>`& features2,
			:ref:`MatchesInfo<doxid-d2/d99/structcv_1_1detail_1_1_matches_info>`& matches_info
			) = 0;

.. _details-d1/d16/classcv_1_1detail_1_1_best_of2_nearest_matcher:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

Features matcher which finds two best matches for each feature and leaves the best one only if the ratio between descriptor distances is greater than the threshold match_conf.



.. rubric:: See also:

:ref:`detail::FeaturesMatcher <doxid-d2/da0/classcv_1_1detail_1_1_features_matcher>`

Construction
------------

.. index:: pair: function; BestOf2NearestMatcher
.. _doxid-d1/d16/classcv_1_1detail_1_1_best_of2_nearest_matcher_1a442057203008c200e381b7baf2697c80:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	BestOf2NearestMatcher(
		bool try_use_gpu = false,
		float match_conf = 0.3f,
		int num_matches_thresh1 = 6,
		int num_matches_thresh2 = 6
		)

Constructs a "best of 2 nearest" matcher.



.. rubric:: Parameters:

.. list-table::
	:widths: 20 80

	*
		- try_use_gpu

		- Should try to use GPU or not

	*
		- match_conf

		- Match distances ration threshold

	*
		- num_matches_thresh1

		- Minimum number of matches required for the 2D projective transform estimation used in the inliers classification step

	*
		- num_matches_thresh2

		- Minimum number of matches required for the 2D projective transform re-estimation on inliers

Methods
-------

.. index:: pair: function; collectGarbage
.. _doxid-d1/d16/classcv_1_1detail_1_1_best_of2_nearest_matcher_1a333bdd073ad0ea67b67230408813f365:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	collectGarbage()

Frees unused memory allocated before if there is any.

.. index:: pair: function; match
.. _doxid-d1/d16/classcv_1_1detail_1_1_best_of2_nearest_matcher_1a427ee6f0c9a75766b535e721d3e395df:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	match(
		const :ref:`ImageFeatures<doxid-d4/dbe/structcv_1_1detail_1_1_image_features>`& features1,
		const :ref:`ImageFeatures<doxid-d4/dbe/structcv_1_1detail_1_1_image_features>`& features2,
		:ref:`MatchesInfo<doxid-d2/d99/structcv_1_1detail_1_1_matches_info>`& matches_info
		)

This method must implement matching logic in order to make the wrappers detail::FeaturesMatcher::operator()\_ work.



.. rubric:: Parameters:

.. list-table::
	:widths: 20 80

	*
		- features1

		- first image features

	*
		- features2

		- second image features

	*
		- matches_info

		- found matches

