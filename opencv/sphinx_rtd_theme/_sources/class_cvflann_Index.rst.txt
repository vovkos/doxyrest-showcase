.. index:: pair: class; cvflann::Index
.. _doxid-d2/df9/classcvflann_1_1_index:

template class cvflann::Index
=============================

.. toctree::
	:hidden:

Overview
~~~~~~~~




.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <flann_base.hpp>
	
	template <typename Distance>
	class Index: public :ref:`cvflann::NNIndex<doxid-df/d08/classcvflann_1_1_n_n_index>`
	{
	public:
		// typedefs
	
		typedef Distance::ResultType :target:`DistanceType<doxid-d2/df9/classcvflann_1_1_index_1adce66132d9ad41de0181fddd214b5e51>`;
		typedef Distance::ElementType :target:`ElementType<doxid-d2/df9/classcvflann_1_1_index_1a9fbfc2c13b3226997cfc15fc3a55b7c5>`;

		// construction
	
		:target:`Index<doxid-d2/df9/classcvflann_1_1_index_1a11d668c0e1640b5093f73c9f7d6a1e4e>`(
			const :ref:`Matrix<doxid-d7/d79/classcvflann_1_1_matrix>`<:ref:`ElementType<doxid-d2/df9/classcvflann_1_1_index_1a9fbfc2c13b3226997cfc15fc3a55b7c5>`>& features,
			const :ref:`IndexParams<doxid-dc/d8c/namespacecvflann_1ad55c74ae3144004b728d68382edbca45>`& params,
			Distance distance = Distance()
			);

		// methods
	
		virtual
		void
		:ref:`buildIndex<doxid-d2/df9/classcvflann_1_1_index_1ad9492a05669ee5bc1b07a4e2d0ac13c6>`();
	
		virtual
		void
		:ref:`findNeighbors<doxid-d2/df9/classcvflann_1_1_index_1a65866d94e0d29a5b9ffca22aba51e6b2>`(
			:ref:`ResultSet<doxid-d2/d1c/classcvflann_1_1_result_set>`<:ref:`DistanceType<doxid-d2/df9/classcvflann_1_1_index_1adce66132d9ad41de0181fddd214b5e51>`>& result,
			const :ref:`ElementType<doxid-d2/df9/classcvflann_1_1_index_1a9fbfc2c13b3226997cfc15fc3a55b7c5>`* vec,
			const :ref:`SearchParams<doxid-d1/d18/structcvflann_1_1_search_params>`& searchParams
			);
	
		:ref:`NNIndex<doxid-df/d08/classcvflann_1_1_n_n_index>`<Distance>*
		:ref:`getIndex<doxid-d2/df9/classcvflann_1_1_index_1a8544609d6f21395a04ea6d7a1b409806>`();
	
		const :ref:`IndexParams<doxid-dc/d8c/namespacecvflann_1ad55c74ae3144004b728d68382edbca45>`*
		:ref:`getIndexParameters<doxid-d2/df9/classcvflann_1_1_index_1a62aed0e26a38321dad1539433b2616b7>`();
	
		virtual
		:ref:`IndexParams<doxid-dc/d8c/namespacecvflann_1ad55c74ae3144004b728d68382edbca45>`
		:ref:`getParameters<doxid-d2/df9/classcvflann_1_1_index_1a9985afa622417a47de1727e510bc1bc0>`() const;
	
		virtual
		:ref:`flann_algorithm_t<doxid-dc/d8c/namespacecvflann_1a4e3e6c98d774ea77fd7f0045c9bc7817>`
		:ref:`getType<doxid-d2/df9/classcvflann_1_1_index_1a44a3da8d342b170cf5ab2216a18f73a3>`() const;
	
		virtual
		void
		:ref:`knnSearch<doxid-d2/df9/classcvflann_1_1_index_1ad27d21204e383916770e67bf5c28f4cf>`(
			const :ref:`Matrix<doxid-d7/d79/classcvflann_1_1_matrix>`<:ref:`ElementType<doxid-d2/df9/classcvflann_1_1_index_1a9fbfc2c13b3226997cfc15fc3a55b7c5>`>& queries,
			:ref:`Matrix<doxid-d7/d79/classcvflann_1_1_matrix>`<int>& indices,
			:ref:`Matrix<doxid-d7/d79/classcvflann_1_1_matrix>`<:ref:`DistanceType<doxid-d2/df9/classcvflann_1_1_index_1adce66132d9ad41de0181fddd214b5e51>`>& dists,
			int knn,
			const :ref:`SearchParams<doxid-d1/d18/structcvflann_1_1_search_params>`& params
			);
	
		virtual
		void
		:ref:`loadIndex<doxid-d2/df9/classcvflann_1_1_index_1ae0c80ab480e30654dbded8eebc25952e>`(FILE* stream);
	
		virtual
		int
		:ref:`radiusSearch<doxid-d2/df9/classcvflann_1_1_index_1a79685d67c8576e5648fde484bb9fceb0>`(
			const :ref:`Matrix<doxid-d7/d79/classcvflann_1_1_matrix>`<:ref:`ElementType<doxid-d2/df9/classcvflann_1_1_index_1a9fbfc2c13b3226997cfc15fc3a55b7c5>`>& query,
			:ref:`Matrix<doxid-d7/d79/classcvflann_1_1_matrix>`<int>& indices,
			:ref:`Matrix<doxid-d7/d79/classcvflann_1_1_matrix>`<:ref:`DistanceType<doxid-d2/df9/classcvflann_1_1_index_1adce66132d9ad41de0181fddd214b5e51>`>& dists,
			float radius,
			const :ref:`SearchParams<doxid-d1/d18/structcvflann_1_1_search_params>`& params
			);
	
		void
		:target:`save<doxid-d2/df9/classcvflann_1_1_index_1a6c680b8cba8f21e0909bd69392df8dad>`(:ref:`cv::String<doxid-dc/d0e/classcv_1_1_string>` filename);
	
		virtual
		void
		:ref:`saveIndex<doxid-d2/df9/classcvflann_1_1_index_1a7cad2783e47031b8e1ea0c1a56eb72cc>`(FILE* stream);
	
		virtual
		:ref:`size_t<doxid-da/d06/autogenerated_2opencl__core_8hpp_1a6ff403ead16f7faa1f7228274eb6b01d>`
		:ref:`size<doxid-d2/df9/classcvflann_1_1_index_1ae6cd9bd7498ea6158bb96a6411dda197>`() const;
	
		virtual
		int
		:ref:`usedMemory<doxid-d2/df9/classcvflann_1_1_index_1aa982eea27f03c66f8a1e2f8647b94709>`() const;
	
		virtual
		:ref:`size_t<doxid-da/d06/autogenerated_2opencl__core_8hpp_1a6ff403ead16f7faa1f7228274eb6b01d>`
		:ref:`veclen<doxid-d2/df9/classcvflann_1_1_index_1ad99df11ae3fe8a1655a9b01da1d9a314>`() const;
	};

Inherited Members
-----------------

.. ref-code-block:: cpp
	:class: doxyrest-overview-inherited-code-block

	public:
		// methods
	
		virtual
		void
		:ref:`buildIndex<doxid-df/d08/classcvflann_1_1_n_n_index_1aaa8811509bb2f30e91570cefe4dc71e2>`() = 0;
	
		virtual
		void
		:ref:`findNeighbors<doxid-df/d08/classcvflann_1_1_n_n_index_1ac038c51dc941c7c1a55b08c17e213e41>`(
			:ref:`ResultSet<doxid-d2/d1c/classcvflann_1_1_result_set>`<DistanceType>& result,
			const ElementType* vec,
			const :ref:`SearchParams<doxid-d1/d18/structcvflann_1_1_search_params>`& searchParams
			) = 0;
	
		virtual
		:ref:`IndexParams<doxid-dc/d8c/namespacecvflann_1ad55c74ae3144004b728d68382edbca45>`
		:ref:`getParameters<doxid-df/d08/classcvflann_1_1_n_n_index_1afbc22ebf77f4f376d9e7922727d0abfe>`() const = 0;
	
		virtual
		:ref:`flann_algorithm_t<doxid-dc/d8c/namespacecvflann_1a4e3e6c98d774ea77fd7f0045c9bc7817>`
		:ref:`getType<doxid-df/d08/classcvflann_1_1_n_n_index_1ac40469dbc16bcb0fb4b0c9912c5f8acb>`() const = 0;
	
		virtual
		void
		:ref:`knnSearch<doxid-df/d08/classcvflann_1_1_n_n_index_1a8cf5c942430421358bf67d93565942db>`(
			const :ref:`Matrix<doxid-d7/d79/classcvflann_1_1_matrix>`<ElementType>& queries,
			:ref:`Matrix<doxid-d7/d79/classcvflann_1_1_matrix>`<int>& indices,
			:ref:`Matrix<doxid-d7/d79/classcvflann_1_1_matrix>`<DistanceType>& dists,
			int knn,
			const :ref:`SearchParams<doxid-d1/d18/structcvflann_1_1_search_params>`& params
			);
	
		virtual
		void
		:ref:`loadIndex<doxid-df/d08/classcvflann_1_1_n_n_index_1a4bcaf48ee2ac65a1b3cebea99d021611>`(FILE* stream) = 0;
	
		virtual
		int
		:ref:`radiusSearch<doxid-df/d08/classcvflann_1_1_n_n_index_1a142da9423596dd59766d1dcbcac433e9>`(
			const :ref:`Matrix<doxid-d7/d79/classcvflann_1_1_matrix>`<ElementType>& query,
			:ref:`Matrix<doxid-d7/d79/classcvflann_1_1_matrix>`<int>& indices,
			:ref:`Matrix<doxid-d7/d79/classcvflann_1_1_matrix>`<DistanceType>& dists,
			float radius,
			const :ref:`SearchParams<doxid-d1/d18/structcvflann_1_1_search_params>`& params
			);
	
		virtual
		void
		:ref:`saveIndex<doxid-df/d08/classcvflann_1_1_n_n_index_1aad5c63116e3dbeccc96de7c70f0a8db7>`(FILE* stream) = 0;
	
		virtual
		:ref:`size_t<doxid-da/d06/autogenerated_2opencl__core_8hpp_1a6ff403ead16f7faa1f7228274eb6b01d>`
		:ref:`size<doxid-df/d08/classcvflann_1_1_n_n_index_1ae75fd979d25a239b4aba751114493fe0>`() const = 0;
	
		virtual
		int
		:ref:`usedMemory<doxid-df/d08/classcvflann_1_1_n_n_index_1ac172cb3774f8ae39ff1107bee4fadbf9>`() const = 0;
	
		virtual
		:ref:`size_t<doxid-da/d06/autogenerated_2opencl__core_8hpp_1a6ff403ead16f7faa1f7228274eb6b01d>`
		:ref:`veclen<doxid-df/d08/classcvflann_1_1_n_n_index_1acdcc255d1b67d5636a0f76b68809e6be>`() const = 0;

.. _details-d2/df9/classcvflann_1_1_index:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~



Methods
-------

.. index:: pair: function; buildIndex
.. _doxid-d2/df9/classcvflann_1_1_index_1ad9492a05669ee5bc1b07a4e2d0ac13c6:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	buildIndex()

Builds the index.

.. index:: pair: function; findNeighbors
.. _doxid-d2/df9/classcvflann_1_1_index_1a65866d94e0d29a5b9ffca22aba51e6b2:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	findNeighbors(
		:ref:`ResultSet<doxid-d2/d1c/classcvflann_1_1_result_set>`<:ref:`DistanceType<doxid-d2/df9/classcvflann_1_1_index_1adce66132d9ad41de0181fddd214b5e51>`>& result,
		const :ref:`ElementType<doxid-d2/df9/classcvflann_1_1_index_1a9fbfc2c13b3226997cfc15fc3a55b7c5>`* vec,
		const :ref:`SearchParams<doxid-d1/d18/structcvflann_1_1_search_params>`& searchParams
		)

Method that searches for nearest-neighbours.

.. index:: pair: function; getIndex
.. _doxid-d2/df9/classcvflann_1_1_index_1a8544609d6f21395a04ea6d7a1b409806:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`NNIndex<doxid-df/d08/classcvflann_1_1_n_n_index>`<Distance>*
	getIndex()

Returns actual index.

.. index:: pair: function; getIndexParameters
.. _doxid-d2/df9/classcvflann_1_1_index_1a62aed0e26a38321dad1539433b2616b7:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	const :ref:`IndexParams<doxid-dc/d8c/namespacecvflann_1ad55c74ae3144004b728d68382edbca45>`*
	getIndexParameters()

Returns index parameters.

Deprecated use :ref:`getParameters() <doxid-d2/df9/classcvflann_1_1_index_1a9985afa622417a47de1727e510bc1bc0>` instead.

.. index:: pair: function; getParameters
.. _doxid-d2/df9/classcvflann_1_1_index_1a9985afa622417a47de1727e510bc1bc0:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	:ref:`IndexParams<doxid-dc/d8c/namespacecvflann_1ad55c74ae3144004b728d68382edbca45>`
	getParameters() const



.. rubric:: Returns:

The index parameters

.. index:: pair: function; getType
.. _doxid-d2/df9/classcvflann_1_1_index_1a44a3da8d342b170cf5ab2216a18f73a3:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	:ref:`flann_algorithm_t<doxid-dc/d8c/namespacecvflann_1a4e3e6c98d774ea77fd7f0045c9bc7817>`
	getType() const



.. rubric:: Returns:

The index type (kdtree, kmeans,...)

.. index:: pair: function; knnSearch
.. _doxid-d2/df9/classcvflann_1_1_index_1ad27d21204e383916770e67bf5c28f4cf:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	knnSearch(
		const :ref:`Matrix<doxid-d7/d79/classcvflann_1_1_matrix>`<:ref:`ElementType<doxid-d2/df9/classcvflann_1_1_index_1a9fbfc2c13b3226997cfc15fc3a55b7c5>`>& queries,
		:ref:`Matrix<doxid-d7/d79/classcvflann_1_1_matrix>`<int>& indices,
		:ref:`Matrix<doxid-d7/d79/classcvflann_1_1_matrix>`<:ref:`DistanceType<doxid-d2/df9/classcvflann_1_1_index_1adce66132d9ad41de0181fddd214b5e51>`>& dists,
		int knn,
		const :ref:`SearchParams<doxid-d1/d18/structcvflann_1_1_search_params>`& params
		)

Perform k-nearest neighbor search.



.. rubric:: Parameters:

.. list-table::
	:widths: 20 80

	*
		- queries

		- The query points for which to find the nearest neighbors

	*
		- indices

		- The indices of the nearest neighbors found

	*
		- dists

		- Distances to the nearest neighbors found

	*
		- knn

		- Number of nearest neighbors to return

	*
		- params

		- Search parameters

.. index:: pair: function; loadIndex
.. _doxid-d2/df9/classcvflann_1_1_index_1ae0c80ab480e30654dbded8eebc25952e:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	loadIndex(FILE* stream)

Loads the index from a stream.



.. rubric:: Parameters:

.. list-table::
	:widths: 20 80

	*
		- stream

		- The stream from which the index is loaded

.. index:: pair: function; radiusSearch
.. _doxid-d2/df9/classcvflann_1_1_index_1a79685d67c8576e5648fde484bb9fceb0:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	int
	radiusSearch(
		const :ref:`Matrix<doxid-d7/d79/classcvflann_1_1_matrix>`<:ref:`ElementType<doxid-d2/df9/classcvflann_1_1_index_1a9fbfc2c13b3226997cfc15fc3a55b7c5>`>& query,
		:ref:`Matrix<doxid-d7/d79/classcvflann_1_1_matrix>`<int>& indices,
		:ref:`Matrix<doxid-d7/d79/classcvflann_1_1_matrix>`<:ref:`DistanceType<doxid-d2/df9/classcvflann_1_1_index_1adce66132d9ad41de0181fddd214b5e51>`>& dists,
		float radius,
		const :ref:`SearchParams<doxid-d1/d18/structcvflann_1_1_search_params>`& params
		)

Perform radius search.



.. rubric:: Parameters:

.. list-table::
	:widths: 20 80

	*
		- query

		- The query point

	*
		- indices

		- The indinces of the neighbors found within the given radius

	*
		- dists

		- The distances to the nearest neighbors found

	*
		- radius

		- The radius used for search

	*
		- params

		- Search parameters



.. rubric:: Returns:

Number of neighbors found

.. index:: pair: function; saveIndex
.. _doxid-d2/df9/classcvflann_1_1_index_1a7cad2783e47031b8e1ea0c1a56eb72cc:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	saveIndex(FILE* stream)

Saves the index to a stream.



.. rubric:: Parameters:

.. list-table::
	:widths: 20 80

	*
		- stream

		- The stream to save the index to

.. index:: pair: function; size
.. _doxid-d2/df9/classcvflann_1_1_index_1ae6cd9bd7498ea6158bb96a6411dda197:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	:ref:`size_t<doxid-da/d06/autogenerated_2opencl__core_8hpp_1a6ff403ead16f7faa1f7228274eb6b01d>`
	size() const



.. rubric:: Returns:

The dimensionality of the features in this index.

.. index:: pair: function; usedMemory
.. _doxid-d2/df9/classcvflann_1_1_index_1aa982eea27f03c66f8a1e2f8647b94709:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	int
	usedMemory() const



.. rubric:: Returns:

The amount of memory (in bytes) used by the index.

.. index:: pair: function; veclen
.. _doxid-d2/df9/classcvflann_1_1_index_1ad99df11ae3fe8a1655a9b01da1d9a314:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	:ref:`size_t<doxid-da/d06/autogenerated_2opencl__core_8hpp_1a6ff403ead16f7faa1f7228274eb6b01d>`
	veclen() const



.. rubric:: Returns:

number of features in this index.

