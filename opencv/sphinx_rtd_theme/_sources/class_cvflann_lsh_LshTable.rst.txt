.. index:: pair: class; cvflann::lsh::LshTable
.. _doxid-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table:

template class cvflann::lsh::LshTable
=====================================

.. toctree::
	:hidden:

Overview
~~~~~~~~

Lsh hash table. :ref:`More...<details-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <lsh_table.h>
	
	template <typename ElementType>
	class LshTable
	{
	public:
		// typedefs
	
		typedef std::map<:ref:`BucketKey<doxid-d4/daf/namespacecvflann_1_1lsh_1a798313f0f282f24b311c4cc90e2a6619>`, :ref:`Bucket<doxid-d4/daf/namespacecvflann_1_1lsh_1aef9e4f70918d6013ff72020141fa03d0>`> :ref:`BucketsSpace<doxid-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table_1aaec536a20e7ed000f05966d33fba1c3a>`;
		typedef std::vector<:ref:`Bucket<doxid-d4/daf/namespacecvflann_1_1lsh_1aef9e4f70918d6013ff72020141fa03d0>`> :ref:`BucketsSpeed<doxid-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table_1a5158c2837006305fa506668d12050d67>`;

		// construction
	
		:ref:`LshTable<doxid-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table_1ae93b248f42dd10484b3a79977b9a22d1>`();
	
		:ref:`LshTable<doxid-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table_1ab923a4e76c6ce45bacefa858413ba405>`(
			unsigned int feature_size,
			unsigned int key_size
			);
	
		:target:`LshTable<doxid-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table_1a3e63596e7c91583059b7c2257ac0edd6>`(
			unsigned int feature_size,
			unsigned int subsignature_size
			);

		// methods
	
		void
		:ref:`add<doxid-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table_1abcad1b9dca00f0d7b4f6751b8e2efcaf>`(
			unsigned int value,
			const ElementType* feature
			);
	
		void
		:ref:`add<doxid-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table_1a0364641a65b106381f2abd2f3f7aa9dd>`(:ref:`Matrix<doxid-d7/d79/classcvflann_1_1_matrix>`<ElementType> dataset);
	
		const :ref:`Bucket<doxid-d4/daf/namespacecvflann_1_1lsh_1aef9e4f70918d6013ff72020141fa03d0>`*
		:ref:`getBucketFromKey<doxid-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table_1a3db64dfd10852fe52de4113a78cc3849>`(:ref:`BucketKey<doxid-d4/daf/namespacecvflann_1_1lsh_1a798313f0f282f24b311c4cc90e2a6619>` key) const;
	
		:ref:`size_t<doxid-da/d06/autogenerated_2opencl__core_8hpp_1a6ff403ead16f7faa1f7228274eb6b01d>`
		:ref:`getKey<doxid-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table_1a1bae0ce47f0cc55119d5cca2c1e1d02d>`(const ElementType*) const;
	
		:ref:`size_t<doxid-da/d06/autogenerated_2opencl__core_8hpp_1a6ff403ead16f7faa1f7228274eb6b01d>`
		:ref:`getKey<doxid-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table_1a29baafdaf992f86bf062c5b18f5e2be2>`(const unsigned char* feature) const;
	
		:ref:`LshStats<doxid-d2/de0/structcvflann_1_1lsh_1_1_lsh_stats>`
		:ref:`getStats<doxid-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table_1a902cf06d48b6d50082c3470b3fa38795>`() const;
	
		:ref:`LshStats<doxid-d2/de0/structcvflann_1_1lsh_1_1_lsh_stats>`
		:target:`getStats<doxid-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table_1a891b6401cfe3f0d565185f983bcaed8c>`() const;
	};
.. _details-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

Lsh hash table. As its key is a sub-feature, and as usually the size of it is pretty small, we keep it as a continuous memory array. The value is an index in the corpus of features (we keep it as an unsigned int for pure memory reasons, it could be a size_t)

Typedefs
--------

.. index:: pair: typedef; BucketsSpace
.. _doxid-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table_1aaec536a20e7ed000f05966d33fba1c3a:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	typedef std::map<:ref:`BucketKey<doxid-d4/daf/namespacecvflann_1_1lsh_1a798313f0f282f24b311c4cc90e2a6619>`, :ref:`Bucket<doxid-d4/daf/namespacecvflann_1_1lsh_1aef9e4f70918d6013ff72020141fa03d0>`> BucketsSpace

A container of all the feature indices. Optimized for space

.. index:: pair: typedef; BucketsSpeed
.. _doxid-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table_1a5158c2837006305fa506668d12050d67:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	typedef std::vector<:ref:`Bucket<doxid-d4/daf/namespacecvflann_1_1lsh_1aef9e4f70918d6013ff72020141fa03d0>`> BucketsSpeed

A container of all the feature indices. Optimized for speed

Construction
------------

.. index:: pair: function; LshTable
.. _doxid-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table_1ae93b248f42dd10484b3a79977b9a22d1:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	LshTable()

Default constructor

.. index:: pair: function; LshTable
.. _doxid-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table_1ab923a4e76c6ce45bacefa858413ba405:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	LshTable(
		unsigned int feature_size,
		unsigned int key_size
		)

Default constructor Create the mask and allocate the memory



.. rubric:: Parameters:

.. list-table::
	:widths: 20 80

	*
		- feature_size

		- is the size of the feature (considered as a ElementType[])

	*
		- key_size

		- is the number of bits that are turned on in the feature

Methods
-------

.. index:: pair: function; add
.. _doxid-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table_1abcad1b9dca00f0d7b4f6751b8e2efcaf:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	add(
		unsigned int value,
		const ElementType* feature
		)

Add a feature to the table



.. rubric:: Parameters:

.. list-table::
	:widths: 20 80

	*
		- value

		- the value to store for that feature

	*
		- feature

		- the feature itself

.. index:: pair: function; add
.. _doxid-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table_1a0364641a65b106381f2abd2f3f7aa9dd:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	add(:ref:`Matrix<doxid-d7/d79/classcvflann_1_1_matrix>`<ElementType> dataset)

Add a set of features to the table



.. rubric:: Parameters:

.. list-table::
	:widths: 20 80

	*
		- dataset

		- the values to store

.. index:: pair: function; getBucketFromKey
.. _doxid-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table_1a3db64dfd10852fe52de4113a78cc3849:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	const :ref:`Bucket<doxid-d4/daf/namespacecvflann_1_1lsh_1aef9e4f70918d6013ff72020141fa03d0>`*
	getBucketFromKey(:ref:`BucketKey<doxid-d4/daf/namespacecvflann_1_1lsh_1a798313f0f282f24b311c4cc90e2a6619>` key) const

Get a bucket given the key



.. rubric:: Parameters:

.. list-table::
	:widths: 20 80

	*
		- key

		- 



.. rubric:: Returns:

.. index:: pair: function; getKey
.. _doxid-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table_1a1bae0ce47f0cc55119d5cca2c1e1d02d:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`size_t<doxid-da/d06/autogenerated_2opencl__core_8hpp_1a6ff403ead16f7faa1f7228274eb6b01d>`
	getKey(const ElementType*) const

Compute the sub-signature of a feature

.. index:: pair: function; getKey
.. _doxid-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table_1a29baafdaf992f86bf062c5b18f5e2be2:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`size_t<doxid-da/d06/autogenerated_2opencl__core_8hpp_1a6ff403ead16f7faa1f7228274eb6b01d>`
	getKey(const unsigned char* feature) const

Return the Subsignature of a feature



.. rubric:: Parameters:

.. list-table::
	:widths: 20 80

	*
		- feature

		- the feature to analyze

.. index:: pair: function; getStats
.. _doxid-dd/dc8/classcvflann_1_1lsh_1_1_lsh_table_1a902cf06d48b6d50082c3470b3fa38795:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`LshStats<doxid-d2/de0/structcvflann_1_1lsh_1_1_lsh_stats>`
	getStats() const

Get statistics about the table



.. rubric:: Returns:

