

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Introduction to Java Development &mdash; OpenCV Documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/target-highlight.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/doxyrest-pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/doxyrest-sphinx_rtd_theme.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Introduction to OpenCV Development with Clojure" href="page_tutorial_clojure_dev_intro.html" />
    <link rel="prev" title="Introduction into Android Development" href="page_tutorial_android_dev_intro.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> OpenCV Documentation
          

          
          </a>

          
            
            
              <div class="version">
                3.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="group_features2d.html">2D Features Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_viz.html">3D Visualizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_calib3d.html">Camera Calibration and 3D Reconstruction</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_flann.html">Clustering and Search in Multi-Dimensional Spaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_photo.html">Computational Photography</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_core.html">Core functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_highgui.html">High-level GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_imgcodecs.html">Image file reading and writing</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_imgproc.html">Image processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_stitching.html">Images stitching</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_ml.html">Machine Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_objdetect.html">Object Detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_shape.html">Shape Distance and Matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_superres.html">Super Resolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_video.html">Video Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_videoio.html">Video I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_videostab.html">Video Stabilization</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="page_citelist.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_cuda_intro.html">CUDA Module Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_imgproc_color_conversions.html">Color conversions</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_deprecated.html">Deprecated List</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_ml_intro.html">Machine Learning Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="page_tutorial_root.html">OpenCV Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_features2d.html">2D Features framework (feature2d module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_calib3d.html">Camera calibration and 3D reconstruction (calib3d module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_photo.html">Computational photography (photo module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_gpu.html">GPU-Accelerated Computer Vision (cuda module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_highgui.html">High Level GUI and Media (highgui module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_imgcodecs.html">Image Input and Output (imgcodecs module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_imgproc.html">Image Processing (imgproc module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_stitching.html">Images stitching (stitching module)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="page_tutorial_table_of_content_introduction.html">Introduction to OpenCV</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_dev_with_OCV_on_Android.html">Android Development with OpenCV</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_building_tegra_cuda.html">Building OpenCV for Tegra with CUDA</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_arm_crosscompile_with_cmake.html">Cross compilation for ARM based Linux systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_windows_visual_studio_Opencv.html">How to build applications with OpenCV inside the “Microsoft Visual Studio”</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_windows_visual_studio_image_watch.html">Image Watch: viewing in-memory images in the Visual Studio debugger</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_linux_install.html">Installation in Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_windows_install.html">Installation in Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_ios_install.html">Installation in iOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_android_dev_intro.html">Introduction into Android Development</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Introduction to Java Development</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_clojure_dev_intro.html">Introduction to OpenCV Development with Clojure</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_display_image.html">Load and Display an Image</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_load_save_image.html">Load, Modify, and Save an Image</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_O4A_SDK.html">OpenCV4Android SDK</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_transition_guide.html">Transition guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_android_ocl_intro.html">Use OpenCL in Android camera preview based CV application</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_java_eclipse.html">Using OpenCV Java with Eclipse</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_linux_eclipse.html">Using OpenCV with Eclipse (plugin CDT)</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_biicode.html">Using OpenCV with biicode dependency manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_linux_gcc_cmake.html">Using OpenCV with gcc and CMake</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_documentation.html">Writing documentation for OpenCV</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_ml.html">Machine Learning (ml module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_objdetect.html">Object Detection (objdetect module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_viz.html">OpenCV Viz</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_ios.html">OpenCV iOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_core.html">The Core Functionality (core module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_videoio.html">Video Input and Output (videoio module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_video.html">Video analysis (video module)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="page_index.html">OpenCV modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_tutorial_py_root.html">OpenCV-Python Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_todo.html">Todo List</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_videoio_overview.html">Video I/O with OpenCV Overview</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="example_contours2.cpp.html">contours2.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_convexhull.cpp.html">convexhull.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_cout_mat.cpp.html">cout_mat.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_demhist.cpp.html">demhist.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_distrans.cpp.html">distrans.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_edge.cpp.html">edge.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_ffilldemo.cpp.html">ffilldemo.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_filestorage.cpp.html">filestorage.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_fitellipse.cpp.html">fitellipse.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_grabcut.cpp.html">grabcut.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_houghcircles.cpp.html">houghcircles.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_houghlines.cpp.html">houghlines.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_kmeans.cpp.html">kmeans.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_laplace.cpp.html">laplace.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_lsd_lines.cpp.html">lsd_lines.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_minarea.cpp.html">minarea.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_morphology2.cpp.html">morphology2.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_pca.cpp.html">pca.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_polar_transforms.cpp.html">polar_transforms.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_segment_objects.cpp.html">segment_objects.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_watershed.cpp.html">watershed.cpp</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="global.html">Global Namespace</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OpenCV Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="page_tutorial_root.html">OpenCV Tutorials</a> &raquo;</li>
        
          <li><a href="page_tutorial_table_of_content_introduction.html">Introduction to OpenCV</a> &raquo;</li>
        
      <li>Introduction to Java Development</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="introduction-to-java-development">
<span id="doxid-d9-d52-tutorial-java-dev-intro"></span><span id="index-0"></span><h1>Introduction to Java Development</h1>
<p>As of OpenCV 2.4.4, OpenCV supports desktop Java development using nearly the same interface as for Android development. This guide will help you to create your first Java (or Scala) application using OpenCV. We will use either <a class="reference external" href="http://ant.apache.org/">Apache Ant</a> or <a class="reference external" href="http://www.scala-sbt.org/">Simple Build Tool (SBT)</a> to build the application.</p>
<p>If you want to use Eclipse head to <a class="reference internal" href="page_tutorial_java_eclipse.html#doxid-d1-d0a-tutorial-java-eclipse"><span class="std std-ref">Using OpenCV Java with Eclipse</span></a>. For further reading after this guide, look at the <a class="reference internal" href="page_tutorial_android_dev_intro.html#doxid-d9-d3f-tutorial-android-dev-intro"><span class="std std-ref">Introduction into Android Development</span></a> tutorials.</p>
<p class="rubric">What we’ll do in this guide</p>
<p>In this guide, we will:</p>
<ul class="simple">
<li>Get OpenCV with desktop Java support</li>
<li>Create an Ant or SBT project</li>
<li>Write a simple OpenCV application in Java or Scala</li>
</ul>
<p>The same process was used to create the samples in the <code class="docutils literal notranslate"><span class="pre">samples/java</span></code> folder of the OpenCV repository, so consult those files if you get lost.</p>
<p class="rubric">Get proper OpenCV</p>
<p>Starting from version 2.4.4 OpenCV includes desktop Java bindings.</p>
<p class="rubric">Download</p>
<p>The most simple way to get it is downloading the appropriate package of <strong>version 2.4.4 or higher</strong> from the <a class="reference external" href="http://sourceforge.net/projects/opencvlibrary/files/">OpenCV SourceForge repository</a>.</p>
<p>Windows users can find the prebuilt files needed for Java development in the <code class="docutils literal notranslate"><span class="pre">opencv/build/java/</span></code> folder inside the package. For other OSes it’s required to build OpenCV from sources.</p>
<p>Another option to get OpenCV sources is to clone <a class="reference external" href="https://github.com/opencv/opencv/">OpenCV git repository</a>. In order to build OpenCV with Java bindings you need JDK (Java Development Kit) (we recommend <a class="reference external" href="http://www.oracle.com/technetwork/java/javase/downloads/">Oracle/Sun JDK 6 or 7</a>), <a class="reference external" href="http://ant.apache.org/">Apache Ant</a> and Python v2.6 or higher to be installed.</p>
<p class="rubric">Build</p>
<p>Let’s build OpenCV:</p>
<pre class="highlight literal-block">
<span></span><span class="n">git</span> <span class="n">clone</span> <span class="nl">git</span><span class="p">:</span><span class="c1">//github.com/opencv/opencv.git</span>
<span class="n">cd</span> <span class="n">opencv</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="mf">2.4</span>
<span class="n">mkdir</span> <span class="n">build</span>
<span class="n">cd</span> <span class="n">build</span>
</pre>
<p>Generate a Makefile or a MS Visual Studio* solution, or whatever you use for building executables in your system:</p>
<pre class="highlight literal-block">
<span></span><span class="n">cmake</span> <span class="o">-</span><span class="n">DBUILD_SHARED_LIBS</span><span class="o">=</span><span class="n">OFF</span> <span class="p">..</span>
</pre>
<p>or</p>
<pre class="highlight literal-block">
<span></span><span class="n">cmake</span> <span class="o">-</span><span class="n">DBUILD_SHARED_LIBS</span><span class="o">=</span><span class="n">OFF</span> <span class="o">-</span><span class="n">G</span> <span class="s">&quot;Visual Studio 10&quot;</span> <span class="p">..</span>
</pre>
<p>When OpenCV is built as a set of <strong>static</strong> libraries (-DBUILD_SHARED_LIBS=OFF option) the Java bindings dynamic library is all-sufficient, i.e. doesn’t depend on other OpenCV libs, but includes all the OpenCV code inside.</p>
<p>Examine the output of CMake and ensure java is one of the modules “To be built”. If not, it’s likely you’re missing a dependency. You should troubleshoot by looking through the CMake output for any Java-related tools that aren’t found and installing them.</p>
<img alt="_images/cmake_output.png" src="_images/cmake_output.png" />
<p>If CMake can’t find Java in your system set the JAVA_HOME environment variable with the path to installed JDK before running it. E.g.:</p>
<pre class="highlight literal-block">
<span></span><span class="k">export</span> <span class="n">JAVA_HOME</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">jvm</span><span class="o">/</span><span class="n">java</span><span class="o">-</span><span class="mi">6</span><span class="o">-</span><span class="n">oracle</span>
<span class="n">cmake</span> <span class="o">-</span><span class="n">DBUILD_SHARED_LIBS</span><span class="o">=</span><span class="n">OFF</span> <span class="p">..</span>
</pre>
<p>Now start the build:</p>
<pre class="highlight literal-block">
<span></span><span class="n">make</span> <span class="o">-</span><span class="n">j8</span>
</pre>
<p>or</p>
<pre class="highlight literal-block">
<span></span><span class="n">msbuild</span> <span class="o">/</span><span class="n">m</span> <span class="n">OpenCV</span><span class="p">.</span><span class="n">sln</span> <span class="o">/</span><span class="nl">t</span><span class="p">:</span><span class="n">Build</span> <span class="o">/</span><span class="nl">p</span><span class="p">:</span><span class="n">Configuration</span><span class="o">=</span><span class="n">Release</span> <span class="o">/</span><span class="nl">v</span><span class="p">:</span><span class="n">m</span>
</pre>
<p>Besides all this will create a jar containing the Java interface (<code class="docutils literal notranslate"><span class="pre">bin/opencv-244.jar</span></code>) and a native dynamic library containing Java bindings and all the OpenCV stuff (<code class="docutils literal notranslate"><span class="pre">lib/libopencv_java244.so</span></code> or <code class="docutils literal notranslate"><span class="pre">bin/Release/opencv_java244.dll</span></code> respectively). We’ll use these files later.</p>
<p class="rubric">Java sample with Ant</p>
<p>The described sample is provided with OpenCV library in the <code class="docutils literal notranslate"><span class="pre">opencv/samples/java/ant</span></code> folder.</p>
<ul>
<li><p class="first">Create a folder where you’ll develop this sample application.</p>
</li>
<li><p class="first">In this folder create the <code class="docutils literal notranslate"><span class="pre">build.xml</span></code> file with the following content using any text editor:</p>
<pre class="highlight literal-block">
<span></span><span class="o">&lt;</span><span class="n">project</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;SimpleSample&quot;</span> <span class="n">basedir</span><span class="o">=</span><span class="s">&quot;.&quot;</span> <span class="k">default</span><span class="o">=</span><span class="s">&quot;rebuild-run&quot;</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">property</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;src.dir&quot;</span>     <span class="n">value</span><span class="o">=</span><span class="s">&quot;src&quot;</span><span class="o">/&gt;</span>

    <span class="o">&lt;</span><span class="n">property</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;lib.dir&quot;</span>     <span class="n">value</span><span class="o">=</span><span class="s">&quot;${ocvJarDir}&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">path</span> <span class="n">id</span><span class="o">=</span><span class="s">&quot;classpath&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">fileset</span> <span class="n">dir</span><span class="o">=</span><span class="s">&quot;${lib.dir}&quot;</span> <span class="n">includes</span><span class="o">=</span><span class="s">&quot;**/*.jar&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="n">path</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">property</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;build.dir&quot;</span>   <span class="n">value</span><span class="o">=</span><span class="s">&quot;build&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">property</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;classes.dir&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s">&quot;${build.dir}/classes&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;</span><span class="n">property</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;jar.dir&quot;</span>     <span class="n">value</span><span class="o">=</span><span class="s">&quot;${build.dir}/jar&quot;</span><span class="o">/&gt;</span>

    <span class="o">&lt;</span><span class="n">property</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;main-class&quot;</span>  <span class="n">value</span><span class="o">=</span><span class="s">&quot;${ant.project.name}&quot;</span><span class="o">/&gt;</span>


    <span class="o">&lt;</span><span class="n">target</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;clean&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="k">delete</span> <span class="n">dir</span><span class="o">=</span><span class="s">&quot;${build.dir}&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="n">target</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">target</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;compile&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">mkdir</span> <span class="n">dir</span><span class="o">=</span><span class="s">&quot;${classes.dir}&quot;</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="n">javac</span> <span class="n">includeantruntime</span><span class="o">=</span><span class="s">&quot;false&quot;</span> <span class="n">srcdir</span><span class="o">=</span><span class="s">&quot;${src.dir}&quot;</span> <span class="n">destdir</span><span class="o">=</span><span class="s">&quot;${classes.dir}&quot;</span> <span class="n">classpathref</span><span class="o">=</span><span class="s">&quot;classpath&quot;</span><span class="o">/&gt;</span>
    <span class="o">&lt;/</span><span class="n">target</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">target</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;jar&quot;</span> <span class="n">depends</span><span class="o">=</span><span class="s">&quot;compile&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">mkdir</span> <span class="n">dir</span><span class="o">=</span><span class="s">&quot;${jar.dir}&quot;</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="n">jar</span> <span class="n">destfile</span><span class="o">=</span><span class="s">&quot;${jar.dir}/${ant.project.name}.jar&quot;</span> <span class="n">basedir</span><span class="o">=</span><span class="s">&quot;${classes.dir}&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">manifest</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">attribute</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;Main-Class&quot;</span> <span class="n">value</span><span class="o">=</span><span class="s">&quot;${main-class}&quot;</span><span class="o">/&gt;</span>
            <span class="o">&lt;/</span><span class="n">manifest</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">jar</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">target</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">target</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;run&quot;</span> <span class="n">depends</span><span class="o">=</span><span class="s">&quot;jar&quot;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">java</span> <span class="n">fork</span><span class="o">=</span><span class="s">&quot;true&quot;</span> <span class="n">classname</span><span class="o">=</span><span class="s">&quot;${main-class}&quot;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">sysproperty</span> <span class="n">key</span><span class="o">=</span><span class="s">&quot;java.library.path&quot;</span> <span class="n">path</span><span class="o">=</span><span class="s">&quot;${ocvLibDir}&quot;</span><span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="n">classpath</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">path</span> <span class="n">refid</span><span class="o">=</span><span class="s">&quot;classpath&quot;</span><span class="o">/&gt;</span>
                <span class="o">&lt;</span><span class="n">path</span> <span class="n">location</span><span class="o">=</span><span class="s">&quot;${jar.dir}/${ant.project.name}.jar&quot;</span><span class="o">/&gt;</span>
            <span class="o">&lt;/</span><span class="n">classpath</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">java</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">target</span><span class="o">&gt;</span>

    <span class="o">&lt;</span><span class="n">target</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;rebuild&quot;</span> <span class="n">depends</span><span class="o">=</span><span class="s">&quot;clean,jar&quot;</span><span class="o">/&gt;</span>

    <span class="o">&lt;</span><span class="n">target</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;rebuild-run&quot;</span> <span class="n">depends</span><span class="o">=</span><span class="s">&quot;clean,run&quot;</span><span class="o">/&gt;</span>

<span class="o">&lt;/</span><span class="n">project</span><span class="o">&gt;</span>
</pre>
<p>This XML file can be reused for building other Java applications. It describes a common folder structure in the lines 3 - 12 and common targets for compiling and running the application. When reusing this XML don’t forget to modify the project name in the line 1, that is also the name of the main class (line 14). The paths to OpenCV jar and jni lib are expected as parameters (“${ocvJarDir}” in line 5 and “${ocvLibDir}” in line 37), but you can hardcode these paths for your convenience. See <a class="reference external" href="http://ant.apache.org/manual/">Ant documentation</a> for detailed description of its build file format.</p>
</li>
<li><p class="first">Create an <code class="docutils literal notranslate"><span class="pre">src</span></code> folder next to the <code class="docutils literal notranslate"><span class="pre">build.xml</span></code> file and a <code class="docutils literal notranslate"><span class="pre">SimpleSample.java</span></code> file in it.</p>
</li>
<li><p class="first">Put the following Java code into the <code class="docutils literal notranslate"><span class="pre">SimpleSample.java</span></code> file:</p>
<pre class="highlight literal-block">
<span></span><span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">opencv</span><span class="p">.</span><span class="n">core</span><span class="p">.</span><span class="n">Core</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">opencv</span><span class="p">.</span><span class="n">core</span><span class="p">.</span><span class="n">Mat</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">opencv</span><span class="p">.</span><span class="n">core</span><span class="p">.</span><span class="n">CvType</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">opencv</span><span class="p">.</span><span class="n">core</span><span class="p">.</span><span class="n">Scalar</span><span class="p">;</span>

<span class="k">class</span> <span class="n">SimpleSample</span> <span class="p">{</span>

  <span class="k">static</span><span class="p">{</span> <span class="n">System</span><span class="p">.</span><span class="n">loadLibrary</span><span class="p">(</span><span class="n">Core</span><span class="p">.</span><span class="n">NATIVE_LIBRARY_NAME</span><span class="p">);</span> <span class="p">}</span>

  <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="n">main</span><span class="p">(</span><span class="n">String</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Welcome to OpenCV &quot;</span> <span class="o">+</span> <span class="n">Core</span><span class="p">.</span><span class="n">VERSION</span><span class="p">);</span>
    <span class="n">Mat</span> <span class="n">m</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Mat</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <a class="reference internal" href="struct_CvType.html#doxid-d5-dea-struct-cv-type"><span class="std std-ref">CvType</span></a><span></span><span class="p">.</span><span class="n">CV_8UC1</span><span class="p">,</span> <span class="k">new</span> <span class="n">Scalar</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
    <span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;OpenCV Mat: &quot;</span> <span class="o">+</span> <span class="n">m</span><span class="p">);</span>
    <span class="n">Mat</span> <span class="n">mr1</span> <span class="o">=</span> <span class="n">m</span><span class="p">.</span><span class="n">row</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">mr1</span><span class="p">.</span><span class="n">setTo</span><span class="p">(</span><span class="k">new</span> <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1ga599fe92e910c027be274233eccad7beb"><span class="std std-ref">Scalar</span></a><span></span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
    <span class="n">Mat</span> <span class="n">mc5</span> <span class="o">=</span> <span class="n">m</span><span class="p">.</span><span class="n">col</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
    <span class="n">mc5</span><span class="p">.</span><span class="n">setTo</span><span class="p">(</span><span class="k">new</span> <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1ga599fe92e910c027be274233eccad7beb"><span class="std std-ref">Scalar</span></a><span></span><span class="p">(</span><span class="mi">5</span><span class="p">));</span>
    <span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;OpenCV Mat data:</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">+</span> <span class="n">m</span><span class="p">.</span><span class="n">dump</span><span class="p">());</span>
  <span class="p">}</span>

<span class="p">}</span>
</pre>
</li>
<li><p class="first">Run the following command in console in the folder containing <code class="docutils literal notranslate"><span class="pre">build.xml</span></code> :</p>
<pre class="highlight literal-block">
<span></span><span class="n">ant</span> <span class="o">-</span><span class="n">DocvJarDir</span><span class="o">=</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">dir</span><span class="o">/</span><span class="n">containing</span><span class="o">/</span><span class="n">opencv</span><span class="o">-</span><span class="mf">244.</span><span class="n">jar</span> <span class="o">-</span><span class="n">DocvLibDir</span><span class="o">=</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">dir</span><span class="o">/</span><span class="n">containing</span><span class="o">/</span><span class="n">opencv_java244</span><span class="o">/</span><span class="n">native</span><span class="o">/</span><span class="n">library</span>
</pre>
<p>For example:</p>
<pre class="highlight literal-block">
<span></span><span class="n">ant</span> <span class="o">-</span><span class="n">DocvJarDir</span><span class="o">=</span><span class="nl">X</span><span class="p">:</span><span class="err">\</span><span class="n">opencv</span><span class="o">-</span><span class="mf">2.4.4</span><span class="err">\</span><span class="n">bin</span> <span class="o">-</span><span class="n">DocvLibDir</span><span class="o">=</span><span class="nl">X</span><span class="p">:</span><span class="err">\</span><span class="n">opencv</span><span class="o">-</span><span class="mf">2.4.4</span><span class="err">\</span><span class="n">bin</span><span class="err">\</span><span class="n">Release</span>
</pre>
<p>The command should initiate [re]building and running the sample. You should see on the screen something like this:</p>
<img alt="_images/ant_output.png" src="_images/ant_output.png" />
</li>
</ul>
<p class="rubric">SBT project for Java and Scala</p>
<p>Now we’ll create a simple Java application using SBT. This serves as a brief introduction to those unfamiliar with this build tool. We’re using SBT because it is particularly easy and powerful.</p>
<p>First, download and install <a class="reference external" href="http://www.scala-sbt.org/">SBT</a> using the instructions on its <a class="reference external" href="http://www.scala-sbt.org/">web site</a>.</p>
<p>Next, navigate to a new directory where you’d like the application source to live (outside <code class="docutils literal notranslate"><span class="pre">opencv</span></code> dir). Let’s call it “JavaSample” and create a directory for it:</p>
<pre class="highlight literal-block">
<span></span><span class="n">cd</span> <span class="o">&lt;</span><span class="n">somewhere</span> <span class="n">outside</span> <span class="n">opencv</span><span class="o">&gt;</span>
<span class="n">mkdir</span> <span class="n">JavaSample</span>
</pre>
<p>Now we will create the necessary folders and an SBT project:</p>
<pre class="highlight literal-block">
<span></span><span class="n">cd</span> <span class="n">JavaSample</span>
<span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="n">src</span><span class="o">/</span><span class="n">main</span><span class="o">/</span><span class="n">java</span> <span class="err">#</span> <span class="n">This</span> <span class="n">is</span> <span class="n">where</span> <span class="n">SBT</span> <span class="n">expects</span> <span class="n">to</span> <span class="n">find</span> <span class="n">Java</span> <span class="n">sources</span>
<span class="n">mkdir</span> <span class="n">project</span> <span class="err">#</span> <span class="n">This</span> <span class="n">is</span> <span class="n">where</span> <span class="n">the</span> <span class="n">build</span> <span class="n">definitions</span> <span class="n">live</span>
</pre>
<p>Now open <code class="docutils literal notranslate"><span class="pre">project/build.scala</span></code> in your favorite editor and paste the following. It defines your project:</p>
<pre class="highlight literal-block">
<span></span><span class="n">import</span> <span class="n">sbt</span><span class="p">.</span><span class="n">_</span>
<span class="n">import</span> <span class="n">Keys</span><span class="p">.</span><span class="n">_</span>

<span class="n">object</span> <span class="n">JavaSampleBuild</span> <span class="n">extends</span> <span class="n">Build</span> <span class="p">{</span>
  <span class="n">def</span> <span class="n">scalaSettings</span> <span class="o">=</span> <span class="n">Seq</span><span class="p">(</span>
    <span class="nl">scalaVersion</span> <span class="p">:</span><span class="o">=</span> <span class="s">&quot;2.10.0&quot;</span><span class="p">,</span>
    <span class="n">scalacOptions</span> <span class="o">++=</span> <span class="n">Seq</span><span class="p">(</span>
      <span class="s">&quot;-optimize&quot;</span><span class="p">,</span>
      <span class="s">&quot;-unchecked&quot;</span><span class="p">,</span>
      <span class="s">&quot;-deprecation&quot;</span>
    <span class="p">)</span>
  <span class="p">)</span>

  <span class="n">def</span> <span class="n">buildSettings</span> <span class="o">=</span>
    <span class="n">Project</span><span class="p">.</span><span class="n">defaultSettings</span> <span class="o">++</span>
    <span class="n">scalaSettings</span>

  <span class="n">lazy</span> <span class="n">val</span> <span class="n">root</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">val</span> <span class="n">settings</span> <span class="o">=</span> <span class="n">buildSettings</span> <span class="o">++</span> <span class="n">Seq</span><span class="p">(</span><span class="nl">name</span> <span class="p">:</span><span class="o">=</span> <span class="s">&quot;JavaSample&quot;</span><span class="p">)</span>
    <span class="n">Project</span><span class="p">(</span><span class="n">id</span> <span class="o">=</span> <span class="s">&quot;JavaSample&quot;</span><span class="p">,</span> <span class="n">base</span> <span class="o">=</span> <span class="n">file</span><span class="p">(</span><span class="s">&quot;.&quot;</span><span class="p">),</span> <span class="n">settings</span> <span class="o">=</span> <span class="n">settings</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre>
<p>Now edit <code class="docutils literal notranslate"><span class="pre">project/plugins.sbt</span></code> and paste the following. This will enable auto-generation of an Eclipse project:</p>
<pre class="highlight literal-block">
<span></span><span class="n">addSbtPlugin</span><span class="p">(</span><span class="s">&quot;com.typesafe.sbteclipse&quot;</span> <span class="o">%</span> <span class="s">&quot;sbteclipse-plugin&quot;</span> <span class="o">%</span> <span class="s">&quot;2.1.0&quot;</span><span class="p">)</span>
</pre>
<p>Now run sbt from the <code class="docutils literal notranslate"><span class="pre">JavaSample</span></code> root and from within SBT run eclipse to generate an eclipse project:</p>
<pre class="highlight literal-block">
<span></span><span class="n">sbt</span> <span class="err">#</span> <span class="n">Starts</span> <span class="n">the</span> <span class="n">sbt</span> <span class="n">console</span>
<span class="n">eclipse</span> <span class="err">#</span> <span class="n">Running</span> <span class="s">&quot;eclipse&quot;</span> <span class="n">from</span> <span class="n">within</span> <span class="n">the</span> <span class="n">sbt</span> <span class="n">console</span>
</pre>
<p>You should see something like this:</p>
<img alt="_images/sbt_eclipse.png" src="_images/sbt_eclipse.png" />
<p>You can now import the SBT project to Eclipse using Import … -&gt; Existing projects into workspace. Whether you actually do this is optional for the guide; we’ll be using SBT to build the project, so if you choose to use Eclipse it will just serve as a text editor.</p>
<p>To test that everything is working, create a simple “Hello OpenCV” application. Do this by creating a file <code class="docutils literal notranslate"><span class="pre">src/main/java/HelloOpenCV.java</span></code> with the following contents:</p>
<pre class="highlight literal-block">
<span></span><span class="k">public</span> <span class="k">class</span> <span class="n">HelloOpenCV</span> <span class="p">{</span>
  <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="n">main</span><span class="p">(</span><span class="n">String</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Hello, OpenCV&quot;</span><span class="p">);</span>
 <span class="p">}</span>
</pre>
<p>}</p>
<p>Now execute run from the sbt console, or more concisely, run sbt run from the command line:</p>
<pre class="highlight literal-block">
<span></span><span class="n">sbt</span> <span class="n">run</span>
</pre>
<p>You should see something like this:</p>
<img alt="_images/sbt_run.png" src="_images/sbt_run.png" />
<p class="rubric">Running SBT samples</p>
<p>Now we’ll create a simple face detection application using OpenCV.</p>
<p>First, create a <code class="docutils literal notranslate"><span class="pre">lib/</span></code> folder and copy the OpenCV jar into it. By default, SBT adds jars in the lib folder to the Java library search path. You can optionally rerun sbt eclipse to update your Eclipse project.</p>
<pre class="highlight literal-block">
<span></span><span class="n">mkdir</span> <span class="n">lib</span>
<span class="n">cp</span> <span class="o">&lt;</span><span class="n">opencv_dir</span><span class="o">&gt;/</span><span class="n">build</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">opencv_</span><span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="p">.</span><span class="n">jar</span> <span class="n">lib</span><span class="o">/</span>
<span class="n">sbt</span> <span class="n">eclipse</span>
</pre>
<p>Next, create the directory <code class="docutils literal notranslate"><span class="pre">src/main/resources</span></code> and download this Lena image into it:</p>
<img alt="_images/lena.png" src="_images/lena.png" />
<p>Make sure it’s called <code class="docutils literal notranslate"><span class="pre">&quot;lena.png&quot;</span></code>. Items in the resources directory are available to the Java application at runtime.</p>
<p>Next, copy <code class="docutils literal notranslate"><span class="pre">lbpcascade_frontalface.xml</span></code> from <code class="docutils literal notranslate"><span class="pre">opencv/data/lbpcascades/</span></code> into the <code class="docutils literal notranslate"><span class="pre">resources</span></code> directory:</p>
<pre class="highlight literal-block">
<span></span><span class="n">cp</span> <span class="o">&lt;</span><span class="n">opencv_dir</span><span class="o">&gt;/</span><span class="n">data</span><span class="o">/</span><span class="n">lbpcascades</span><span class="o">/</span><span class="n">lbpcascade_frontalface</span><span class="p">.</span><span class="n">xml</span> <span class="n">src</span><span class="o">/</span><span class="n">main</span><span class="o">/</span><span class="n">resources</span><span class="o">/</span>
</pre>
<p>Now modify src/main/java/HelloOpenCV.java so it contains the following Java code:</p>
<pre class="highlight literal-block">
<span></span><span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">opencv</span><span class="p">.</span><span class="n">core</span><span class="p">.</span><span class="n">Core</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">opencv</span><span class="p">.</span><span class="n">core</span><span class="p">.</span><span class="n">Mat</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">opencv</span><span class="p">.</span><span class="n">core</span><span class="p">.</span><span class="n">MatOfRect</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">opencv</span><span class="p">.</span><span class="n">core</span><span class="p">.</span><span class="n">Point</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">opencv</span><span class="p">.</span><span class="n">core</span><span class="p">.</span><span class="n">Rect</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">opencv</span><span class="p">.</span><span class="n">core</span><span class="p">.</span><span class="n">Scalar</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">opencv</span><span class="p">.</span><span class="n">imgcodecs</span><span class="p">.</span><span class="n">Imgcodecs</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">opencv</span><span class="p">.</span><span class="n">objdetect</span><span class="p">.</span><span class="n">CascadeClassifier</span><span class="p">;</span>

<span class="c1">//</span>
<span class="c1">// Detects faces in an image, draws boxes around them, and writes the results</span>
<span class="c1">// to &quot;faceDetection.png&quot;.</span>
<span class="c1">//</span>
<span class="k">class</span> <span class="n">DetectFaceDemo</span> <span class="p">{</span>
  <span class="k">public</span> <span class="kt">void</span> <span class="n">run</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">Running DetectFaceDemo&quot;</span><span class="p">);</span>

    <span class="c1">// Create a face detector from the cascade file in the resources</span>
    <span class="c1">// directory.</span>
    <span class="n">CascadeClassifier</span> <span class="n">faceDetector</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CascadeClassifier</span><span class="p">(</span><span class="n">getClass</span><span class="p">().</span><span class="n">getResource</span><span class="p">(</span><span class="s">&quot;/lbpcascade_frontalface.xml&quot;</span><span class="p">).</span><span class="n">getPath</span><span class="p">());</span>
    <span class="n">Mat</span> <span class="n">image</span> <span class="o">=</span> <span class="n">Imgcodecs</span><span class="p">.</span><span class="n">imread</span><span class="p">(</span><span class="n">getClass</span><span class="p">().</span><span class="n">getResource</span><span class="p">(</span><span class="s">&quot;/lena.png&quot;</span><span class="p">).</span><span class="n">getPath</span><span class="p">());</span>

    <span class="c1">// Detect faces in the image.</span>
    <span class="c1">// MatOfRect is a special container class for Rect.</span>
    <span class="n">MatOfRect</span> <span class="n">faceDetections</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MatOfRect</span><span class="p">();</span>
    <span class="n">faceDetector</span><span class="p">.</span><span class="n">detectMultiScale</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">faceDetections</span><span class="p">);</span>

    <span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="s">&quot;Detected %s faces&quot;</span><span class="p">,</span> <span class="n">faceDetections</span><span class="p">.</span><span class="n">toArray</span><span class="p">().</span><span class="n">length</span><span class="p">));</span>

    <span class="c1">// Draw a bounding box around each face.</span>
    <span class="k">for</span> <span class="p">(</span><a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1ga11d95de507098e90bad732b9345402e8"><span class="std std-ref">Rect</span></a><span></span> <span class="nl">rect</span> <span class="p">:</span> <span class="n">faceDetections</span><span class="p">.</span><span class="n">toArray</span><span class="p">())</span> <span class="p">{</span>
        <span class="n">Imgproc</span><span class="p">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="k">new</span> <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1ga1e83eafb2d26b3c93f09e8338bcab192"><span class="std std-ref">Point</span></a><span></span><span class="p">(</span><span class="n">rect</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">rect</span><span class="p">.</span><span class="n">y</span><span class="p">),</span> <span class="k">new</span> <span class="n">Point</span><span class="p">(</span><span class="n">rect</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">rect</span><span class="p">.</span><span class="n">width</span><span class="p">,</span> <span class="n">rect</span><span class="p">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">rect</span><span class="p">.</span><span class="n">height</span><span class="p">),</span> <span class="k">new</span> <span class="n">Scalar</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="c1">// Save the visualized detection.</span>
    <span class="n">String</span> <span class="n">filename</span> <span class="o">=</span> <span class="s">&quot;faceDetection.png&quot;</span><span class="p">;</span>
    <span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="s">&quot;Writing %s&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">));</span>
    <span class="n">Imgcodecs</span><span class="p">.</span><span class="n">imwrite</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">image</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="n">HelloOpenCV</span> <span class="p">{</span>
  <span class="k">public</span> <span class="k">static</span> <span class="kt">void</span> <span class="n">main</span><span class="p">(</span><span class="n">String</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Hello, OpenCV&quot;</span><span class="p">);</span>

    <span class="c1">// Load the native library.</span>
    <span class="n">System</span><span class="p">.</span><span class="n">loadLibrary</span><span class="p">(</span><span class="n">Core</span><span class="p">.</span><span class="n">NATIVE_LIBRARY_NAME</span><span class="p">);</span>
    <span class="k">new</span> <span class="nf">DetectFaceDemo</span><span class="p">().</span><span class="n">run</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre>
<p>Note the call to System.loadLibrary(Core.NATIVE_LIBRARY_NAME). This command must be executed exactly once per Java process prior to using any native OpenCV methods. If you don’t call it, you will get UnsatisfiedLink errors. You will also get errors if you try to load OpenCV when it has already been loaded.</p>
<p>Now run the face detection app using <cite>sbt run</cite>:</p>
<pre class="highlight literal-block">
<span></span><span class="n">sbt</span> <span class="n">run</span>
</pre>
<p>You should see something like this:</p>
<img alt="_images/sbt_run_face.png" src="_images/sbt_run_face.png" />
<p>It should also write the following image to <code class="docutils literal notranslate"><span class="pre">faceDetection.png</span></code> :</p>
<img alt="_images/faceDetection.png" src="_images/faceDetection.png" />
<p>You’re done! Now you have a sample Java application working with OpenCV, so you can start the work on your own. We wish you good luck and many years of joyful life!</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="page_tutorial_clojure_dev_intro.html" class="btn btn-neutral float-right" title="Introduction to OpenCV Development with Clojure" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="page_tutorial_android_dev_intro.html" class="btn btn-neutral float-left" title="Introduction into Android Development" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 1999-2017, OpenCV Maintainers

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>