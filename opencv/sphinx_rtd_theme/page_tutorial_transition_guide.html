

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Transition guide &mdash; OpenCV Documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/target-highlight.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/doxyrest-pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/doxyrest-sphinx_rtd_theme.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Use OpenCL in Android camera preview based CV application" href="page_tutorial_android_ocl_intro.html" />
    <link rel="prev" title="OpenCV4Android SDK" href="page_tutorial_O4A_SDK.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> OpenCV Documentation
          

          
          </a>

          
            
            
              <div class="version">
                3.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="group_features2d.html">2D Features Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_viz.html">3D Visualizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_calib3d.html">Camera Calibration and 3D Reconstruction</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_flann.html">Clustering and Search in Multi-Dimensional Spaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_photo.html">Computational Photography</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_core.html">Core functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_highgui.html">High-level GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_imgcodecs.html">Image file reading and writing</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_imgproc.html">Image processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_stitching.html">Images stitching</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_ml.html">Machine Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_objdetect.html">Object Detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_shape.html">Shape Distance and Matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_superres.html">Super Resolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_video.html">Video Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_videoio.html">Video I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_videostab.html">Video Stabilization</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="page_citelist.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_cuda_intro.html">CUDA Module Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_imgproc_color_conversions.html">Color conversions</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_deprecated.html">Deprecated List</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_ml_intro.html">Machine Learning Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="page_tutorial_root.html">OpenCV Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_features2d.html">2D Features framework (feature2d module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_calib3d.html">Camera calibration and 3D reconstruction (calib3d module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_photo.html">Computational photography (photo module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_gpu.html">GPU-Accelerated Computer Vision (cuda module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_highgui.html">High Level GUI and Media (highgui module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_imgcodecs.html">Image Input and Output (imgcodecs module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_imgproc.html">Image Processing (imgproc module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_stitching.html">Images stitching (stitching module)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="page_tutorial_table_of_content_introduction.html">Introduction to OpenCV</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_dev_with_OCV_on_Android.html">Android Development with OpenCV</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_building_tegra_cuda.html">Building OpenCV for Tegra with CUDA</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_arm_crosscompile_with_cmake.html">Cross compilation for ARM based Linux systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_windows_visual_studio_Opencv.html">How to build applications with OpenCV inside the “Microsoft Visual Studio”</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_windows_visual_studio_image_watch.html">Image Watch: viewing in-memory images in the Visual Studio debugger</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_linux_install.html">Installation in Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_windows_install.html">Installation in Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_ios_install.html">Installation in iOS</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_android_dev_intro.html">Introduction into Android Development</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_java_dev_intro.html">Introduction to Java Development</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_clojure_dev_intro.html">Introduction to OpenCV Development with Clojure</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_display_image.html">Load and Display an Image</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_load_save_image.html">Load, Modify, and Save an Image</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_O4A_SDK.html">OpenCV4Android SDK</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Transition guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#changes-overview">Changes overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#transition-hints">Transition hints</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_android_ocl_intro.html">Use OpenCL in Android camera preview based CV application</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_java_eclipse.html">Using OpenCV Java with Eclipse</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_linux_eclipse.html">Using OpenCV with Eclipse (plugin CDT)</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_biicode.html">Using OpenCV with biicode dependency manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_linux_gcc_cmake.html">Using OpenCV with gcc and CMake</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_documentation.html">Writing documentation for OpenCV</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_ml.html">Machine Learning (ml module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_objdetect.html">Object Detection (objdetect module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_viz.html">OpenCV Viz</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_ios.html">OpenCV iOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_core.html">The Core Functionality (core module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_videoio.html">Video Input and Output (videoio module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_video.html">Video analysis (video module)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="page_index.html">OpenCV modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_tutorial_py_root.html">OpenCV-Python Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_todo.html">Todo List</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_videoio_overview.html">Video I/O with OpenCV Overview</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="example_contours2.cpp.html">contours2.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_convexhull.cpp.html">convexhull.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_cout_mat.cpp.html">cout_mat.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_demhist.cpp.html">demhist.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_distrans.cpp.html">distrans.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_edge.cpp.html">edge.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_ffilldemo.cpp.html">ffilldemo.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_filestorage.cpp.html">filestorage.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_fitellipse.cpp.html">fitellipse.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_grabcut.cpp.html">grabcut.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_houghcircles.cpp.html">houghcircles.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_houghlines.cpp.html">houghlines.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_kmeans.cpp.html">kmeans.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_laplace.cpp.html">laplace.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_lsd_lines.cpp.html">lsd_lines.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_minarea.cpp.html">minarea.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_morphology2.cpp.html">morphology2.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_pca.cpp.html">pca.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_polar_transforms.cpp.html">polar_transforms.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_segment_objects.cpp.html">segment_objects.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_watershed.cpp.html">watershed.cpp</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="global.html">Global Namespace</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OpenCV Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="page_tutorial_root.html">OpenCV Tutorials</a> &raquo;</li>
        
          <li><a href="page_tutorial_table_of_content_introduction.html">Introduction to OpenCV</a> &raquo;</li>
        
      <li>Transition guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="transition-guide">
<span id="doxid-db-dfa-tutorial-transition-guide"></span><span id="index-0"></span><h1>Transition guide</h1>
<div class="section" id="changes-overview">
<span id="doxid-db-dfa-tutorial-transition-guide-1tutorial-transition-overview"></span><h2>Changes overview</h2>
<p>This document is intended to software developers who want to migrate their code to OpenCV 3.0.</p>
<p>OpenCV 3.0 introduced many new algorithms and features comparing to version 2.4. Some modules have been rewritten, some have been reorganized. Although most of the algorithms from 2.4 are still present, the interfaces can differ.</p>
<p>This section describes most notable changes in general, all details and examples of transition actions are in the next part of the document.</p>
<p class="rubric">Contrib repository</p>
<p><a class="reference external" href="https://github.com/opencv/opencv_contrib">https://github.com/opencv/opencv_contrib</a></p>
<p>This is a place for all new, experimental and non-free algorithms. It does not receive so much attention from the support team comparing to main repository, but the community makes an effort to keep it in a good shape.</p>
<p>To build OpenCV with <em>contrib</em> repository, add the following option to your cmake command:</p>
<pre class="highlight literal-block">
<span></span><span class="o">-</span><span class="n">DOPENCV_EXTRA_MODULES_PATH</span><span class="o">=&lt;</span><span class="n">path</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">opencv_contrib</span><span class="o">&gt;/</span><span class="n">modules</span>
</pre>
<p class="rubric">Headers layout</p>
<p>In 2.4 all headers are located in corresponding module subfolder (<em>opencv2/&lt;module&gt;/&lt;module&gt;.hpp</em>), in 3.0 there are top-level module headers containing the most of the module functionality: <em>opencv2/&lt;module&gt;.hpp</em> and all C-style API definitions have been moved to separate headers (for example <code class="docutils literal notranslate"><span class="pre">opencv2/core/core_c.h</span></code>).</p>
<p class="rubric">Algorithm interfaces</p>
<p>General algorithm usage pattern has changed: now it must be created on heap wrapped in smart pointer <a class="reference internal" href="struct_cv_Ptr.html#doxid-d2-d56-structcv-1-1-ptr"><span class="std std-ref">cv::Ptr</span></a>. Version 2.4 allowed both stack and heap allocations, directly or via smart pointer.</p>
<p><em>get</em> and <em>set</em> methods have been removed from the <a class="reference internal" href="class_cv_Algorithm.html#doxid-d1-d41-classcv-1-1-algorithm"><span class="std std-ref">cv::Algorithm</span></a> class along with <em>CV_INIT_ALGORITHM</em> macro. In 3.0 all properties have been converted to the pairs of <em>getProperty/setProperty</em> pure virtual methods. As a result it is <strong>not</strong> possible to create and use <a class="reference internal" href="class_cv_Algorithm.html#doxid-d1-d41-classcv-1-1-algorithm"><span class="std std-ref">cv::Algorithm</span></a> instance by name (using generic <em>Algorithm::create(String)</em> method), one should call corresponding factory method explicitly.</p>
<p class="rubric">Changed modules</p>
<ul class="simple">
<li><em>ml</em> module has been rewritten</li>
<li><em>highgui</em> module has been split into parts: <em>imgcodecs</em>, <em>videoio</em> and <em>highgui</em> itself</li>
<li><em>features2d</em> module have been reorganized (some feature detectors has been moved to <em>opencv_contrib/xfeatures2d</em> module)</li>
<li><em>legacy</em>, <em>nonfree</em> modules have been removed. Some algorithms have been moved to different locations and some have been completely rewritten or removed</li>
<li>CUDA API has been updated (<em>gpu</em> module -&gt; several <em>cuda</em> modules, namespace <em>gpu</em> -&gt; namespace <em>cuda</em>)</li>
<li>OpenCL API has changed (<em>ocl</em> module has been removed, separate <em>ocl::</em> implementations -&gt; Transparent API)</li>
<li>Some other methods and classes have been relocated</li>
</ul>
</div>
<div class="section" id="transition-hints">
<span id="doxid-db-dfa-tutorial-transition-guide-1tutorial-transition-hints"></span><h2>Transition hints</h2>
<p>This section describes concrete actions with examples.</p>
<div class="section" id="prepare-2-4">
<span id="doxid-db-dfa-tutorial-transition-guide-1tutorial-transition-hints-24"></span><h3>Prepare 2.4</h3>
<p>Some changes made in the latest 2.4.11 OpenCV version allow you to prepare current codebase to migration:</p>
<ul class="simple">
<li><a class="reference internal" href="group_core_basic.html#doxid-dc-d84-group-core-basic-1ga94b059075f41314c83dd2a2758c81acd"><span class="std std-ref">cv::makePtr</span></a> function is now available</li>
<li><em>opencv2/&lt;module&gt;.hpp</em> headers have been created</li>
</ul>
</div>
<div class="section" id="new-headers-layout">
<span id="doxid-db-dfa-tutorial-transition-guide-1tutorial-transition-hints-headers"></span><h3>New headers layout</h3>
<p><strong>Note:</strong> Changes intended to ease the migration have been made in OpenCV 3.0, thus the following instructions are not necessary, but recommended.</p>
<ol class="arabic">
<li><p class="first">Replace inclusions of old module headers:</p>
<pre class="highlight literal-block">
<span></span><span class="c1">// old header</span>
<span class="cp">#include</span> <span class="cpf">&quot;opencv2/&lt;module&gt;/&lt;module&gt;.hpp&quot;</span><span class="cp"></span>
<span class="c1">// new header</span>
<span class="cp">#include</span> <span class="cpf">&quot;opencv2/&lt;module&gt;.hpp&quot;</span>
</pre>
</li>
<li><p class="first">If your code is using C API (<code class="docutils literal notranslate"><span class="pre">cv*</span></code> functions, <code class="docutils literal notranslate"><span class="pre">Cv*</span></code> structures or <code class="docutils literal notranslate"><span class="pre">CV_*</span></code> enumerations), include corresponding <code class="docutils literal notranslate"><span class="pre">*_c.h</span></code> headers. Although it is recommended to use C++ API, most of C-functions are still accessible in separate header files (<code class="docutils literal notranslate"><span class="pre">opencv2/core/core_c.h</span></code>, <code class="docutils literal notranslate"><span class="pre">opencv2/core/types_c.h</span></code>, <code class="docutils literal notranslate"><span class="pre">opencv2/imgproc/imgproc_c.h</span></code>, etc.).</p>
</li>
</ol>
</div>
<div class="section" id="modern-way-to-use-algorithm">
<span id="doxid-db-dfa-tutorial-transition-guide-1tutorial-transition-algorithm"></span><h3>Modern way to use algorithm</h3>
<ol class="arabic">
<li><p class="first">Algorithm instances must be created with <a class="reference internal" href="group_core_basic.html#doxid-dc-d84-group-core-basic-1ga94b059075f41314c83dd2a2758c81acd"><span class="std std-ref">cv::makePtr</span></a> function or corresponding static factory method if available:</p>
<pre class="highlight literal-block">
<span></span><span class="c1">// good ways</span>
<span class="n">Ptr</span><span class="o">&lt;</span><span class="n">SomeAlgo</span><span class="o">&gt;</span> <span class="n">algo</span> <span class="o">=</span> <span class="n">makePtr</span><span class="o">&lt;</span><span class="n">SomeAlgo</span><span class="o">&gt;</span><span class="p">(...);</span>
<span class="n">Ptr</span><span class="o">&lt;</span><span class="n">SomeAlgo</span><span class="o">&gt;</span> <span class="n">algo</span> <span class="o">=</span> <span class="n">SomeAlgo</span><span class="o">::</span><span class="n">create</span><span class="p">(...);</span>
</pre>
<p>Other ways are deprecated:</p>
<pre class="highlight literal-block">
<span></span><span class="c1">// bad ways</span>
<span class="n">Ptr</span><span class="o">&lt;</span><span class="n">SomeAlgo</span><span class="o">&gt;</span> <span class="n">algo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SomeAlgo</span><span class="p">(...);</span>
<span class="n">SomeAlgo</span> <span class="o">*</span> <span class="n">algo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SomeAlgo</span><span class="p">(...);</span>
<span class="n">SomeAlgo</span> <span class="nf">algo</span><span class="p">(...);</span>
<span class="n">Ptr</span><span class="o">&lt;</span><span class="n">SomeAlgo</span><span class="o">&gt;</span> <span class="n">algo</span> <span class="o">=</span> <span class="n">Algorithm</span><span class="o">::</span><span class="n">create</span><span class="o">&lt;</span><span class="n">SomeAlgo</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">);</span>
</pre>
</li>
<li><p class="first">Algorithm properties should be accessed via corresponding virtual methods, <em>getSomeProperty/setSomeProperty</em>, generic <em>get/set</em> methods have been removed:</p>
<pre class="highlight literal-block">
<span></span><span class="c1">// good way</span>
<span class="kt">double</span> <span class="n">clipLimit</span> <span class="o">=</span> <span class="n">clahe</span><span class="o">-&gt;</span><span class="n">getClipLimit</span><span class="p">();</span>
<span class="n">clahe</span><span class="o">-&gt;</span><span class="n">setClipLimit</span><span class="p">(</span><span class="n">clipLimit</span><span class="p">);</span>
<span class="c1">// bad way</span>
<span class="kt">double</span> <span class="n">clipLimit</span> <span class="o">=</span> <span class="n">clahe</span><span class="o">-&gt;</span><span class="n">getDouble</span><span class="p">(</span><span class="s">&quot;clipLimit&quot;</span><span class="p">);</span>
<span class="n">clahe</span><span class="o">-&gt;</span><span class="n">set</span><span class="p">(</span><span class="s">&quot;clipLimit&quot;</span><span class="p">,</span> <span class="n">clipLimit</span><span class="p">);</span>
<span class="n">clahe</span><span class="o">-&gt;</span><span class="n">setDouble</span><span class="p">(</span><span class="s">&quot;clipLimit&quot;</span><span class="p">,</span> <span class="n">clipLimit</span><span class="p">);</span>
</pre>
</li>
<li><p class="first">Remove <code class="docutils literal notranslate"><span class="pre">initModule_&lt;moduleName&gt;()</span></code> calls</p>
</li>
</ol>
</div>
<div class="section" id="machine-learning-module">
<span id="doxid-db-dfa-tutorial-transition-guide-1tutorial-transition-hints-ml"></span><h3>Machine learning module</h3>
<p>Since this module has been rewritten, it will take some effort to adapt your software to it. All algorithms are located in separate <em>ml</em> namespace along with their base class <em>StatModel</em>. Separate <em>SomeAlgoParams</em> classes have been replaced with a sets of corresponding <em>getProperty/setProperty</em> methods.</p>
<p>The following table illustrates correspondence between 2.4 and 3.0 machine learning classes.</p>
<table border="1" class="docutils">
<colgroup>
<col width="88%" />
<col width="12%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>2.4</td>
<td>3.0</td>
</tr>
</tbody>
</table>
<p>CvStatModel
CvNormalBayesClassifier
CvKNearest
CvSVM
CvDTree
CvBoost
CvGBTrees
CvRTrees
CvERTrees
EM
CvANN_MLP</p>
<p>CvMLData
=======================  ===</p>
<p>Although rewritten <em>ml</em> algorithms in 3.0 allow you to load old trained models from <em>xml/yml</em> file, deviations in prediction process are possible.</p>
<p>The following code snippets from the <code class="docutils literal notranslate"><span class="pre">points_classifier.cpp</span></code> example illustrate differences in model training process:</p>
<pre class="highlight literal-block">
<span></span><span class="k">using</span> <span class="k">namespace</span> <a class="reference internal" href="namespace_cv.html#doxid-d2-d75-namespacecv"><span class="std std-ref">cv</span></a><span></span><span class="p">;</span>
<span class="c1">// ======== version 2.4 ========</span>
<a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat"><span class="std std-ref">Mat</span></a><span></span> <span class="n">trainSamples</span><span class="p">,</span> <span class="n">trainClasses</span><span class="p">;</span>
<span class="n">prepare_train_data</span><span class="p">(</span> <span class="n">trainSamples</span><span class="p">,</span> <span class="n">trainClasses</span> <span class="p">);</span>
<span class="n">CvBoost</span>  <span class="n">boost</span><span class="p">;</span>
<a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat"><span class="std std-ref">Mat</span></a><span></span> <span class="n">var_types</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="n">trainSamples</span><span class="p">.</span><a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat-1aa3e5a47585c9ef6a0842556739155e3e"><span class="std std-ref">cols</span></a><span></span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <a class="reference internal" href="group_core_hal_interface.html#doxid-d1-d1b-group-core-hal-interface-1ga81df635441b21f532fdace401e04f588"><span class="std std-ref">CV_8UC1</span></a><span></span><span class="p">,</span> <span class="n">Scalar</span><span class="p">(</span><span class="n">CV_VAR_ORDERED</span><span class="p">)</span> <span class="p">);</span>
<span class="n">var_types</span><span class="p">.</span><span class="n">at</span><span class="o">&lt;</span><a class="reference internal" href="group_core_hal_interface.html#doxid-d1-d1b-group-core-hal-interface-1ga65f85814a8290f9797005d3b28e7e5fc"><span class="std std-ref">uchar</span></a><span></span><span class="o">&gt;</span><span class="p">(</span> <span class="n">trainSamples</span><span class="p">.</span><a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat-1aa3e5a47585c9ef6a0842556739155e3e"><span class="std std-ref">cols</span></a><span></span> <span class="p">)</span> <span class="o">=</span> <span class="n">CV_VAR_CATEGORICAL</span><span class="p">;</span>
<span class="n">CvBoostParams</span>  <span class="nf">params</span><span class="p">(</span> <span class="n">CvBoost</span><span class="o">::</span><span class="n">DISCRETE</span><span class="p">,</span> <span class="c1">// boost_type</span>
                       <span class="mi">100</span><span class="p">,</span> <span class="c1">// weak_count</span>
                       <span class="mf">0.95</span><span class="p">,</span> <span class="c1">// weight_trim_rate</span>
                       <span class="mi">2</span><span class="p">,</span> <span class="c1">// max_depth</span>
                       <span class="nb">false</span><span class="p">,</span> <span class="c1">//use_surrogates</span>
                       <span class="mi">0</span> <span class="c1">// priors</span>
                     <span class="p">);</span>
<span class="n">boost</span><span class="p">.</span><span class="n">train</span><span class="p">(</span> <span class="n">trainSamples</span><span class="p">,</span> <span class="n">CV_ROW_SAMPLE</span><span class="p">,</span> <span class="n">trainClasses</span><span class="p">,</span> <a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat"><span class="std std-ref">Mat</span></a><span></span><span class="p">(),</span> <a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat"><span class="std std-ref">Mat</span></a><span></span><span class="p">(),</span> <span class="n">var_types</span><span class="p">,</span> <a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat"><span class="std std-ref">Mat</span></a><span></span><span class="p">(),</span> <span class="n">params</span> <span class="p">);</span>

<span class="c1">// ======== version 3.0 ========</span>
<a class="reference internal" href="struct_cv_Ptr.html#doxid-d2-d56-structcv-1-1-ptr"><span class="std std-ref">Ptr&lt;Boost&gt;</span></a><span></span> <span class="n">boost</span> <span class="o">=</span> <span class="n">Boost</span><span class="o">::</span><span class="n">create</span><span class="p">();</span>
<span class="n">boost</span><span class="o">-&gt;</span><span class="n">setBoostType</span><span class="p">(</span><span class="n">Boost</span><span class="o">::</span><span class="n">DISCRETE</span><span class="p">);</span>
<span class="n">boost</span><span class="o">-&gt;</span><span class="n">setWeakCount</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="n">boost</span><span class="o">-&gt;</span><span class="n">setWeightTrimRate</span><span class="p">(</span><span class="mf">0.95</span><span class="p">);</span>
<span class="n">boost</span><span class="o">-&gt;</span><span class="n">setMaxDepth</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="n">boost</span><span class="o">-&gt;</span><span class="n">setUseSurrogates</span><span class="p">(</span><span class="nb">false</span><span class="p">);</span>
<span class="n">boost</span><span class="o">-&gt;</span><span class="n">setPriors</span><span class="p">(</span><a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat"><span class="std std-ref">Mat</span></a><span></span><span class="p">());</span>
<span class="n">boost</span><span class="o">-&gt;</span><span class="n">train</span><span class="p">(</span><span class="n">prepare_train_data</span><span class="p">());</span> <span class="c1">// &#39;prepare_train_data&#39; returns an instance of ml::TrainData class</span>
</pre>
</div>
<div class="section" id="features-detect">
<span id="doxid-db-dfa-tutorial-transition-guide-1tutorial-transition-hints-features"></span><h3>Features detect</h3>
<p>Some algorithms (FREAK, BRIEF, SIFT, SURF) has been moved to <em>opencv_contrib</em> repository, to <em>xfeatures2d</em> module, <em>xfeatures2d</em> namespace. Their interface has been also changed (inherit from <code class="docutils literal notranslate"><a class="reference internal" href="class_cv_Feature2D.html#doxid-d9-d9f-classcv-1-1-feature2-d"><span class="std std-ref"><span class="pre">cv::Feature2D</span></span></a></code> base class).</p>
<p>List of <em>xfeatures2d</em> module classes:</p>
<ul class="simple">
<li>cv::xfeatures2d::BriefDescriptorExtractor - Class for computing BRIEF descriptors (2.4 location: <em>features2d</em>)</li>
<li>cv::xfeatures2d::FREAK - Class implementing the FREAK (Fast Retina Keypoint) keypoint descriptor (2.4 location: <em>features2d</em>)</li>
<li>cv::xfeatures2d::StarDetector - The class implements the CenSurE detector (2.4 location: <em>features2d</em>)</li>
<li>cv::xfeatures2d::SIFT - Class for extracting keypoints and computing descriptors using the Scale Invariant Feature Transform (SIFT) algorithm (2.4 location: <em>nonfree</em>)</li>
<li>cv::xfeatures2d::SURF - Class for extracting Speeded Up Robust Features from an image (2.4 location: <em>nonfree</em>)</li>
</ul>
<p>Following steps are needed:</p>
<ol class="arabic simple">
<li>Add <em>opencv_contrib</em> to compilation process</li>
<li>Include <code class="docutils literal notranslate"><span class="pre">opencv2/xfeatures2d.h</span></code> header</li>
<li>Use namespace <code class="docutils literal notranslate"><span class="pre">xfeatures2d</span></code></li>
<li>Replace <code class="docutils literal notranslate"><span class="pre">operator()</span></code> calls with <code class="docutils literal notranslate"><span class="pre">detect</span></code>, <code class="docutils literal notranslate"><span class="pre">compute</span></code> or <code class="docutils literal notranslate"><span class="pre">detectAndCompute</span></code> if needed</li>
</ol>
<p>Some classes now use general methods <code class="docutils literal notranslate"><span class="pre">detect</span></code>, <code class="docutils literal notranslate"><span class="pre">compute</span></code> or <code class="docutils literal notranslate"><span class="pre">detectAndCompute</span></code> provided by <code class="docutils literal notranslate"><span class="pre">Feature2D</span></code> base class instead of custom <code class="docutils literal notranslate"><span class="pre">operator()</span></code></p>
<p>Following code snippets illustrate the difference (from <code class="docutils literal notranslate"><span class="pre">video_homography.cpp</span></code> example):</p>
<pre class="highlight literal-block">
<span></span><span class="k">using</span> <span class="k">namespace</span> <a class="reference internal" href="namespace_cv.html#doxid-d2-d75-namespacecv"><span class="std std-ref">cv</span></a><span></span><span class="p">;</span>
<span class="c1">// ====== 2.4 =======</span>
<span class="cp">#include</span> <span class="cpf">&quot;opencv2/features2d/features2d.hpp&quot;</span><span class="cp"></span>
<span class="n">BriefDescriptorExtractor</span> <span class="nf">brief</span><span class="p">(</span><span class="mi">32</span><span class="p">);</span>
<span class="n">GridAdaptedFeatureDetector</span> <span class="n">detector</span><span class="p">(</span><span class="k">new</span> <a class="reference internal" href="class_cv_FastFeatureDetector.html#doxid-d3-db7-classcv-1-1-fast-feature-detector"><span class="std std-ref">FastFeatureDetector</span></a><span></span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="nb">true</span><span class="p">),</span> <span class="n">DESIRED_FTRS</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="n">detector</span><span class="p">.</span><span class="n">detect</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="n">query_kpts</span><span class="p">);</span> <span class="c1">//Find interest points</span>
<span class="n">brief</span><span class="p">.</span><span class="n">compute</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="n">query_kpts</span><span class="p">,</span> <span class="n">query_desc</span><span class="p">);</span> <span class="c1">//Compute brief descriptors at each keypoint location</span>
<span class="c1">// ====== 3.0 =======</span>
<span class="cp">#include</span> <span class="cpf">&quot;opencv2/features2d.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;opencv2/xfeatures2d.hpp&quot;</span><span class="cp"></span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">cv</span><span class="o">::</span><span class="n">xfeatures2d</span><span class="p">;</span>
<a class="reference internal" href="struct_cv_Ptr.html#doxid-d2-d56-structcv-1-1-ptr"><span class="std std-ref">Ptr&lt;BriefDescriptorExtractor&gt;</span></a><span></span> <span class="n">brief</span> <span class="o">=</span> <span class="n">BriefDescriptorExtractor</span><span class="o">::</span><span class="n">create</span><span class="p">(</span><span class="mi">32</span><span class="p">);</span>
<a class="reference internal" href="struct_cv_Ptr.html#doxid-d2-d56-structcv-1-1-ptr"><span class="std std-ref">Ptr&lt;FastFeatureDetector&gt;</span></a><span></span> <span class="n">detector</span> <span class="o">=</span> <a class="reference internal" href="class_cv_FastFeatureDetector.html#doxid-d3-db7-classcv-1-1-fast-feature-detector-1adf10eab3b23110c022183d098ae47023"><span class="std std-ref">FastFeatureDetector::create</span></a><span></span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="n">detector</span><span class="o">-&gt;</span><a class="reference internal" href="class_cv_Feature2D.html#doxid-d9-d9f-classcv-1-1-feature2-d-1aa4e9a7082ec61ebc108806704fbd7887"><span class="std std-ref">detect</span></a><span></span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="n">query_kpts</span><span class="p">);</span> <span class="c1">//Find interest points</span>
<span class="n">brief</span><span class="o">-&gt;</span><span class="n">compute</span><span class="p">(</span><span class="n">gray</span><span class="p">,</span> <span class="n">query_kpts</span><span class="p">,</span> <span class="n">query_desc</span><span class="p">);</span> <span class="c1">//Compute brief descriptors at each keypoint location</span>
</pre>
</div>
<div class="section" id="opencl">
<span id="doxid-db-dfa-tutorial-transition-guide-1tutorial-transition-hints-opencl"></span><h3>OpenCL</h3>
<p>All specialized <code class="docutils literal notranslate"><span class="pre">ocl</span></code> implemetations has been hidden behind general C++ algorithm interface. Now the function execution path can be selected dynamically at runtime: CPU or OpenCL; this mechanism is also called “Transparent API”.</p>
<p>New class <a class="reference internal" href="class_cv_UMat.html#doxid-d8-d82-classcv-1-1-u-mat"><span class="std std-ref">cv::UMat</span></a> is intended to hide data exchange with OpenCL device in a convinient way.</p>
<p>Following example illustrate API modifications (from <a class="reference external" href="http://opencv.org/platforms/opencl.html">OpenCV site</a>):</p>
<ul>
<li><p class="first">OpenCL-aware code OpenCV-2.x</p>
<pre class="highlight literal-block">
<span></span><span class="c1">// initialization</span>
<span class="n">VideoCapture</span> <span class="nf">vcap</span><span class="p">(...);</span>
<span class="n">ocl</span><span class="o">::</span><span class="n">OclCascadeClassifier</span> <span class="n">fd</span><span class="p">(</span><span class="s">&quot;haar_ff.xml&quot;</span><span class="p">);</span>
<span class="n">ocl</span><span class="o">::</span><span class="n">oclMat</span> <span class="n">frame</span><span class="p">,</span> <span class="n">frameGray</span><span class="p">;</span>
<span class="n">Mat</span> <span class="n">frameCpu</span><span class="p">;</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="n">Rect</span><span class="o">&gt;</span> <span class="n">faces</span><span class="p">;</span>
<span class="k">for</span><span class="p">(;;){</span>
    <span class="c1">// processing loop</span>
    <span class="n">vcap</span> <span class="o">&gt;&gt;</span> <span class="n">frameCpu</span><span class="p">;</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">frameCpu</span><span class="p">;</span>
    <a class="reference internal" href="group_imgproc_misc.html#doxid-d7-d1b-group-imgproc-misc-1ga397ae87e1288a81d2363b61574eb8cab"><span class="std std-ref">ocl::cvtColor</span></a><span></span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">frameGray</span><span class="p">,</span> <span class="n">BGR2GRAY</span><span class="p">);</span>
    <a class="reference internal" href="group_imgproc_hist.html#doxid-d6-dc7-group-imgproc-hist-1ga7e54091f0c937d49bf84152a16f76d6e"><span class="std std-ref">ocl::equalizeHist</span></a><span></span><span class="p">(</span><span class="n">frameGray</span><span class="p">,</span> <span class="n">frameGray</span><span class="p">);</span>
    <span class="n">fd</span><span class="p">.</span><span class="n">detectMultiScale</span><span class="p">(</span><span class="n">frameGray</span><span class="p">,</span> <span class="n">faces</span><span class="p">,</span> <span class="p">...);</span>
    <span class="c1">// draw rectangles …</span>
    <span class="c1">// show image …</span>
<span class="p">}</span>
</pre>
</li>
<li><p class="first">OpenCL-aware code OpenCV-3.x</p>
<pre class="highlight literal-block">
<span></span><span class="c1">// initialization</span>
<span class="n">VideoCapture</span> <span class="nf">vcap</span><span class="p">(...);</span>
<span class="n">CascadeClassifier</span> <span class="nf">fd</span><span class="p">(</span><span class="s">&quot;haar_ff.xml&quot;</span><span class="p">);</span>
<span class="n">UMat</span> <span class="n">frame</span><span class="p">,</span> <span class="n">frameGray</span><span class="p">;</span> <span class="c1">// the only change from plain CPU version</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="n">Rect</span><span class="o">&gt;</span> <span class="n">faces</span><span class="p">;</span>
<span class="k">for</span><span class="p">(;;){</span>
    <span class="c1">// processing loop</span>
    <span class="n">vcap</span> <span class="o">&gt;&gt;</span> <span class="n">frame</span><span class="p">;</span>
    <a class="reference internal" href="group_imgproc_misc.html#doxid-d7-d1b-group-imgproc-misc-1ga397ae87e1288a81d2363b61574eb8cab"><span class="std std-ref">cvtColor</span></a><span></span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">frameGray</span><span class="p">,</span> <span class="n">BGR2GRAY</span><span class="p">);</span>
    <a class="reference internal" href="group_imgproc_hist.html#doxid-d6-dc7-group-imgproc-hist-1ga7e54091f0c937d49bf84152a16f76d6e"><span class="std std-ref">equalizeHist</span></a><span></span><span class="p">(</span><span class="n">frameGray</span><span class="p">,</span> <span class="n">frameGray</span><span class="p">);</span>
    <span class="n">fd</span><span class="p">.</span><span class="n">detectMultiScale</span><span class="p">(</span><span class="n">frameGray</span><span class="p">,</span> <span class="n">faces</span><span class="p">,</span> <span class="p">...);</span>
    <span class="c1">// draw rectangles …</span>
    <span class="c1">// show image …</span>
<span class="p">}</span>
</pre>
</li>
</ul>
</div>
<div class="section" id="cuda">
<span id="doxid-db-dfa-tutorial-transition-guide-1tutorial-transition-hints-cuda"></span><h3>CUDA</h3>
<p><em>cuda</em> module has been split into several smaller pieces:</p>
<ul class="simple">
<li><em>cuda</em> - <a class="reference internal" href="group_cuda.html#doxid-d1-d1e-group-cuda"><span class="std std-ref">CUDA-accelerated Computer Vision</span></a></li>
<li><em>cudaarithm</em> - <a class="reference internal" href="group_cudaarithm.html#doxid-d5-d8e-group-cudaarithm"><span class="std std-ref">Operations on Matrices</span></a></li>
<li><em>cudabgsegm</em> - <a class="reference internal" href="group_cudabgsegm.html#doxid-d6-d17-group-cudabgsegm"><span class="std std-ref">Background Segmentation</span></a></li>
<li><em>cudacodec</em> - <a class="reference internal" href="group_cudacodec.html#doxid-d0-d61-group-cudacodec"><span class="std std-ref">Video Encoding/Decoding</span></a></li>
<li><em>cudafeatures2d</em> - <a class="reference internal" href="group_cudafeatures2d.html#doxid-d6-d1d-group-cudafeatures2d"><span class="std std-ref">Feature Detection and Description</span></a></li>
<li><em>cudafilters</em> - <a class="reference internal" href="group_cudafilters.html#doxid-dc-d66-group-cudafilters"><span class="std std-ref">Image Filtering</span></a></li>
<li><em>cudaimgproc</em> - <a class="reference internal" href="group_cudaimgproc.html#doxid-d0-d05-group-cudaimgproc"><span class="std std-ref">Image Processing</span></a></li>
<li><em>cudalegacy</em> - <a class="reference internal" href="group_cudalegacy.html#doxid-d5-dc3-group-cudalegacy"><span class="std std-ref">Legacy support</span></a></li>
<li><em>cudaoptflow</em> - <a class="reference internal" href="group_cudaoptflow.html#doxid-d7-d3f-group-cudaoptflow"><span class="std std-ref">Optical Flow</span></a></li>
<li><em>cudastereo</em> - <a class="reference internal" href="group_cudastereo.html#doxid-dd-d47-group-cudastereo"><span class="std std-ref">Stereo Correspondence</span></a></li>
<li><em>cudawarping</em> - <a class="reference internal" href="group_cudawarping.html#doxid-db-d29-group-cudawarping"><span class="std std-ref">Image Warping</span></a></li>
<li><em>cudev</em> - <a class="reference internal" href="group_cudev.html#doxid-df-dfc-group-cudev"><span class="std std-ref">Device layer</span></a></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">gpu</span></code> namespace has been removed, use <a class="reference internal" href="namespace_cv_cuda.html#doxid-d1-d1a-namespacecv-1-1cuda"><span class="std std-ref">cv::cuda</span></a> namespace instead. Many classes has also been renamed, for example:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">gpu::FAST_GPU</span></code> -&gt; <a class="reference internal" href="class_cv_cuda_FastFeatureDetector.html#doxid-d3-da4-classcv-1-1cuda-1-1-fast-feature-detector"><span class="std std-ref">cv::cuda::FastFeatureDetector</span></a></li>
<li><code class="docutils literal notranslate"><span class="pre">gpu::createBoxFilter_GPU</span></code> -&gt; <a class="reference internal" href="group_cudafilters.html#doxid-dc-d66-group-cudafilters-1ga6ae218ea6d87e852021e448f9568c8bb"><span class="std std-ref">cv::cuda::createBoxFilter</span></a></li>
</ul>
</div>
<div class="section" id="documentation-format">
<span id="doxid-db-dfa-tutorial-transition-guide-1tutorial-transition-docs"></span><h3>Documentation format</h3>
<p>Documentation has been converted to Doxygen format. You can find updated documentation writing guide in <em>Tutorials</em> section of <em>OpenCV</em> reference documentation (<a class="reference internal" href="page_tutorial_documentation.html#doxid-d4-db1-tutorial-documentation"><span class="std std-ref">Writing documentation for OpenCV</span></a>).</p>
</div>
<div class="section" id="support-both-versions">
<span id="doxid-db-dfa-tutorial-transition-guide-1tutorial-transition-both"></span><h3>Support both versions</h3>
<p>In some cases it is possible to support both versions of OpenCV.</p>
<p class="rubric">Source code</p>
<p>To check library major version in your application source code, the following method should be used:</p>
<pre class="highlight literal-block">
<span></span><span class="cp">#include</span> <span class="cpf">&quot;opencv2/core/version.hpp&quot;</span><span class="cp"></span>
<span class="cp">#if CV_MAJOR_VERSION == 2</span>
<span class="c1">// do opencv 2 code</span>
<span class="cp">#elif CV_MAJOR_VERSION == 3</span>
<span class="c1">// do opencv 3 code</span>
<span class="cp">#endif</span>
</pre>
<p>Do not use <strong>CV_VERSION_MAJOR</strong>, it has different meaning for 2.4 and 3.x branches!</p>
<p class="rubric">Build system</p>
<p>It is possible to link different modules or enable/disable some of the features in your application by checking library version in the build system. Standard cmake or pkg-config variables can be used for this:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">OpenCV_VERSION</span></code> for cmake will contain full version: “2.4.11” or “3.0.0” for example</li>
<li><code class="docutils literal notranslate"><span class="pre">OpenCV_VERSION_MAJOR</span></code> for cmake will contain only major version number: 2 or 3</li>
<li>pkg-config file has standard field <code class="docutils literal notranslate"><span class="pre">Version</span></code></li>
</ul>
<p>Example:</p>
<pre class="highlight literal-block">
<span></span><span class="k">if</span><span class="p">(</span><span class="n">OpenCV_VERSION</span> <span class="n">VERSION_LESS</span> <span class="s">&quot;3.0&quot;</span><span class="p">)</span>
<span class="cp"># use 2.4 modules</span>
<span class="k">else</span><span class="p">()</span>
<span class="cp"># use 3.x modules</span>
<span class="n">endif</span><span class="p">()</span>
</pre>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="page_tutorial_android_ocl_intro.html" class="btn btn-neutral float-right" title="Use OpenCL in Android camera preview based CV application" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="page_tutorial_O4A_SDK.html" class="btn btn-neutral float-left" title="OpenCV4Android SDK" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 1999-2017, OpenCV Maintainers

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>