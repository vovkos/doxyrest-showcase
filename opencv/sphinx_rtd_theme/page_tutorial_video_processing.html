

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>OpenCV iOS - Video Processing &mdash; OpenCV Documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/target-highlight.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/doxyrest-pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/doxyrest-sphinx_rtd_theme.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="OpenCV iOS Hello" href="page_tutorial_hello.html" />
    <link rel="prev" title="OpenCV iOS - Image Processing" href="page_tutorial_image_manipulation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> OpenCV Documentation
          

          
          </a>

          
            
            
              <div class="version">
                3.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="group_features2d.html">2D Features Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_viz.html">3D Visualizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_calib3d.html">Camera Calibration and 3D Reconstruction</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_flann.html">Clustering and Search in Multi-Dimensional Spaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_photo.html">Computational Photography</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_core.html">Core functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_highgui.html">High-level GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_imgcodecs.html">Image file reading and writing</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_imgproc.html">Image processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_stitching.html">Images stitching</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_ml.html">Machine Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_objdetect.html">Object Detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_shape.html">Shape Distance and Matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_superres.html">Super Resolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_video.html">Video Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_videoio.html">Video I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_videostab.html">Video Stabilization</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="page_citelist.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_cuda_intro.html">CUDA Module Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_imgproc_color_conversions.html">Color conversions</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_deprecated.html">Deprecated List</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_ml_intro.html">Machine Learning Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="page_tutorial_root.html">OpenCV Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_features2d.html">2D Features framework (feature2d module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_calib3d.html">Camera calibration and 3D reconstruction (calib3d module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_photo.html">Computational photography (photo module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_gpu.html">GPU-Accelerated Computer Vision (cuda module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_highgui.html">High Level GUI and Media (highgui module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_imgcodecs.html">Image Input and Output (imgcodecs module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_imgproc.html">Image Processing (imgproc module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_stitching.html">Images stitching (stitching module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_introduction.html">Introduction to OpenCV</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_ml.html">Machine Learning (ml module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_objdetect.html">Object Detection (objdetect module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_viz.html">OpenCV Viz</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="page_tutorial_table_of_content_ios.html">OpenCV iOS</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_image_manipulation.html">OpenCV iOS - Image Processing</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">OpenCV iOS - Video Processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_hello.html">OpenCV iOS Hello</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_core.html">The Core Functionality (core module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_videoio.html">Video Input and Output (videoio module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_video.html">Video analysis (video module)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="page_index.html">OpenCV modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_tutorial_py_root.html">OpenCV-Python Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_todo.html">Todo List</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_videoio_overview.html">Video I/O with OpenCV Overview</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="example_contours2.cpp.html">contours2.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_convexhull.cpp.html">convexhull.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_cout_mat.cpp.html">cout_mat.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_demhist.cpp.html">demhist.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_distrans.cpp.html">distrans.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_edge.cpp.html">edge.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_ffilldemo.cpp.html">ffilldemo.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_filestorage.cpp.html">filestorage.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_fitellipse.cpp.html">fitellipse.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_grabcut.cpp.html">grabcut.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_houghcircles.cpp.html">houghcircles.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_houghlines.cpp.html">houghlines.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_kmeans.cpp.html">kmeans.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_laplace.cpp.html">laplace.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_lsd_lines.cpp.html">lsd_lines.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_minarea.cpp.html">minarea.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_morphology2.cpp.html">morphology2.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_pca.cpp.html">pca.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_polar_transforms.cpp.html">polar_transforms.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_segment_objects.cpp.html">segment_objects.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_watershed.cpp.html">watershed.cpp</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="global.html">Global Namespace</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OpenCV Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="page_tutorial_root.html">OpenCV Tutorials</a> &raquo;</li>
        
          <li><a href="page_tutorial_table_of_content_ios.html">OpenCV iOS</a> &raquo;</li>
        
      <li>OpenCV iOS - Video Processing</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="opencv-ios-video-processing">
<span id="doxid-db-dc8-tutorial-video-processing"></span><span id="index-0"></span><h1>OpenCV iOS - Video Processing</h1>
<p>This tutorial explains how to process video frames using the iPhone’s camera and OpenCV.</p>
<p class="rubric">Prerequisites:</p>
<ul class="simple">
<li>Xcode 4.3 or higher</li>
<li>Basic knowledge of iOS programming (Objective-C, Interface Builder)</li>
</ul>
<p class="rubric">Including OpenCV library in your iOS project</p>
<p>The OpenCV library comes as a so-called framework, which you can directly drag-and-drop into your XCode project. Download the latest binary from <a class="reference external" href="http://sourceforge.net/projects/opencvlibrary/files/opencv-ios/">http://sourceforge.net/projects/opencvlibrary/files/opencv-ios/</a>. Alternatively follow this guide <a class="reference internal" href="page_tutorial_ios_install.html#doxid-d5-da3-tutorial-ios-install"><span class="std std-ref">Installation in iOS</span></a> to compile the framework manually. Once you have the framework, just drag-and-drop into XCode:</p>
<img alt="_images/xcode_hello_ios_framework_drag_and_drop.png" src="_images/xcode_hello_ios_framework_drag_and_drop.png" />
<p>Also you have to locate the prefix header that is used for all header files in the project. The file is typically located at “ProjectName/Supporting Files/ProjectName-Prefix.pch”. There, you have add an include statement to import the opencv library. However, make sure you include opencv before you include UIKit and Foundation, because else you will get some weird compile errors that some macros like min and max are defined multiple times. For example the prefix header could look like the following:</p>
<pre class="highlight literal-block">
<span></span><span class="c1">//</span>
<span class="c1">// Prefix header for all source files of the &#39;VideoFilters&#39; target in the &#39;VideoFilters&#39; project</span>
<span class="c1">//</span>

<span class="cp">#import &lt;Availability.h&gt;</span>

<span class="cp">#ifndef __IPHONE_4_0</span>
<span class="cp">#warning &quot;This project uses features only available in iOS SDK 4.0 and later.&quot;</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef __cplusplus</span>
<span class="cp">#import &lt;opencv2/opencv.hpp&gt;</span>
<span class="cp">#endif</span>

<span class="cp">#ifdef __OBJC__</span>
    <span class="cp">#import &lt;UIKit/UIKit.h&gt;</span>
    <span class="cp">#import &lt;Foundation/Foundation.h&gt;</span>
<span class="cp">#endif</span>
</pre>
<p class="rubric">Example video frame processing project</p>
<p class="rubric">User Interface</p>
<p>First, we create a simple iOS project, for example Single View Application. Then, we create and add an UIImageView and UIButton to start the camera and display the video frames. The storyboard could look like that:</p>
<img alt="_images/xcode_hello_ios_viewcontroller_layout.png" src="_images/xcode_hello_ios_viewcontroller_layout.png" />
<p>Make sure to add and connect the IBOutlets and IBActions to the corresponding ViewController:</p>
<pre class="highlight literal-block">
<span></span><span class="err">@</span><span class="n">interface</span> <span class="nl">ViewController</span> <span class="p">:</span> <span class="n">UIViewController</span>
<span class="p">{</span>
    <span class="n">IBOutlet</span> <span class="n">UIImageView</span><span class="o">*</span> <span class="n">imageView</span><span class="p">;</span>
    <span class="n">IBOutlet</span> <span class="n">UIButton</span><span class="o">*</span> <span class="n">button</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">-</span> <span class="p">(</span><span class="n">IBAction</span><span class="p">)</span><span class="nl">actionStart</span><span class="p">:(</span><span class="n">id</span><span class="p">)</span><span class="n">sender</span><span class="p">;</span>

<span class="err">@</span><span class="n">end</span>
</pre>
<p class="rubric">Adding the Camera</p>
<p>We add a camera controller to the view controller and initialize it when the view has loaded:</p>
<pre class="highlight literal-block">
<span></span><span class="cp">#import &lt;opencv2/videoio/cap_ios.h&gt;</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">cv</span><span class="p">;</span>


<span class="err">@</span><span class="n">interface</span> <span class="nl">ViewController</span> <span class="p">:</span> <span class="n">UIViewController</span>
<span class="p">{</span>
    <span class="p">...</span>
    <span class="n">CvVideoCamera</span><span class="o">*</span> <span class="n">videoCamera</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">...</span>
<span class="err">@</span><span class="n">property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">retain</span><span class="p">)</span> <span class="n">CvVideoCamera</span><span class="o">*</span> <span class="n">videoCamera</span><span class="p">;</span>

<span class="err">@</span><span class="n">end</span>
</pre>
<pre class="highlight literal-block">
<span></span><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">viewDidLoad</span>
<span class="p">{</span>
    <span class="p">[</span><span class="n">super</span> <span class="n">viewDidLoad</span><span class="p">];</span>
    <span class="c1">// Do any additional setup after loading the view, typically from a nib.</span>

    <span class="n">self</span><span class="p">.</span><span class="n">videoCamera</span> <span class="o">=</span> <span class="p">[[</span><span class="n">CvVideoCamera</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithParentView</span><span class="p">:</span><span class="n">imageView</span><span class="p">];</span>
    <span class="n">self</span><span class="p">.</span><span class="n">videoCamera</span><span class="p">.</span><span class="n">defaultAVCaptureDevicePosition</span> <span class="o">=</span> <span class="n">AVCaptureDevicePositionFront</span><span class="p">;</span>
    <span class="n">self</span><span class="p">.</span><span class="n">videoCamera</span><span class="p">.</span><span class="n">defaultAVCaptureSessionPreset</span> <span class="o">=</span> <span class="n">AVCaptureSessionPreset352x288</span><span class="p">;</span>
    <span class="n">self</span><span class="p">.</span><span class="n">videoCamera</span><span class="p">.</span><span class="n">defaultAVCaptureVideoOrientation</span> <span class="o">=</span> <span class="n">AVCaptureVideoOrientationPortrait</span><span class="p">;</span>
    <span class="n">self</span><span class="p">.</span><span class="n">videoCamera</span><span class="p">.</span><span class="n">defaultFPS</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>
    <span class="n">self</span><span class="p">.</span><span class="n">videoCamera</span><span class="p">.</span><span class="n">grayscale</span> <span class="o">=</span> <span class="n">NO</span><span class="p">;</span>
<span class="p">}</span>
</pre>
<p>In this case, we initialize the camera and provide the imageView as a target for rendering each frame. <a class="reference internal" href="class_CvVideoCamera.html#doxid-d5-d1f-interface-cv-video-camera"><span class="std std-ref">CvVideoCamera</span></a> is basically a wrapper around AVFoundation, so we provie as properties some of the AVFoundation camera options. For example we want to use the front camera, set the video size to 352x288 and a video orientation (the video camera normally outputs in landscape mode, which results in transposed data when you design a portrait application).</p>
<p>The property defaultFPS sets the FPS of the camera. If the processing is less fast than the desired FPS, frames are automatically dropped.</p>
<p>The property grayscale=YES results in a different colorspace, namely “YUV (YpCbCr 4:2:0)”, while grayscale=NO will output 32 bit BGRA.</p>
<p>Additionally, we have to manually add framework dependencies of the opencv framework. Finally, you should have at least the following frameworks in your project:</p>
<ul>
<li><p class="first">opencv2</p>
</li>
<li><p class="first">Accelerate</p>
</li>
<li><p class="first">AssetsLibrary</p>
</li>
<li><p class="first">AVFoundation</p>
</li>
<li><p class="first">CoreGraphics</p>
</li>
<li><p class="first">CoreImage</p>
</li>
<li><p class="first">CoreMedia</p>
</li>
<li><p class="first">CoreVideo</p>
</li>
<li><p class="first">QuartzCore</p>
</li>
<li><p class="first">UIKit</p>
</li>
<li><p class="first">Foundation</p>
<img alt="_images/xcode_hello_ios_frameworks_add_dependencies.png" src="_images/xcode_hello_ios_frameworks_add_dependencies.png" />
</li>
</ul>
<p class="rubric">Processing frames</p>
<p>We follow the delegation pattern, which is very common in iOS, to provide access to each camera frame. Basically, the View Controller has to implement the CvVideoCameraDelegate protocol and has to be set as delegate to the video camera:</p>
<pre class="highlight literal-block">
<span></span><span class="err">@</span><span class="n">interface</span> <span class="nl">ViewController</span> <span class="p">:</span> <span class="n">UIViewController</span><span class="o">&lt;</span><span class="n">CvVideoCameraDelegate</span><span class="o">&gt;</span>
</pre>
<pre class="highlight literal-block">
<span></span><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">viewDidLoad</span>
<span class="p">{</span>
    <span class="p">...</span>
    <span class="n">self</span><span class="p">.</span><span class="n">videoCamera</span> <span class="o">=</span> <span class="p">[[</span><span class="n">CvVideoCamera</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithParentView</span><span class="p">:</span><span class="n">imageView</span><span class="p">];</span>
    <span class="n">self</span><span class="p">.</span><span class="n">videoCamera</span><span class="p">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="n">self</span><span class="p">;</span>
    <span class="p">...</span>
<span class="p">}</span>
</pre>
<pre class="highlight literal-block">
<span></span><span class="cp">#pragma mark - Protocol CvVideoCameraDelegate</span>

<span class="cp">#ifdef __cplusplus</span>
<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">processImage</span><span class="p">:(</span><span class="n">Mat</span><span class="o">&amp;</span><span class="p">)</span><span class="n">image</span><span class="p">;</span>
<span class="p">{</span>
    <span class="c1">// Do some OpenCV stuff with the image</span>
<span class="p">}</span>
<span class="cp">#endif</span>
</pre>
<p>Note that we are using C++ here (<a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat"><span class="std std-ref">cv::Mat</span></a>). Important: You have to rename the view controller’s extension .m into .mm, so that the compiler compiles it under the assumption of Objective-C++ (Objective-C and C++ mixed). Then, __cplusplus is defined when the compiler is processing the file for C++ code. Therefore, we put our code within a block where __cplusplus is defined.</p>
<p class="rubric">Basic video processing</p>
<p>From here you can start processing video frames. For example the following snippet color-inverts the image:</p>
<pre class="highlight literal-block">
<span></span><span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">processImage</span><span class="p">:(</span><span class="n">Mat</span><span class="o">&amp;</span><span class="p">)</span><span class="n">image</span><span class="p">;</span>
<span class="p">{</span>
    <span class="c1">// Do some OpenCV stuff with the image</span>
    <span class="n">Mat</span> <span class="n">image_copy</span><span class="p">;</span>
    <span class="n">cvtColor</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">image_copy</span><span class="p">,</span> <span class="n">COLOR_BGR2GRAY</span><span class="p">);</span>

    <span class="c1">// invert image</span>
    <span class="n">bitwise_not</span><span class="p">(</span><span class="n">image_copy</span><span class="p">,</span> <span class="n">image_copy</span><span class="p">);</span>

    <span class="c1">//Convert BGR to BGRA (three channel to four channel)</span>
    <span class="n">Mat</span> <span class="n">bgr</span><span class="p">;</span>
    <span class="n">cvtColor</span><span class="p">(</span><span class="n">image_copy</span><span class="p">,</span> <span class="n">bgr</span><span class="p">,</span> <span class="n">COLOR_GRAY2BGR</span><span class="p">);</span>

    <span class="n">cvtColor</span><span class="p">(</span><span class="n">bgr</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">COLOR_BGR2BGRA</span><span class="p">);</span>
<span class="p">}</span>
</pre>
<p class="rubric">Start!</p>
<p>Finally, we have to tell the camera to actually start/stop working. The following code will start the camera when you press the button, assuming you connected the UI properly:</p>
<pre class="highlight literal-block">
<span></span><span class="cp">#pragma mark - UI Actions</span>

<span class="o">-</span> <span class="p">(</span><span class="n">IBAction</span><span class="p">)</span><span class="nl">actionStart</span><span class="p">:(</span><span class="n">id</span><span class="p">)</span><span class="n">sender</span><span class="p">;</span>
<span class="p">{</span>
    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">videoCamera</span> <span class="n">start</span><span class="p">];</span>
<span class="p">}</span>
</pre>
<p class="rubric">Hints</p>
<p>Try to avoid costly matrix copy operations as much as you can, especially if you are aiming for real-time. As the image data is passed as reference, work in-place, if possible.</p>
<p>When you are working on grayscale data, turn set grayscale = YES as the YUV colorspace gives you directly access the luminance plane.</p>
<p>The Accelerate framework provides some CPU-accelerated DSP filters, which come handy in your case.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="page_tutorial_hello.html" class="btn btn-neutral float-right" title="OpenCV iOS Hello" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="page_tutorial_image_manipulation.html" class="btn btn-neutral float-left" title="OpenCV iOS - Image Processing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 1999-2017, OpenCV Maintainers

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>