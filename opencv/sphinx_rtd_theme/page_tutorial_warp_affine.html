

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Affine Transformations &mdash; OpenCV Documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/target-highlight.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/doxyrest-pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/doxyrest-sphinx_rtd_theme.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Back Projection" href="page_tutorial_back_projection.html" />
    <link rel="prev" title="Adding borders to your images" href="page_tutorial_copyMakeBorder.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> OpenCV Documentation
          

          
          </a>

          
            
            
              <div class="version">
                3.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="group_features2d.html">2D Features Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_viz.html">3D Visualizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_calib3d.html">Camera Calibration and 3D Reconstruction</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_flann.html">Clustering and Search in Multi-Dimensional Spaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_photo.html">Computational Photography</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_core.html">Core functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_highgui.html">High-level GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_imgcodecs.html">Image file reading and writing</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_imgproc.html">Image processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_stitching.html">Images stitching</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_ml.html">Machine Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_objdetect.html">Object Detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_shape.html">Shape Distance and Matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_superres.html">Super Resolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_video.html">Video Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_videoio.html">Video I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="group_videostab.html">Video Stabilization</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="page_citelist.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_cuda_intro.html">CUDA Module Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_imgproc_color_conversions.html">Color conversions</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_deprecated.html">Deprecated List</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_ml_intro.html">Machine Learning Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="page_tutorial_root.html">OpenCV Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_features2d.html">2D Features framework (feature2d module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_calib3d.html">Camera calibration and 3D reconstruction (calib3d module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_photo.html">Computational photography (photo module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_gpu.html">GPU-Accelerated Computer Vision (cuda module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_highgui.html">High Level GUI and Media (highgui module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_imgcodecs.html">Image Input and Output (imgcodecs module)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="page_tutorial_table_of_content_imgproc.html">Image Processing (imgproc module)</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_copyMakeBorder.html">Adding borders to your images</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Affine Transformations</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_back_projection.html">Back Projection</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_threshold.html">Basic Thresholding Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_canny_detector.html">Canny Edge Detector</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_hull.html">Convex Hull</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_bounding_rects_circles.html">Creating Bounding boxes and circles for contours</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_bounding_rotated_ellipses.html">Creating Bounding rotated boxes and ellipses for contours</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_erosion_dilatation.html">Eroding and Dilating</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_moprh_lines_detection.html">Extract horizontal and vertical lines by using morphological operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_find_contours.html">Finding contours in your image</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_histogram_calculation.html">Histogram Calculation</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_histogram_comparison.html">Histogram Comparison</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_histogram_equalization.html">Histogram Equalization</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_hitOrMiss.html">Hit-or-Miss</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_hough_circle.html">Hough Circle Transform</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_hough_lines.html">Hough Line Transform</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_moments.html">Image Moments</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_pyramids.html">Image Pyramids</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_distance_transform.html">Image Segmentation with Distance Transform and Watershed Algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_laplace_operator.html">Laplace Operator</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_filter_2d.html">Making your own linear filters!</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_opening_closing_hats.html">More Morphology Transformations</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_point_polygon_test.html">Point Polygon Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_remap.html">Remapping</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_gausian_median_blur_bilateral_filter.html">Smoothing Images</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_sobel_derivatives.html">Sobel Derivatives</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_template_matching.html">Template Matching</a></li>
<li class="toctree-l3"><a class="reference internal" href="page_tutorial_threshold_inRange.html">Thresholding Operations using inRange</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_stitching.html">Images stitching (stitching module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_introduction.html">Introduction to OpenCV</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_ml.html">Machine Learning (ml module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_objdetect.html">Object Detection (objdetect module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_viz.html">OpenCV Viz</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_ios.html">OpenCV iOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_core.html">The Core Functionality (core module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_videoio.html">Video Input and Output (videoio module)</a></li>
<li class="toctree-l2"><a class="reference internal" href="page_tutorial_table_of_content_video.html">Video analysis (video module)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="page_index.html">OpenCV modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_tutorial_py_root.html">OpenCV-Python Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_todo.html">Todo List</a></li>
<li class="toctree-l1"><a class="reference internal" href="page_videoio_overview.html">Video I/O with OpenCV Overview</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="example_contours2.cpp.html">contours2.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_convexhull.cpp.html">convexhull.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_cout_mat.cpp.html">cout_mat.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_demhist.cpp.html">demhist.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_distrans.cpp.html">distrans.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_edge.cpp.html">edge.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_ffilldemo.cpp.html">ffilldemo.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_filestorage.cpp.html">filestorage.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_fitellipse.cpp.html">fitellipse.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_grabcut.cpp.html">grabcut.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_houghcircles.cpp.html">houghcircles.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_houghlines.cpp.html">houghlines.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_kmeans.cpp.html">kmeans.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_laplace.cpp.html">laplace.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_lsd_lines.cpp.html">lsd_lines.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_minarea.cpp.html">minarea.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_morphology2.cpp.html">morphology2.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_pca.cpp.html">pca.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_polar_transforms.cpp.html">polar_transforms.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_segment_objects.cpp.html">segment_objects.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="example_watershed.cpp.html">watershed.cpp</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="global.html">Global Namespace</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">OpenCV Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="page_tutorial_root.html">OpenCV Tutorials</a> &raquo;</li>
        
          <li><a href="page_tutorial_table_of_content_imgproc.html">Image Processing (imgproc module)</a> &raquo;</li>
        
      <li>Affine Transformations</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="affine-transformations">
<span id="doxid-d4-d61-tutorial-warp-affine"></span><span id="index-0"></span><h1>Affine Transformations</h1>
<p class="rubric">Goal</p>
<p>In this tutorial you will learn how to:</p>
<ul class="simple">
<li>Use the OpenCV function <a class="reference internal" href="group_imgproc_transform.html#doxid-da-d54-group-imgproc-transform-1ga0203d9ee5fcd28d40dbc4a1ea4451983"><span class="std std-ref">cv::warpAffine</span></a> to implement simple remapping routines.</li>
<li>Use the OpenCV function <a class="reference internal" href="group_imgproc_transform.html#doxid-da-d54-group-imgproc-transform-1gafbbc470ce83812914a70abfb604f4326"><span class="std std-ref">cv::getRotationMatrix2D</span></a> to obtain a <span class="math notranslate nohighlight">\(2 \times 3\)</span> rotation matrix</li>
</ul>
<p class="rubric">Theory</p>
<p class="rubric">What is an Affine Transformation?</p>
<ol class="arabic">
<li><p class="first">A transformation that can be expressed in the form of a <em>matrix multiplication</em> (linear transformation) followed by a <em>vector addition</em> (translation).</p>
</li>
<li><p class="first">From the above, we can use an Affine Transformation to express:</p>
<ol class="arabic simple">
<li>Rotations (linear transformation)</li>
<li>Translations (vector addition)</li>
<li>Scale operations (linear transformation)</li>
</ol>
<p>you can see that, in essence, an Affine Transformation represents a <strong>relation</strong> between two images.</p>
</li>
<li><p class="first">The usual way to represent an Affine Transformation is by using a <span class="math notranslate nohighlight">\(2 \times 3\)</span> matrix.</p>
<div class="math notranslate nohighlight">
\[\begin{split}A = \begin{bmatrix} a_{00} &amp; a_{01} \\ a_{10} &amp; a_{11} \end{bmatrix}_{2 \times 2} B = \begin{bmatrix} b_{00} \\ b_{10} \end{bmatrix}_{2 \times 1}\end{split}\]</div>
<div class="math notranslate nohighlight">
\[\begin{split}M = \begin{bmatrix} A &amp; B \end{bmatrix} = \begin{bmatrix} a_{00} &amp; a_{01} &amp; b_{00} \\ a_{10} &amp; a_{11} &amp; b_{10} \end{bmatrix}_{2 \times 3}\end{split}\]</div>
<p>Considering that we want to transform a 2D vector <span class="math notranslate nohighlight">\(X = \begin{bmatrix}x \\ y\end{bmatrix}\)</span> by using <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(B\)</span>, we can do the same with:</p>
<p><span class="math notranslate nohighlight">\(T = A \cdot \begin{bmatrix}x \\ y\end{bmatrix} + B\)</span> or <span class="math notranslate nohighlight">\(T = M \cdot [x, y, 1]^{T}\)</span></p>
<div class="math notranslate nohighlight">
\[\begin{split}T = \begin{bmatrix} a_{00}x + a_{01}y + b_{00} \\ a_{10}x + a_{11}y + b_{10} \end{bmatrix}\end{split}\]</div>
</li>
</ol>
<p class="rubric">How do we get an Affine Transformation?</p>
<ol class="arabic">
<li><p class="first">We mentioned that an Affine Transformation is basically a <strong>relation</strong> between two images. The information about this relation can come, roughly, in two ways:</p>
<ol class="arabic simple">
<li>We know both <span class="math notranslate nohighlight">\(X\)</span> and T and we also know that they are related. Then our task is to find <span class="math notranslate nohighlight">\(M\)</span></li>
<li>We know <span class="math notranslate nohighlight">\(M\)</span> and <span class="math notranslate nohighlight">\(X\)</span>. To obtain <span class="math notranslate nohighlight">\(T\)</span> we only need to apply <span class="math notranslate nohighlight">\(T = M \cdot X\)</span>. Our information for <span class="math notranslate nohighlight">\(M\)</span> may be explicit (i.e. have the 2-by-3 matrix) or it can come as a geometric relation between points.</li>
</ol>
</li>
<li><p class="first">Let’s explain this in a better way (b). Since <span class="math notranslate nohighlight">\(M\)</span> relates 2 images, we can analyze the simplest case in which it relates three points in both images. Look at the figure below:</p>
<img alt="_images/Warp_Affine_Tutorial_Theory_0.jpg" src="_images/Warp_Affine_Tutorial_Theory_0.jpg" />
<p>the points 1, 2 and 3 (forming a triangle in image 1) are mapped into image 2, still forming a triangle, but now they have changed notoriously. If we find the Affine Transformation with these 3 points (you can choose them as you like), then we can apply this found relation to all the pixels in an image.</p>
</li>
</ol>
<p class="rubric">Code</p>
<ol class="arabic">
<li><p class="first"><strong>What does this program do?</strong></p>
<ul class="simple">
<li>Loads an image</li>
<li>Applies an Affine Transform to the image. This transform is obtained from the relation between three points. We use the function <a class="reference internal" href="group_imgproc_transform.html#doxid-da-d54-group-imgproc-transform-1ga0203d9ee5fcd28d40dbc4a1ea4451983"><span class="std std-ref">cv::warpAffine</span></a> for that purpose.</li>
<li>Applies a Rotation to the image after being transformed. This rotation is with respect to the image center</li>
<li>Waits until the user exits the program</li>
</ul>
</li>
<li><p class="first">The tutorial’s code is shown below. You can also download it here <a class="reference external" href="https://github.com/opencv/opencv/tree/master/samples/cpp/tutorial_code/ImgTrans/Geometric_Transforms_Demo.cpp">here</a></p>
<pre class="highlight literal-block">
<span></span><span class="cp">#include</span> <span class="cpf">&quot;opencv2/imgcodecs.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;opencv2/highgui.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;opencv2/imgproc.hpp&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <a class="reference internal" href="namespace_cv.html#doxid-d2-d75-namespacecv"><span class="std std-ref">cv</span></a><span></span><span class="p">;</span>
<span class="k">using</span> <span class="k">namespace</span> <a class="reference internal" href="namespace_std.html#doxid-d8-dcc-namespacestd"><span class="std std-ref">std</span></a><span></span><span class="p">;</span>

<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">source_window</span> <span class="o">=</span> <span class="s">&quot;Source image&quot;</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">warp_window</span> <span class="o">=</span> <span class="s">&quot;Warp&quot;</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">warp_rotate_window</span> <span class="o">=</span> <span class="s">&quot;Warp + Rotate&quot;</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">char</span><span class="o">**</span> <span class="n">argv</span> <span class="p">)</span>
<span class="p">{</span>
  <span class="n">Point2f</span> <span class="n">srcTri</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
  <span class="n">Point2f</span> <span class="n">dstTri</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

  <a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat"><span class="std std-ref">Mat</span></a><span></span> <span class="n">rot_mat</span><span class="p">(</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <a class="reference internal" href="group_core_hal_interface.html#doxid-d1-d1b-group-core-hal-interface-1ga32ec76240e43e4c9c7b2e2785180a7e6"><span class="std std-ref">CV_32FC1</span></a><span></span> <span class="p">);</span>
  <a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat"><span class="std std-ref">Mat</span></a><span></span> <span class="n">warp_mat</span><span class="p">(</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <a class="reference internal" href="group_core_hal_interface.html#doxid-d1-d1b-group-core-hal-interface-1ga32ec76240e43e4c9c7b2e2785180a7e6"><span class="std std-ref">CV_32FC1</span></a><span></span> <span class="p">);</span>
  <a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat"><span class="std std-ref">Mat</span></a><span></span> <span class="n">src</span><span class="p">,</span> <span class="n">warp_dst</span><span class="p">,</span> <span class="n">warp_rotate_dst</span><span class="p">;</span>

  <span class="n">src</span> <span class="o">=</span> <a class="reference internal" href="group_imgcodecs.html#doxid-d4-da8-group-imgcodecs-1ga288b8b3da0892bd651fce07b3bbd3a56"><span class="std std-ref">imread</span></a><span></span><span class="p">(</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <a class="reference internal" href="enum_cv_ImreadModes.html#doxid-d4-da8-group-imgcodecs-1gga61d9b0126a3e57d9277ac48327799c80af660544735200cbe942eea09232eb822"><span class="std std-ref">IMREAD_COLOR</span></a><span></span> <span class="p">);</span>

  <span class="n">warp_dst</span> <span class="o">=</span> <a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat-1a0b57b6a326c8876d944d188a46e0f556"><span class="std std-ref">Mat::zeros</span></a><span></span><span class="p">(</span> <span class="n">src</span><span class="p">.</span><a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat-1abed816466c45234254d25bc59c31245e"><span class="std std-ref">rows</span></a><span></span><span class="p">,</span> <span class="n">src</span><span class="p">.</span><a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat-1aa3e5a47585c9ef6a0842556739155e3e"><span class="std std-ref">cols</span></a><span></span><span class="p">,</span> <span class="n">src</span><span class="p">.</span><a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat-1af2d2652e552d7de635988f18a84b53e5"><span class="std std-ref">type</span></a><span></span><span class="p">()</span> <span class="p">);</span>

  <span class="n">srcTri</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1ga7d080aa40de011e4410bca63385ffe2a"><span class="std std-ref">Point2f</span></a><span></span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span> <span class="p">);</span>
  <span class="n">srcTri</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1ga7d080aa40de011e4410bca63385ffe2a"><span class="std std-ref">Point2f</span></a><span></span><span class="p">(</span> <span class="n">src</span><span class="p">.</span><a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat-1aa3e5a47585c9ef6a0842556739155e3e"><span class="std std-ref">cols</span></a><span></span> <span class="o">-</span> <span class="mf">1.f</span><span class="p">,</span> <span class="mi">0</span> <span class="p">);</span>
  <span class="n">srcTri</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1ga7d080aa40de011e4410bca63385ffe2a"><span class="std std-ref">Point2f</span></a><span></span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="n">src</span><span class="p">.</span><a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat-1abed816466c45234254d25bc59c31245e"><span class="std std-ref">rows</span></a><span></span> <span class="o">-</span> <span class="mf">1.f</span> <span class="p">);</span>

  <span class="n">dstTri</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1ga7d080aa40de011e4410bca63385ffe2a"><span class="std std-ref">Point2f</span></a><span></span><span class="p">(</span> <span class="n">src</span><span class="p">.</span><a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat-1aa3e5a47585c9ef6a0842556739155e3e"><span class="std std-ref">cols</span></a><span></span><span class="o">*</span><span class="mf">0.0f</span><span class="p">,</span> <span class="n">src</span><span class="p">.</span><a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat-1abed816466c45234254d25bc59c31245e"><span class="std std-ref">rows</span></a><span></span><span class="o">*</span><span class="mf">0.33f</span> <span class="p">);</span>
  <span class="n">dstTri</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1ga7d080aa40de011e4410bca63385ffe2a"><span class="std std-ref">Point2f</span></a><span></span><span class="p">(</span> <span class="n">src</span><span class="p">.</span><a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat-1aa3e5a47585c9ef6a0842556739155e3e"><span class="std std-ref">cols</span></a><span></span><span class="o">*</span><span class="mf">0.85f</span><span class="p">,</span> <span class="n">src</span><span class="p">.</span><a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat-1abed816466c45234254d25bc59c31245e"><span class="std std-ref">rows</span></a><span></span><span class="o">*</span><span class="mf">0.25f</span> <span class="p">);</span>
  <span class="n">dstTri</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1ga7d080aa40de011e4410bca63385ffe2a"><span class="std std-ref">Point2f</span></a><span></span><span class="p">(</span> <span class="n">src</span><span class="p">.</span><a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat-1aa3e5a47585c9ef6a0842556739155e3e"><span class="std std-ref">cols</span></a><span></span><span class="o">*</span><span class="mf">0.15f</span><span class="p">,</span> <span class="n">src</span><span class="p">.</span><a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat-1abed816466c45234254d25bc59c31245e"><span class="std std-ref">rows</span></a><span></span><span class="o">*</span><span class="mf">0.7f</span> <span class="p">);</span>

  <span class="n">warp_mat</span> <span class="o">=</span> <a class="reference internal" href="group_imgproc_transform.html#doxid-da-d54-group-imgproc-transform-1ga8f6d378f9f8eebb5cb55cd3ae295a999"><span class="std std-ref">getAffineTransform</span></a><span></span><span class="p">(</span> <span class="n">srcTri</span><span class="p">,</span> <span class="n">dstTri</span> <span class="p">);</span>

  <a class="reference internal" href="group_imgproc_transform.html#doxid-da-d54-group-imgproc-transform-1ga0203d9ee5fcd28d40dbc4a1ea4451983"><span class="std std-ref">warpAffine</span></a><span></span><span class="p">(</span> <span class="n">src</span><span class="p">,</span> <span class="n">warp_dst</span><span class="p">,</span> <span class="n">warp_mat</span><span class="p">,</span> <span class="n">warp_dst</span><span class="p">.</span><a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat-1a146f8e8dda07d1365a575ab83d9828d1"><span class="std std-ref">size</span></a><span></span><span class="p">()</span> <span class="p">);</span>

  <span class="n">Point</span> <span class="n">center</span> <span class="o">=</span> <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1ga1e83eafb2d26b3c93f09e8338bcab192"><span class="std std-ref">Point</span></a><span></span><span class="p">(</span> <span class="n">warp_dst</span><span class="p">.</span><a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat-1aa3e5a47585c9ef6a0842556739155e3e"><span class="std std-ref">cols</span></a><span></span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">warp_dst</span><span class="p">.</span><a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat-1abed816466c45234254d25bc59c31245e"><span class="std std-ref">rows</span></a><span></span><span class="o">/</span><span class="mi">2</span> <span class="p">);</span>
  <span class="kt">double</span> <span class="n">angle</span> <span class="o">=</span> <span class="o">-</span><span class="mf">50.0</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">scale</span> <span class="o">=</span> <span class="mf">0.6</span><span class="p">;</span>

  <span class="n">rot_mat</span> <span class="o">=</span> <a class="reference internal" href="group_imgproc_transform.html#doxid-da-d54-group-imgproc-transform-1gafbbc470ce83812914a70abfb604f4326"><span class="std std-ref">getRotationMatrix2D</span></a><span></span><span class="p">(</span> <span class="n">center</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">scale</span> <span class="p">);</span>

  <a class="reference internal" href="group_imgproc_transform.html#doxid-da-d54-group-imgproc-transform-1ga0203d9ee5fcd28d40dbc4a1ea4451983"><span class="std std-ref">warpAffine</span></a><span></span><span class="p">(</span> <span class="n">warp_dst</span><span class="p">,</span> <span class="n">warp_rotate_dst</span><span class="p">,</span> <span class="n">rot_mat</span><span class="p">,</span> <span class="n">warp_dst</span><span class="p">.</span><a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat-1a146f8e8dda07d1365a575ab83d9828d1"><span class="std std-ref">size</span></a><span></span><span class="p">()</span> <span class="p">);</span>


  <a class="reference internal" href="group_highgui.html#doxid-d7-dfc-group-highgui-1ga5afdf8410934fd099df85c75b2e0888b"><span class="std std-ref">namedWindow</span></a><span></span><span class="p">(</span> <span class="n">source_window</span><span class="p">,</span> <a class="reference internal" href="enum_cv_WindowFlags.html#doxid-d7-dfc-group-highgui-1ggabf7d2c5625bc59ac130287f925557ac3acf621ace7a54954cbac01df27e47228f"><span class="std std-ref">WINDOW_AUTOSIZE</span></a><span></span> <span class="p">);</span>
  <a class="reference internal" href="group_highgui.html#doxid-d7-dfc-group-highgui-1ga453d42fe4cb60e5723281a89973ee563"><span class="std std-ref">imshow</span></a><span></span><span class="p">(</span> <span class="n">source_window</span><span class="p">,</span> <span class="n">src</span> <span class="p">);</span>

  <a class="reference internal" href="group_highgui.html#doxid-d7-dfc-group-highgui-1ga5afdf8410934fd099df85c75b2e0888b"><span class="std std-ref">namedWindow</span></a><span></span><span class="p">(</span> <span class="n">warp_window</span><span class="p">,</span> <a class="reference internal" href="enum_cv_WindowFlags.html#doxid-d7-dfc-group-highgui-1ggabf7d2c5625bc59ac130287f925557ac3acf621ace7a54954cbac01df27e47228f"><span class="std std-ref">WINDOW_AUTOSIZE</span></a><span></span> <span class="p">);</span>
  <a class="reference internal" href="group_highgui.html#doxid-d7-dfc-group-highgui-1ga453d42fe4cb60e5723281a89973ee563"><span class="std std-ref">imshow</span></a><span></span><span class="p">(</span> <span class="n">warp_window</span><span class="p">,</span> <span class="n">warp_dst</span> <span class="p">);</span>

  <a class="reference internal" href="group_highgui.html#doxid-d7-dfc-group-highgui-1ga5afdf8410934fd099df85c75b2e0888b"><span class="std std-ref">namedWindow</span></a><span></span><span class="p">(</span> <span class="n">warp_rotate_window</span><span class="p">,</span> <a class="reference internal" href="enum_cv_WindowFlags.html#doxid-d7-dfc-group-highgui-1ggabf7d2c5625bc59ac130287f925557ac3acf621ace7a54954cbac01df27e47228f"><span class="std std-ref">WINDOW_AUTOSIZE</span></a><span></span> <span class="p">);</span>
  <a class="reference internal" href="group_highgui.html#doxid-d7-dfc-group-highgui-1ga453d42fe4cb60e5723281a89973ee563"><span class="std std-ref">imshow</span></a><span></span><span class="p">(</span> <span class="n">warp_rotate_window</span><span class="p">,</span> <span class="n">warp_rotate_dst</span> <span class="p">);</span>

  <a class="reference internal" href="group_highgui.html#doxid-d7-dfc-group-highgui-1ga5628525ad33f52eab17feebcfba38bd7"><span class="std std-ref">waitKey</span></a><span></span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre>
</li>
</ol>
<p class="rubric">Explanation</p>
<ol class="arabic">
<li><p class="first">Declare some variables we will use, such as the matrices to store our results and 2 arrays of points to store the 2D points that define our Affine Transform.</p>
<pre class="highlight literal-block">
<span></span><span class="n">Point2f</span> <span class="n">srcTri</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
<span class="n">Point2f</span> <span class="n">dstTri</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

<span class="n">Mat</span> <span class="n">rot_mat</span><span class="p">(</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <a class="reference internal" href="group_core_hal_interface.html#doxid-d1-d1b-group-core-hal-interface-1ga32ec76240e43e4c9c7b2e2785180a7e6"><span class="std std-ref">CV_32FC1</span></a><span></span> <span class="p">);</span>
<span class="n">Mat</span> <span class="n">warp_mat</span><span class="p">(</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <a class="reference internal" href="group_core_hal_interface.html#doxid-d1-d1b-group-core-hal-interface-1ga32ec76240e43e4c9c7b2e2785180a7e6"><span class="std std-ref">CV_32FC1</span></a><span></span> <span class="p">);</span>
<span class="n">Mat</span> <span class="n">src</span><span class="p">,</span> <span class="n">warp_dst</span><span class="p">,</span> <span class="n">warp_rotate_dst</span><span class="p">;</span>
</pre>
</li>
<li><p class="first">Load an image:</p>
<pre class="highlight literal-block">
<span></span><span class="n">src</span> <span class="o">=</span> <a class="reference internal" href="group_imgcodecs.html#doxid-d4-da8-group-imgcodecs-1ga288b8b3da0892bd651fce07b3bbd3a56"><span class="std std-ref">imread</span></a><span></span><span class="p">(</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">1</span> <span class="p">);</span>
</pre>
</li>
<li><p class="first">Initialize the destination image as having the same size and type as the source:</p>
<pre class="highlight literal-block">
<span></span><span class="n">warp_dst</span> <span class="o">=</span> <span class="n">Mat</span><span class="o">::</span><span class="n">zeros</span><span class="p">(</span> <span class="n">src</span><span class="p">.</span><span class="n">rows</span><span class="p">,</span> <span class="n">src</span><span class="p">.</span><span class="n">cols</span><span class="p">,</span> <span class="n">src</span><span class="p">.</span><span class="n">type</span><span class="p">()</span> <span class="p">);</span>
</pre>
</li>
<li><p class="first"><strong>Affine Transform:</strong> As we explained in lines above, we need two sets of 3 points to derive the affine transform relation. Have a look:</p>
<pre class="highlight literal-block">
<span></span><span class="n">srcTri</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1ga7d080aa40de011e4410bca63385ffe2a"><span class="std std-ref">Point2f</span></a><span></span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">);</span>
<span class="n">srcTri</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1ga7d080aa40de011e4410bca63385ffe2a"><span class="std std-ref">Point2f</span></a><span></span><span class="p">(</span> <span class="n">src</span><span class="p">.</span><span class="n">cols</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span> <span class="p">);</span>
<span class="n">srcTri</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1ga7d080aa40de011e4410bca63385ffe2a"><span class="std std-ref">Point2f</span></a><span></span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="n">src</span><span class="p">.</span><span class="n">rows</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">);</span>

<span class="n">dstTri</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1ga7d080aa40de011e4410bca63385ffe2a"><span class="std std-ref">Point2f</span></a><span></span><span class="p">(</span> <span class="n">src</span><span class="p">.</span><span class="n">cols</span><span class="o">*</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">src</span><span class="p">.</span><span class="n">rows</span><span class="o">*</span><span class="mf">0.33</span> <span class="p">);</span>
<span class="n">dstTri</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1ga7d080aa40de011e4410bca63385ffe2a"><span class="std std-ref">Point2f</span></a><span></span><span class="p">(</span> <span class="n">src</span><span class="p">.</span><span class="n">cols</span><span class="o">*</span><span class="mf">0.85</span><span class="p">,</span> <span class="n">src</span><span class="p">.</span><span class="n">rows</span><span class="o">*</span><span class="mf">0.25</span> <span class="p">);</span>
<span class="n">dstTri</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1ga7d080aa40de011e4410bca63385ffe2a"><span class="std std-ref">Point2f</span></a><span></span><span class="p">(</span> <span class="n">src</span><span class="p">.</span><span class="n">cols</span><span class="o">*</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">src</span><span class="p">.</span><span class="n">rows</span><span class="o">*</span><span class="mf">0.7</span> <span class="p">);</span>
</pre>
<p>You may want to draw these points to get a better idea on how they change. Their locations are approximately the same as the ones depicted in the example figure (in the Theory section). You may note that the size and orientation of the triangle defined by the 3 points change.</p>
</li>
<li><p class="first">Armed with both sets of points, we calculate the Affine Transform by using OpenCV function <a class="reference internal" href="group_imgproc_transform.html#doxid-da-d54-group-imgproc-transform-1ga8f6d378f9f8eebb5cb55cd3ae295a999"><span class="std std-ref">cv::getAffineTransform</span></a> :</p>
<pre class="highlight literal-block">
<span></span><span class="n">warp_mat</span> <span class="o">=</span> <a class="reference internal" href="group_imgproc_transform.html#doxid-da-d54-group-imgproc-transform-1ga8f6d378f9f8eebb5cb55cd3ae295a999"><span class="std std-ref">getAffineTransform</span></a><span></span><span class="p">(</span> <span class="n">srcTri</span><span class="p">,</span> <span class="n">dstTri</span> <span class="p">);</span>
</pre>
<p>We get a <span class="math notranslate nohighlight">\(2 \times 3\)</span> matrix as an output (in this case <strong>warp_mat</strong>)</p>
</li>
<li><p class="first">We then apply the Affine Transform just found to the src image</p>
<pre class="highlight literal-block">
<a class="reference internal" href="namespace_cv_hal.html#doxid-d5-df1-group-imgproc-hal-functions-1ga8a534cca6fb845c9ac77f10c35f67c0c"><span class="std std-ref">warpAffine</span></a><span></span><span class="p">(</span> <span class="n">src</span><span class="p">,</span> <span class="n">warp_dst</span><span class="p">,</span> <span class="n">warp_mat</span><span class="p">,</span> <span class="n">warp_dst</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="p">);</span>
</pre>
<p>with the following arguments:</p>
<ul class="simple">
<li><strong>src</strong> : Input image</li>
<li><strong>warp_dst</strong> : Output image</li>
<li><strong>warp_mat</strong> : Affine transform</li>
<li><strong>warp_dst.size()</strong> : The desired size of the output image</li>
</ul>
<p>We just got our first transformed image! We will display it in one bit. Before that, we also want to rotate it…</p>
</li>
<li><p class="first"><strong>Rotate:</strong> To rotate an image, we need to know two things:</p>
<ol class="arabic simple">
<li>The center with respect to which the image will rotate</li>
<li>The angle to be rotated. In OpenCV a positive angle is counter-clockwise</li>
<li><em>Optional:</em> A scale factor</li>
</ol>
<p>We define these parameters with the following snippet:</p>
<pre class="highlight literal-block">
<span></span><span class="n">Point</span> <span class="n">center</span> <span class="o">=</span> <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1ga1e83eafb2d26b3c93f09e8338bcab192"><span class="std std-ref">Point</span></a><span></span><span class="p">(</span> <span class="n">warp_dst</span><span class="p">.</span><span class="n">cols</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">warp_dst</span><span class="p">.</span><span class="n">rows</span><span class="o">/</span><span class="mi">2</span> <span class="p">);</span>
<span class="kt">double</span> <span class="n">angle</span> <span class="o">=</span> <span class="o">-</span><span class="mf">50.0</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">scale</span> <span class="o">=</span> <span class="mf">0.6</span><span class="p">;</span>
</pre>
</li>
<li><p class="first">We generate the rotation matrix with the OpenCV function <a class="reference internal" href="group_imgproc_transform.html#doxid-da-d54-group-imgproc-transform-1gafbbc470ce83812914a70abfb604f4326"><span class="std std-ref">cv::getRotationMatrix2D</span></a>, which returns a <span class="math notranslate nohighlight">\(2 \times 3\)</span> matrix (in this case <em>rot_mat</em>)</p>
<pre class="highlight literal-block">
<span></span><span class="n">rot_mat</span> <span class="o">=</span> <a class="reference internal" href="group_imgproc_transform.html#doxid-da-d54-group-imgproc-transform-1gafbbc470ce83812914a70abfb604f4326"><span class="std std-ref">getRotationMatrix2D</span></a><span></span><span class="p">(</span> <span class="n">center</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">scale</span> <span class="p">);</span>
</pre>
</li>
<li><p class="first">We now apply the found rotation to the output of our previous Transformation.</p>
<pre class="highlight literal-block">
<a class="reference internal" href="namespace_cv_hal.html#doxid-d5-df1-group-imgproc-hal-functions-1ga8a534cca6fb845c9ac77f10c35f67c0c"><span class="std std-ref">warpAffine</span></a><span></span><span class="p">(</span> <span class="n">warp_dst</span><span class="p">,</span> <span class="n">warp_rotate_dst</span><span class="p">,</span> <span class="n">rot_mat</span><span class="p">,</span> <span class="n">warp_dst</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="p">);</span>
</pre>
</li>
<li><p class="first">Finally, we display our results in two windows plus the original image for good measure:</p>
<pre class="highlight literal-block">
<a class="reference internal" href="group_highgui.html#doxid-d7-dfc-group-highgui-1ga5afdf8410934fd099df85c75b2e0888b"><span class="std std-ref">namedWindow</span></a><span></span><span class="p">(</span> <span class="n">source_window</span><span class="p">,</span> <a class="reference internal" href="enum_cv_WindowFlags.html#doxid-d7-dfc-group-highgui-1ggabf7d2c5625bc59ac130287f925557ac3acf621ace7a54954cbac01df27e47228f"><span class="std std-ref">WINDOW_AUTOSIZE</span></a><span></span> <span class="p">);</span>
<a class="reference internal" href="group_highgui.html#doxid-d7-dfc-group-highgui-1ga453d42fe4cb60e5723281a89973ee563"><span class="std std-ref">imshow</span></a><span></span><span class="p">(</span> <span class="n">source_window</span><span class="p">,</span> <span class="n">src</span> <span class="p">);</span>

<a class="reference internal" href="group_highgui.html#doxid-d7-dfc-group-highgui-1ga5afdf8410934fd099df85c75b2e0888b"><span class="std std-ref">namedWindow</span></a><span></span><span class="p">(</span> <span class="n">warp_window</span><span class="p">,</span> <a class="reference internal" href="enum_cv_WindowFlags.html#doxid-d7-dfc-group-highgui-1ggabf7d2c5625bc59ac130287f925557ac3acf621ace7a54954cbac01df27e47228f"><span class="std std-ref">WINDOW_AUTOSIZE</span></a><span></span> <span class="p">);</span>
<a class="reference internal" href="group_highgui.html#doxid-d7-dfc-group-highgui-1ga453d42fe4cb60e5723281a89973ee563"><span class="std std-ref">imshow</span></a><span></span><span class="p">(</span> <span class="n">warp_window</span><span class="p">,</span> <span class="n">warp_dst</span> <span class="p">);</span>

<a class="reference internal" href="group_highgui.html#doxid-d7-dfc-group-highgui-1ga5afdf8410934fd099df85c75b2e0888b"><span class="std std-ref">namedWindow</span></a><span></span><span class="p">(</span> <span class="n">warp_rotate_window</span><span class="p">,</span> <a class="reference internal" href="enum_cv_WindowFlags.html#doxid-d7-dfc-group-highgui-1ggabf7d2c5625bc59ac130287f925557ac3acf621ace7a54954cbac01df27e47228f"><span class="std std-ref">WINDOW_AUTOSIZE</span></a><span></span> <span class="p">);</span>
<a class="reference internal" href="group_highgui.html#doxid-d7-dfc-group-highgui-1ga453d42fe4cb60e5723281a89973ee563"><span class="std std-ref">imshow</span></a><span></span><span class="p">(</span> <span class="n">warp_rotate_window</span><span class="p">,</span> <span class="n">warp_rotate_dst</span> <span class="p">);</span>
</pre>
</li>
<li><p class="first">We just have to wait until the user exits the program</p>
<pre class="highlight literal-block">
<a class="reference internal" href="group_highgui.html#doxid-d7-dfc-group-highgui-1ga5628525ad33f52eab17feebcfba38bd7"><span class="std std-ref">waitKey</span></a><span></span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</pre>
</li>
</ol>
<p class="rubric">Result</p>
<ol class="arabic">
<li><p class="first">After compiling the code above, we can give it the path of an image as argument. For instance, for a picture like:</p>
<img alt="_images/Warp_Affine_Tutorial_Original_Image.jpg" src="_images/Warp_Affine_Tutorial_Original_Image.jpg" />
<p>after applying the first Affine Transform we obtain:</p>
<img alt="_images/Warp_Affine_Tutorial_Result_Warp.jpg" src="_images/Warp_Affine_Tutorial_Result_Warp.jpg" />
<p>and finally, after applying a negative rotation (remember negative means clockwise) and a scale factor, we get:</p>
<img alt="_images/Warp_Affine_Tutorial_Result_Warp_Rotate.jpg" src="_images/Warp_Affine_Tutorial_Result_Warp_Rotate.jpg" />
</li>
</ol>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="page_tutorial_back_projection.html" class="btn btn-neutral float-right" title="Back Projection" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="page_tutorial_copyMakeBorder.html" class="btn btn-neutral float-left" title="Adding borders to your images" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 1999-2017, OpenCV Maintainers

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>