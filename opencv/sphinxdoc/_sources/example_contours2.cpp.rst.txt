.. index:: pair: example; contours2.cpp
.. _doxid-d0/d2a/contours2_8cpp-example:

contours2.cpp
=============

An example using the drawContour functionality

.. ref-code-block:: cpp

	#include "opencv2/imgproc.hpp"
	#include "opencv2/highgui.hpp"
	#include <math.h>
	#include <iostream>
	
	using namespace :ref:`cv <doxid-d2/d75/namespacecv>`;
	using namespace :ref:`std <doxid-d8/dcc/namespacestd>`;
	
	static void help()
	{
	    cout
	    << "\nThis program illustrates the use of findContours and drawContours\n"
	    << "The original image is put up along with the image of drawn contours\n"
	    << "Usage:\n"
	    << "./contours2\n"
	    << "\nA trackbar is put up which controls the contour level from -3 to 3\n"
	    << endl;
	}
	
	const int w = 500;
	int levels = 3;
	
	vector<vector<Point> > contours;
	vector<Vec4i> hierarchy;
	
	static void on_trackbar(int, void*)
	{
	    :ref:`Mat <doxid-db/de6/classcv_1_1_mat>` cnt_img = :ref:`Mat::zeros <doxid-db/de6/classcv_1_1_mat_1a0b57b6a326c8876d944d188a46e0f556>`(w, w, :ref:`CV_8UC3 <doxid-d1/d1b/group__core__hal__interface_1ga88c4cd9de76f678f33928ef1e3f96047>`);
	    int _levels = levels - 3;
	    :ref:`drawContours <doxid-d6/d6e/group__imgproc__draw_1ga746c0625f1781f1ffc9056259103edbc>`( cnt_img, contours, _levels <= 0 ? 3 : -1, :ref:`Scalar <doxid-dc/d84/group__core__basic_1ga599fe92e910c027be274233eccad7beb>`(128,255,255),
	                  3, :ref:`LINE_AA <doxid-d0/de1/group__core_1ggaf076ef45de481ac96e0ab3dc2c29a777a85fdabe5335c9e6656563dfd7c94fb4f>`, hierarchy, :ref:`std::abs <doxid-d2/d75/namespacecv_1af6df65b17fb11af6d34634b6dfa44683>`(_levels) );
	
	    :ref:`imshow <doxid-d7/dfc/group__highgui_1ga453d42fe4cb60e5723281a89973ee563>`("contours", cnt_img);
	}
	
	int main( int argc, char** argv)
	{
	    :ref:`cv::CommandLineParser <doxid-da/dd8/classcv_1_1_command_line_parser>` parser(argc, argv, "{help h||}");
	    if (parser.has("help"))
	    {
	        help();
	        return 0;
	    }
	    :ref:`Mat <doxid-db/de6/classcv_1_1_mat>` img = :ref:`Mat::zeros <doxid-db/de6/classcv_1_1_mat_1a0b57b6a326c8876d944d188a46e0f556>`(w, w, :ref:`CV_8UC1 <doxid-d1/d1b/group__core__hal__interface_1ga81df635441b21f532fdace401e04f588>`);
	    //Draw 6 faces
	    for( int i = 0; i < 6; i++ )
	    {
	        int dx = (i%2)*250 - 30;
	        int dy = (i/2)*150;
	        const Scalar white = :ref:`Scalar <doxid-dc/d84/group__core__basic_1ga599fe92e910c027be274233eccad7beb>`(255);
	        const Scalar black = :ref:`Scalar <doxid-dc/d84/group__core__basic_1ga599fe92e910c027be274233eccad7beb>`(0);
	
	        if( i == 0 )
	        {
	            for( int j = 0; j <= 10; j++ )
	            {
	                double angle = (j+5)*CV_PI/21;
	                :ref:`line <doxid-d6/d6e/group__imgproc__draw_1ga7078a9fae8c7e7d13d24dac2520ae4a2>`(img, :ref:`Point <doxid-dc/d84/group__core__basic_1ga1e83eafb2d26b3c93f09e8338bcab192>`(:ref:`cvRound <doxid-db/de0/group__core__utils_1ga085eca238176984a0b72df2818598d85>`(dx+100+j*10-80*:ref:`cos <doxid-df/dfc/group__cudev_1ga2591489e47c1cb227d235872e4b5e433>`(angle)),
	                    :ref:`cvRound <doxid-db/de0/group__core__utils_1ga085eca238176984a0b72df2818598d85>`(dy+100-90*:ref:`sin <doxid-df/dfc/group__cudev_1gaa65ebb1958aa6daaacb7e0b94810ff87>`(angle))),
	                    :ref:`Point <doxid-dc/d84/group__core__basic_1ga1e83eafb2d26b3c93f09e8338bcab192>`(:ref:`cvRound <doxid-db/de0/group__core__utils_1ga085eca238176984a0b72df2818598d85>`(dx+100+j*10-30*:ref:`cos <doxid-df/dfc/group__cudev_1ga2591489e47c1cb227d235872e4b5e433>`(angle)),
	                    :ref:`cvRound <doxid-db/de0/group__core__utils_1ga085eca238176984a0b72df2818598d85>`(dy+100-30*:ref:`sin <doxid-df/dfc/group__cudev_1gaa65ebb1958aa6daaacb7e0b94810ff87>`(angle))), white, 1, 8, 0);
	            }
	        }
	
	        :ref:`ellipse <doxid-d6/d6e/group__imgproc__draw_1ga28b2267d35786f5f890ca167236cbc69>`( img, :ref:`Point <doxid-dc/d84/group__core__basic_1ga1e83eafb2d26b3c93f09e8338bcab192>`(dx+150, dy+100), :ref:`Size <doxid-dc/d84/group__core__basic_1ga346f563897249351a34549137c8532a0>`(100,70), 0, 0, 360, white, -1, 8, 0 );
	        :ref:`ellipse <doxid-d6/d6e/group__imgproc__draw_1ga28b2267d35786f5f890ca167236cbc69>`( img, :ref:`Point <doxid-dc/d84/group__core__basic_1ga1e83eafb2d26b3c93f09e8338bcab192>`(dx+115, dy+70), :ref:`Size <doxid-dc/d84/group__core__basic_1ga346f563897249351a34549137c8532a0>`(30,20), 0, 0, 360, black, -1, 8, 0 );
	        :ref:`ellipse <doxid-d6/d6e/group__imgproc__draw_1ga28b2267d35786f5f890ca167236cbc69>`( img, :ref:`Point <doxid-dc/d84/group__core__basic_1ga1e83eafb2d26b3c93f09e8338bcab192>`(dx+185, dy+70), :ref:`Size <doxid-dc/d84/group__core__basic_1ga346f563897249351a34549137c8532a0>`(30,20), 0, 0, 360, black, -1, 8, 0 );
	        :ref:`ellipse <doxid-d6/d6e/group__imgproc__draw_1ga28b2267d35786f5f890ca167236cbc69>`( img, :ref:`Point <doxid-dc/d84/group__core__basic_1ga1e83eafb2d26b3c93f09e8338bcab192>`(dx+115, dy+70), :ref:`Size <doxid-dc/d84/group__core__basic_1ga346f563897249351a34549137c8532a0>`(15,15), 0, 0, 360, white, -1, 8, 0 );
	        :ref:`ellipse <doxid-d6/d6e/group__imgproc__draw_1ga28b2267d35786f5f890ca167236cbc69>`( img, :ref:`Point <doxid-dc/d84/group__core__basic_1ga1e83eafb2d26b3c93f09e8338bcab192>`(dx+185, dy+70), :ref:`Size <doxid-dc/d84/group__core__basic_1ga346f563897249351a34549137c8532a0>`(15,15), 0, 0, 360, white, -1, 8, 0 );
	        :ref:`ellipse <doxid-d6/d6e/group__imgproc__draw_1ga28b2267d35786f5f890ca167236cbc69>`( img, :ref:`Point <doxid-dc/d84/group__core__basic_1ga1e83eafb2d26b3c93f09e8338bcab192>`(dx+115, dy+70), :ref:`Size <doxid-dc/d84/group__core__basic_1ga346f563897249351a34549137c8532a0>`(5,5), 0, 0, 360, black, -1, 8, 0 );
	        :ref:`ellipse <doxid-d6/d6e/group__imgproc__draw_1ga28b2267d35786f5f890ca167236cbc69>`( img, :ref:`Point <doxid-dc/d84/group__core__basic_1ga1e83eafb2d26b3c93f09e8338bcab192>`(dx+185, dy+70), :ref:`Size <doxid-dc/d84/group__core__basic_1ga346f563897249351a34549137c8532a0>`(5,5), 0, 0, 360, black, -1, 8, 0 );
	        :ref:`ellipse <doxid-d6/d6e/group__imgproc__draw_1ga28b2267d35786f5f890ca167236cbc69>`( img, :ref:`Point <doxid-dc/d84/group__core__basic_1ga1e83eafb2d26b3c93f09e8338bcab192>`(dx+150, dy+100), :ref:`Size <doxid-dc/d84/group__core__basic_1ga346f563897249351a34549137c8532a0>`(10,5), 0, 0, 360, black, -1, 8, 0 );
	        :ref:`ellipse <doxid-d6/d6e/group__imgproc__draw_1ga28b2267d35786f5f890ca167236cbc69>`( img, :ref:`Point <doxid-dc/d84/group__core__basic_1ga1e83eafb2d26b3c93f09e8338bcab192>`(dx+150, dy+150), :ref:`Size <doxid-dc/d84/group__core__basic_1ga346f563897249351a34549137c8532a0>`(40,10), 0, 0, 360, black, -1, 8, 0 );
	        :ref:`ellipse <doxid-d6/d6e/group__imgproc__draw_1ga28b2267d35786f5f890ca167236cbc69>`( img, :ref:`Point <doxid-dc/d84/group__core__basic_1ga1e83eafb2d26b3c93f09e8338bcab192>`(dx+27, dy+100), :ref:`Size <doxid-dc/d84/group__core__basic_1ga346f563897249351a34549137c8532a0>`(20,35), 0, 0, 360, white, -1, 8, 0 );
	        :ref:`ellipse <doxid-d6/d6e/group__imgproc__draw_1ga28b2267d35786f5f890ca167236cbc69>`( img, :ref:`Point <doxid-dc/d84/group__core__basic_1ga1e83eafb2d26b3c93f09e8338bcab192>`(dx+273, dy+100), :ref:`Size <doxid-dc/d84/group__core__basic_1ga346f563897249351a34549137c8532a0>`(20,35), 0, 0, 360, white, -1, 8, 0 );
	    }
	    //show the faces
	    :ref:`namedWindow <doxid-d7/dfc/group__highgui_1ga5afdf8410934fd099df85c75b2e0888b>`( "image", 1 );
	    :ref:`imshow <doxid-d7/dfc/group__highgui_1ga453d42fe4cb60e5723281a89973ee563>`( "image", img );
	    //Extract the contours so that
	    vector<vector<Point> > contours0;
	    :ref:`findContours <doxid-d3/dc0/group__imgproc__shape_1ga17ed9f5d79ae97bd4c7cf18403e1689a>`( img, contours0, hierarchy, :ref:`RETR_TREE <doxid-d3/dc0/group__imgproc__shape_1gga819779b9857cc2f8601e6526a3a5bc71ab10df56aed56c89a026580adc9431f58>`, :ref:`CHAIN_APPROX_SIMPLE <doxid-d3/dc0/group__imgproc__shape_1gga4303f45752694956374734a03c54d5ffa5f2883048e654999209f88ba04c302f5>`);
	
	    contours.resize(contours0.size());
	    for( size_t k = 0; k < contours0.size(); k++ )
	        :ref:`approxPolyDP <doxid-d3/dc0/group__imgproc__shape_1ga0012a5fdaea70b8a9970165d98722b4c>`(:ref:`Mat <doxid-db/de6/classcv_1_1_mat>`(contours0[k]), contours[k], 3, true);
	
	    :ref:`namedWindow <doxid-d7/dfc/group__highgui_1ga5afdf8410934fd099df85c75b2e0888b>`( "contours", 1 );
	    :ref:`createTrackbar <doxid-d7/dfc/group__highgui_1gaf78d2155d30b728fc413803745b67a9b>`( "levels+3", "contours", &levels, 7, on_trackbar );
	
	    on_trackbar(0,0);
	    :ref:`waitKey <doxid-d7/dfc/group__highgui_1ga5628525ad33f52eab17feebcfba38bd7>`();
	
	    return 0;
	}
