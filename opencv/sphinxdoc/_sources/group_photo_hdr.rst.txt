.. index:: pair: group; HDR imaging
.. _doxid-d6/df5/group__photo__hdr:

HDR imaging
===========

.. toctree::
	:hidden:

	class_cv_AlignExposures.rst
	class_cv_AlignMTB.rst
	class_cv_CalibrateCRF.rst
	class_cv_CalibrateDebevec.rst
	class_cv_CalibrateRobertson.rst
	class_cv_MergeDebevec.rst
	class_cv_MergeExposures.rst
	class_cv_MergeMertens.rst
	class_cv_MergeRobertson.rst
	class_cv_Tonemap.rst
	class_cv_TonemapDrago.rst
	class_cv_TonemapDurand.rst
	class_cv_TonemapMantiuk.rst
	class_cv_TonemapReinhard.rst

Overview
~~~~~~~~

This section describes high dynamic range imaging algorithms namely tonemapping, exposure alignment, camera calibration with multiple exposures and exposure fusion. :ref:`More...<details-d6/df5/group__photo__hdr>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	
	// enums

	enum
	{
	    :target:`cv::@173::LDR_SIZE<doxid-d6/df5/group__photo__hdr_1gga18737c0c27ce8d4fc31acdb7c8f2baada11377cb33f0a607d50cdc65e529529a1>` = 256,
	};

	// classes

	class :ref:`cv::AlignExposures<doxid-df/d56/classcv_1_1_align_exposures>`;
	class :ref:`cv::AlignMTB<doxid-d6/d15/classcv_1_1_align_m_t_b>`;
	class :ref:`cv::CalibrateCRF<doxid-d6/d43/classcv_1_1_calibrate_c_r_f>`;
	class :ref:`cv::CalibrateDebevec<doxid-d6/d56/classcv_1_1_calibrate_debevec>`;
	class :ref:`cv::CalibrateRobertson<doxid-d8/d80/classcv_1_1_calibrate_robertson>`;
	class :ref:`cv::MergeDebevec<doxid-df/d17/classcv_1_1_merge_debevec>`;
	class :ref:`cv::MergeExposures<doxid-d2/df7/classcv_1_1_merge_exposures>`;
	class :ref:`cv::MergeMertens<doxid-df/d3e/classcv_1_1_merge_mertens>`;
	class :ref:`cv::MergeRobertson<doxid-d0/d34/classcv_1_1_merge_robertson>`;
	class :ref:`cv::Tonemap<doxid-d0/dd3/classcv_1_1_tonemap>`;
	class :ref:`cv::TonemapDrago<doxid-d0/d3d/classcv_1_1_tonemap_drago>`;
	class :ref:`cv::TonemapDurand<doxid-d8/d4e/classcv_1_1_tonemap_durand>`;
	class :ref:`cv::TonemapMantiuk<doxid-de/da3/classcv_1_1_tonemap_mantiuk>`;
	class :ref:`cv::TonemapReinhard<doxid-dc/db9/classcv_1_1_tonemap_reinhard>`;

	// global functions

	:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<:ref:`AlignMTB<doxid-d6/d15/classcv_1_1_align_m_t_b>`>
	:ref:`cv::createAlignMTB<doxid-d6/df5/group__photo__hdr_1ga2f1fafc885a5d79dbfb3542e08db0244>`(
		int max_bits = 6,
		int exclude_range = 4,
		bool cut = true
		);

	:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<:ref:`CalibrateDebevec<doxid-d6/d56/classcv_1_1_calibrate_debevec>`>
	:ref:`cv::createCalibrateDebevec<doxid-d6/df5/group__photo__hdr_1ga7fed9707ad5f2cc0e633888867109f90>`(
		int samples = 70,
		float lambda = 10.0f,
		bool random = false
		);

	:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<:ref:`CalibrateRobertson<doxid-d8/d80/classcv_1_1_calibrate_robertson>`>
	:ref:`cv::createCalibrateRobertson<doxid-d6/df5/group__photo__hdr_1gae77813a21cd351a596619e5ff013be5d>`(
		int max_iter = 30,
		float threshold = 0.01f
		);

	:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<:ref:`MergeDebevec<doxid-df/d17/classcv_1_1_merge_debevec>`>
	:ref:`cv::createMergeDebevec<doxid-d6/df5/group__photo__hdr_1gaa8eab36bc764abb2a225db7c945f87f9>`();

	:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<:ref:`MergeMertens<doxid-df/d3e/classcv_1_1_merge_mertens>`>
	:ref:`cv::createMergeMertens<doxid-d6/df5/group__photo__hdr_1ga79d59aa3cb3a7c664e59a4b5acc1ccb6>`(
		float contrast_weight = 1.0f,
		float saturation_weight = 1.0f,
		float exposure_weight = 0.0f
		);

	:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<:ref:`MergeRobertson<doxid-d0/d34/classcv_1_1_merge_robertson>`>
	:ref:`cv::createMergeRobertson<doxid-d6/df5/group__photo__hdr_1ga460d4a1df1a7e8cdcf7445bb87a8fb78>`();

	:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<:ref:`Tonemap<doxid-d0/dd3/classcv_1_1_tonemap>`>
	:ref:`cv::createTonemap<doxid-d6/df5/group__photo__hdr_1gabcbd653140b93a1fa87ccce94548cd0d>`(float gamma = 1.0f);

	:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<:ref:`TonemapDrago<doxid-d0/d3d/classcv_1_1_tonemap_drago>`>
	:ref:`cv::createTonemapDrago<doxid-d6/df5/group__photo__hdr_1ga72bf92bb6b8653ee4be650ac01cf50b6>`(
		float gamma = 1.0f,
		float saturation = 1.0f,
		float bias = 0.85f
		);

	:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<:ref:`TonemapDurand<doxid-d8/d4e/classcv_1_1_tonemap_durand>`>
	:ref:`cv::createTonemapDurand<doxid-d6/df5/group__photo__hdr_1ga19150c9a4b670437e374e51a3e865654>`(
		float gamma = 1.0f,
		float contrast = 4.0f,
		float saturation = 1.0f,
		float sigma_space = 2.0f,
		float sigma_color = 2.0f
		);

	:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<:ref:`TonemapMantiuk<doxid-de/da3/classcv_1_1_tonemap_mantiuk>`>
	:ref:`cv::createTonemapMantiuk<doxid-d6/df5/group__photo__hdr_1ga3b3f3bf083b7515802f039a6a70f2d21>`(
		float gamma = 1.0f,
		float scale = 0.7f,
		float saturation = 1.0f
		);

	:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<:ref:`TonemapReinhard<doxid-dc/db9/classcv_1_1_tonemap_reinhard>`>
	:ref:`cv::createTonemapReinhard<doxid-d6/df5/group__photo__hdr_1gadabe7f6bf1fa96ad0fd644df9182c2fb>`(
		float gamma = 1.0f,
		float intensity = 0.0f,
		float light_adapt = 1.0f,
		float color_adapt = 0.0f
		);

.. _details-d6/df5/group__photo__hdr:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

This section describes high dynamic range imaging algorithms namely tonemapping, exposure alignment, camera calibration with multiple exposures and exposure fusion.

Global Functions
----------------

.. index:: pair: function; createAlignMTB
.. _doxid-d6/df5/group__photo__hdr_1ga2f1fafc885a5d79dbfb3542e08db0244:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<:ref:`AlignMTB<doxid-d6/d15/classcv_1_1_align_m_t_b>`>
	cv::createAlignMTB(
		int max_bits = 6,
		int exclude_range = 4,
		bool cut = true
		)

Creates :ref:`AlignMTB <doxid-d6/d15/classcv_1_1_align_m_t_b>` object.



.. rubric:: Parameters:

.. list-table::
	:widths: 20 80

	*
		- max_bits

		- logarithm to the base 2 of maximal shift in each dimension. Values of 5 and 6 are usually good enough (31 and 63 pixels shift respectively).

	*
		- exclude_range

		- range for exclusion bitmap that is constructed to suppress noise around the median value.

	*
		- cut

		- if true cuts images, otherwise fills the new regions with zeros.

.. index:: pair: function; createCalibrateDebevec
.. _doxid-d6/df5/group__photo__hdr_1ga7fed9707ad5f2cc0e633888867109f90:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<:ref:`CalibrateDebevec<doxid-d6/d56/classcv_1_1_calibrate_debevec>`>
	cv::createCalibrateDebevec(
		int samples = 70,
		float lambda = 10.0f,
		bool random = false
		)

Creates :ref:`CalibrateDebevec <doxid-d6/d56/classcv_1_1_calibrate_debevec>` object.



.. rubric:: Parameters:

.. list-table::
	:widths: 20 80

	*
		- samples

		- number of pixel locations to use

	*
		- lambda

		- smoothness term weight. Greater values produce smoother results, but can alter the response.

	*
		- random

		- if true sample pixel locations are chosen at random, otherwise they form a rectangular grid.

.. index:: pair: function; createCalibrateRobertson
.. _doxid-d6/df5/group__photo__hdr_1gae77813a21cd351a596619e5ff013be5d:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<:ref:`CalibrateRobertson<doxid-d8/d80/classcv_1_1_calibrate_robertson>`>
	cv::createCalibrateRobertson(
		int max_iter = 30,
		float threshold = 0.01f
		)

Creates :ref:`CalibrateRobertson <doxid-d8/d80/classcv_1_1_calibrate_robertson>` object.



.. rubric:: Parameters:

.. list-table::
	:widths: 20 80

	*
		- max_iter

		- maximal number of Gauss-Seidel solver iterations.

	*
		- threshold

		- target difference between results of two successive steps of the minimization.

.. index:: pair: function; createMergeDebevec
.. _doxid-d6/df5/group__photo__hdr_1gaa8eab36bc764abb2a225db7c945f87f9:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<:ref:`MergeDebevec<doxid-df/d17/classcv_1_1_merge_debevec>`>
	cv::createMergeDebevec()

Creates :ref:`MergeDebevec <doxid-df/d17/classcv_1_1_merge_debevec>` object.

.. index:: pair: function; createMergeMertens
.. _doxid-d6/df5/group__photo__hdr_1ga79d59aa3cb3a7c664e59a4b5acc1ccb6:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<:ref:`MergeMertens<doxid-df/d3e/classcv_1_1_merge_mertens>`>
	cv::createMergeMertens(
		float contrast_weight = 1.0f,
		float saturation_weight = 1.0f,
		float exposure_weight = 0.0f
		)

Creates :ref:`MergeMertens <doxid-df/d3e/classcv_1_1_merge_mertens>` object.



.. rubric:: Parameters:

.. list-table::
	:widths: 20 80

	*
		- contrast_weight

		- contrast measure weight. See :ref:`MergeMertens <doxid-df/d3e/classcv_1_1_merge_mertens>`.

	*
		- saturation_weight

		- saturation measure weight

	*
		- exposure_weight

		- well-exposedness measure weight

.. index:: pair: function; createMergeRobertson
.. _doxid-d6/df5/group__photo__hdr_1ga460d4a1df1a7e8cdcf7445bb87a8fb78:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<:ref:`MergeRobertson<doxid-d0/d34/classcv_1_1_merge_robertson>`>
	cv::createMergeRobertson()

Creates :ref:`MergeRobertson <doxid-d0/d34/classcv_1_1_merge_robertson>` object.

.. index:: pair: function; createTonemap
.. _doxid-d6/df5/group__photo__hdr_1gabcbd653140b93a1fa87ccce94548cd0d:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<:ref:`Tonemap<doxid-d0/dd3/classcv_1_1_tonemap>`>
	cv::createTonemap(float gamma = 1.0f)

Creates simple linear mapper with gamma correction.



.. rubric:: Parameters:

.. list-table::
	:widths: 20 80

	*
		- gamma

		- positive value for gamma correction. Gamma value of 1.0 implies no correction, gamma equal to 2.2f is suitable for most displays. Generally gamma > 1 brightens the image and gamma < 1 darkens it.

.. index:: pair: function; createTonemapDrago
.. _doxid-d6/df5/group__photo__hdr_1ga72bf92bb6b8653ee4be650ac01cf50b6:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<:ref:`TonemapDrago<doxid-d0/d3d/classcv_1_1_tonemap_drago>`>
	cv::createTonemapDrago(
		float gamma = 1.0f,
		float saturation = 1.0f,
		float bias = 0.85f
		)

Creates :ref:`TonemapDrago <doxid-d0/d3d/classcv_1_1_tonemap_drago>` object.



.. rubric:: Parameters:

.. list-table::
	:widths: 20 80

	*
		- gamma

		- gamma value for gamma correction. See createTonemap

	*
		- saturation

		- positive saturation enhancement value. 1.0 preserves saturation, values greater than 1 increase saturation and values less than 1 decrease it.

	*
		- bias

		- value for bias function in [0, 1] range. Values from 0.7 to 0.9 usually give best results, default value is 0.85.

.. index:: pair: function; createTonemapDurand
.. _doxid-d6/df5/group__photo__hdr_1ga19150c9a4b670437e374e51a3e865654:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<:ref:`TonemapDurand<doxid-d8/d4e/classcv_1_1_tonemap_durand>`>
	cv::createTonemapDurand(
		float gamma = 1.0f,
		float contrast = 4.0f,
		float saturation = 1.0f,
		float sigma_space = 2.0f,
		float sigma_color = 2.0f
		)

Creates :ref:`TonemapDurand <doxid-d8/d4e/classcv_1_1_tonemap_durand>` object.



.. rubric:: Parameters:

.. list-table::
	:widths: 20 80

	*
		- gamma

		- gamma value for gamma correction. See createTonemap

	*
		- contrast

		- resulting contrast on logarithmic scale, i. e. log(max / min), where max and min are maximum and minimum luminance values of the resulting image.

	*
		- saturation

		- saturation enhancement value. See createTonemapDrago

	*
		- sigma_space

		- bilateral filter sigma in color space

	*
		- sigma_color

		- bilateral filter sigma in coordinate space

.. index:: pair: function; createTonemapMantiuk
.. _doxid-d6/df5/group__photo__hdr_1ga3b3f3bf083b7515802f039a6a70f2d21:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<:ref:`TonemapMantiuk<doxid-de/da3/classcv_1_1_tonemap_mantiuk>`>
	cv::createTonemapMantiuk(
		float gamma = 1.0f,
		float scale = 0.7f,
		float saturation = 1.0f
		)

Creates :ref:`TonemapMantiuk <doxid-de/da3/classcv_1_1_tonemap_mantiuk>` object.



.. rubric:: Parameters:

.. list-table::
	:widths: 20 80

	*
		- gamma

		- gamma value for gamma correction. See createTonemap

	*
		- scale

		- contrast scale factor. HVS response is multiplied by this parameter, thus compressing dynamic range. Values from 0.6 to 0.9 produce best results.

	*
		- saturation

		- saturation enhancement value. See createTonemapDrago

.. index:: pair: function; createTonemapReinhard
.. _doxid-d6/df5/group__photo__hdr_1gadabe7f6bf1fa96ad0fd644df9182c2fb:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Ptr<doxid-d2/d56/structcv_1_1_ptr>`<:ref:`TonemapReinhard<doxid-dc/db9/classcv_1_1_tonemap_reinhard>`>
	cv::createTonemapReinhard(
		float gamma = 1.0f,
		float intensity = 0.0f,
		float light_adapt = 1.0f,
		float color_adapt = 0.0f
		)

Creates :ref:`TonemapReinhard <doxid-dc/db9/classcv_1_1_tonemap_reinhard>` object.



.. rubric:: Parameters:

.. list-table::
	:widths: 20 80

	*
		- gamma

		- gamma value for gamma correction. See createTonemap

	*
		- intensity

		- result intensity in [-8, 8] range. Greater intensity produces brighter results.

	*
		- light_adapt

		- light adaptation in [0, 1] range. If 1 adaptation is based only on pixel value, if 0 it's global, otherwise it's a weighted mean of this two cases.

	*
		- color_adapt

		- chromatic adaptation in [0, 1] range. If 1 channels are treated independently, if 0 adaptation level is the same for each channel.

