
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Clustering &#8212; OpenCV Documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/doxyrest-pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/doxyrest-sphinxdoc.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="_static/target-highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="DirectX interoperability" href="group_core_directx.html" />
    <link rel="prev" title="struct IplROI" href="struct_IplROI.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="group_core_directx.html" title="DirectX interoperability"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="struct_IplROI.html" title="struct IplROI"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">OpenCV Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="group_core.html" accesskey="U">Core functionality</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Clustering</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#detailed-documentation">Detailed Documentation</a><ul>
<li><a class="reference internal" href="#global-functions">Global Functions</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="struct_IplROI.html"
                        title="previous chapter">struct IplROI</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="group_core_directx.html"
                        title="next chapter">DirectX interoperability</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="clustering">
<span id="doxid-d5-d38-group-core-cluster"></span><span id="index-0"></span><h1>Clustering</h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="overview">
<h2>Overview</h2>
<pre class="highlight doxyrest-overview-code-block literal-block">
<span></span><span class="c1">// global functions</span>

<span class="kt">double</span>
<a class="reference internal" href="#doxid-d5-d38-group-core-cluster-1ga9a34dc06c6ec9460e90860f15bcd2f88"><span class="std std-ref">cv::kmeans</span></a><span></span><span class="p">(</span>
    <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1ga353a9de602fe76c709e12074a6f362ba"><span class="std std-ref">InputArray</span></a><span></span> <span class="n">data</span><span class="p">,</span>
    <span class="kt">int</span> <span class="n">K</span><span class="p">,</span>
    <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1gaf77c9a14ef956c50c1efd4547f444e63"><span class="std std-ref">InputOutputArray</span></a><span></span> <span class="n">bestLabels</span><span class="p">,</span>
    <a class="reference internal" href="class_cv_TermCriteria.html#doxid-df-d8a-classcv-1-1-term-criteria"><span class="std std-ref">TermCriteria</span></a><span></span> <span class="n">criteria</span><span class="p">,</span>
    <span class="kt">int</span> <span class="n">attempts</span><span class="p">,</span>
    <span class="kt">int</span> <span class="n">flags</span><span class="p">,</span>
    <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1gaad17fda1d0f0d1ee069aebb1df2913c0"><span class="std std-ref">OutputArray</span></a><span></span> <span class="n">centers</span> <span class="o">=</span> <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1gad9287b23bba2fed753b36ef561ae7346"><span class="std std-ref">noArray</span></a><span></span><span class="p">()</span>
    <span class="p">);</span>

<span class="k">template</span> <span class="o">&lt;</span>
    <span class="k">typename</span> <span class="n">_Tp</span><span class="p">,</span>
    <span class="k">class</span> <span class="n">_EqPredicate</span>
    <span class="o">&gt;</span>
<span class="kt">int</span>
<a class="reference internal" href="#doxid-d5-d38-group-core-cluster-1ga2037c989e69b499c1aa271419f3a9b34"><span class="std std-ref">partition</span></a><span></span><span class="p">(</span>
    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">_Tp</span><span class="o">&gt;&amp;</span> <span class="n">_vec</span><span class="p">,</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">labels</span><span class="p">,</span>
    <span class="n">_EqPredicate</span> <span class="n">predicate</span> <span class="o">=</span> <span class="n">_EqPredicate</span><span class="p">()</span>
    <span class="p">);</span>
</pre>
</div>
<div class="section" id="detailed-documentation">
<span id="details-d5-d38-group-core-cluster"></span><h2>Detailed Documentation</h2>
<div class="section" id="global-functions">
<h3>Global Functions</h3>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-d5-d38-group-core-cluster-1ga9a34dc06c6ec9460e90860f15bcd2f88">
<span id="index-1"></span><span></span><span class="kt">double</span>
<span class="n">cv</span><span class="o">::</span><span class="n">kmeans</span><span class="p">(</span>
    <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1ga353a9de602fe76c709e12074a6f362ba"><span class="std std-ref">InputArray</span></a><span></span> <span class="n">data</span><span class="p">,</span>
    <span class="kt">int</span> <span class="n">K</span><span class="p">,</span>
    <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1gaf77c9a14ef956c50c1efd4547f444e63"><span class="std std-ref">InputOutputArray</span></a><span></span> <span class="n">bestLabels</span><span class="p">,</span>
    <a class="reference internal" href="class_cv_TermCriteria.html#doxid-df-d8a-classcv-1-1-term-criteria"><span class="std std-ref">TermCriteria</span></a><span></span> <span class="n">criteria</span><span class="p">,</span>
    <span class="kt">int</span> <span class="n">attempts</span><span class="p">,</span>
    <span class="kt">int</span> <span class="n">flags</span><span class="p">,</span>
    <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1gaad17fda1d0f0d1ee069aebb1df2913c0"><span class="std std-ref">OutputArray</span></a><span></span> <span class="n">centers</span> <span class="o">=</span> <a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1gad9287b23bba2fed753b36ef561ae7346"><span class="std std-ref">noArray</span></a><span></span><span class="p">()</span>
    <span class="p">)</span>
</pre>
<p>Finds centers of clusters and groups input samples around the clusters.</p>
<p>The function kmeans implements a k-means algorithm that finds the centers of cluster_count clusters and groups the input samples around the clusters. As an output, <span class="math notranslate nohighlight">\(\texttt{labels}_i\)</span> contains a 0-based cluster index for the sample stored in the <span class="math notranslate nohighlight">\(i^{th}\)</span> row of the samples matrix.</p>
<ul class="simple">
<li>(Python) An example on K-means clustering can be found at opencv_source_code/samples/python/kmeans.py</li>
</ul>
<p class="rubric">Parameters:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>data</td>
<td><p class="first">Data for clustering. An array of N-Dimensional points with float coordinates is needed. Examples of this array can be:</p>
<ul class="last simple">
<li><a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat"><span class="std std-ref">Mat</span></a> points(count, 2, CV_32F);</li>
<li><a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat"><span class="std std-ref">Mat</span></a> points(count, 1, CV_32FC2);</li>
<li><a class="reference internal" href="class_cv_Mat.html#doxid-db-de6-classcv-1-1-mat"><span class="std std-ref">Mat</span></a> points(1, count, CV_32FC2);</li>
<li>std::vector&lt;<a class="reference internal" href="namespace_cv.html#doxid-dc-d84-group-core-basic-1ga7d080aa40de011e4410bca63385ffe2a"><span class="std std-ref">cv::Point2f</span></a>&gt; points(sampleCount);</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>K</td>
<td>Number of clusters to split the set by.</td>
</tr>
<tr class="row-odd"><td>bestLabels</td>
<td>Input/output integer array that stores the cluster indices for every sample.</td>
</tr>
<tr class="row-even"><td>criteria</td>
<td>The algorithm termination criteria, that is, the maximum number of iterations and/or the desired accuracy. The accuracy is specified as criteria.epsilon. As soon as each of the cluster centers moves by less than criteria.epsilon on some iteration, the algorithm stops.</td>
</tr>
<tr class="row-odd"><td>attempts</td>
<td>Flag to specify the number of times the algorithm is executed using different initial labellings. The algorithm returns the labels that yield the best compactness (see the last function parameter).</td>
</tr>
<tr class="row-even"><td>flags</td>
<td>Flag that can take values of <a class="reference internal" href="enum_cv_KmeansFlags.html#doxid-d0-de1-group-core-1ga276000efe55ee2756e0c471c7b270949"><span class="std std-ref">cv::KmeansFlags</span></a></td>
</tr>
<tr class="row-odd"><td>centers</td>
<td>Output matrix of the cluster centers, one row per each cluster center.</td>
</tr>
</tbody>
</table>
<p class="rubric">Returns:</p>
<p>The function returns the compactness measure that is computed as</p>
<div class="math notranslate nohighlight">
\[\sum _i \| \texttt{samples} _i - \texttt{centers} _{ \texttt{labels} _i} \| ^2\]</div>
<p>after every attempt. The best (minimum) value is chosen and the corresponding labels and the compactness value are returned by the function. Basically, you can use only the core of the function, set the number of attempts to 1, initialize labels each time using a custom algorithm, pass them with the ( flags = KMEANS_USE_INITIAL_LABELS ) flag, and then choose the best (most-compact) clustering.</p>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-d5-d38-group-core-cluster-1ga2037c989e69b499c1aa271419f3a9b34">
<span id="index-2"></span><span></span><span class="k">template</span> <span class="o">&lt;</span>
    <span class="k">typename</span> <span class="n">_Tp</span><span class="p">,</span>
    <span class="k">class</span> <span class="n">_EqPredicate</span>
    <span class="o">&gt;</span>
<span class="kt">int</span>
<span class="n">partition</span><span class="p">(</span>
    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">_Tp</span><span class="o">&gt;&amp;</span> <span class="n">_vec</span><span class="p">,</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">labels</span><span class="p">,</span>
    <span class="n">_EqPredicate</span> <span class="n">predicate</span> <span class="o">=</span> <span class="n">_EqPredicate</span><span class="p">()</span>
    <span class="p">)</span>
</pre>
<p>Splits an element set into equivalency classes.</p>
<p>The generic function partition implements an <span class="math notranslate nohighlight">\(O(N^2)\)</span> algorithm for splitting a set of <span class="math notranslate nohighlight">\(N\)</span> elements into one or more equivalency classes, as described in <a class="reference external" href="http://en.wikipedia.org/wiki/Disjoint-set_data_structure">http://en.wikipedia.org/wiki/Disjoint-set_data_structure</a>. The function returns the number of equivalency classes.</p>
<p class="rubric">Parameters:</p>
<table border="1" class="colwidths-given docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>_vec</td>
<td>Set of elements stored as a vector.</td>
</tr>
<tr class="row-even"><td>labels</td>
<td>Output vector of labels. It contains as many elements as vec. Each label labels[i] is a 0-based cluster index of <code class="docutils literal notranslate"><span class="pre">vec[i]</span></code>.</td>
</tr>
<tr class="row-odd"><td>predicate</td>
<td>Equivalence predicate (pointer to a boolean function of two arguments or an instance of the class that has the method bool operator()(const _Tp&amp; a, const _Tp&amp; b) ). The predicate returns true when the elements are certainly in the same class, and returns false if they may or may not be in the same class.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="group_core_directx.html" title="DirectX interoperability"
             >next</a> |</li>
        <li class="right" >
          <a href="struct_IplROI.html" title="struct IplROI"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">OpenCV Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="group_core.html" >Core functionality</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 1999-2017, OpenCV Maintainers.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>