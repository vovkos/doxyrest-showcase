
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Introduction into Android Development &#8212; OpenCV Documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/doxyrest-pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/doxyrest-sphinxdoc.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="_static/target-highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Introduction to Java Development" href="page_tutorial_java_dev_intro.html" />
    <link rel="prev" title="Installation in iOS" href="page_tutorial_ios_install.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="page_tutorial_java_dev_intro.html" title="Introduction to Java Development"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="page_tutorial_ios_install.html" title="Installation in iOS"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">OpenCV Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="page_tutorial_root.html" >OpenCV Tutorials</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="page_tutorial_table_of_content_introduction.html" accesskey="U">Introduction to OpenCV</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="page_tutorial_ios_install.html"
                        title="previous chapter">Installation in iOS</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="page_tutorial_java_dev_intro.html"
                        title="next chapter">Introduction to Java Development</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="introduction-into-android-development">
<span id="doxid-d9-d3f-tutorial-android-dev-intro"></span><span id="index-0"></span><h1>Introduction into Android Development</h1>
<p>This guide was designed to help you in learning Android development basics and setting up your working environment quickly. It was written with Windows 7 in mind, though it would work with Linux (Ubuntu), Mac OS X and any other OS supported by Android SDK.</p>
<p>If you encounter any error after thoroughly following these steps, feel free to contact us via <a class="reference external" href="https://groups.google.com/group/android-opencv/">OpenCV4Android</a> discussion group or OpenCV <a class="reference external" href="http://answers.opencv.org">Q&amp;A forum</a>. We’ll do our best to help you out.</p>
<p class="rubric">Preface</p>
<p>Android is a Linux-based, open source mobile operating system developed by Open Handset Alliance led by Google. See the <a class="reference external" href="http://www.android.com/about/">Android home site</a> for general details.</p>
<p>Development for Android significantly differs from development for other platforms. So before starting programming for Android we recommend you make sure that you are familiar with the following key topis:</p>
<ol class="arabic simple">
<li><a class="reference external" href="http://en.wikipedia.org/wiki/Java_(programming_language)">Java</a> programming language that is the primary development technology for Android OS. Also, you can find <a class="reference external" href="http://docs.oracle.com/javase/">Oracle docs on Java</a> useful.</li>
<li><a class="reference external" href="http://en.wikipedia.org/wiki/Java_Native_Interface">Java Native Interface (JNI)</a> that is a technology of running native code in Java virtual machine. Also, you can find <a class="reference external" href="http://docs.oracle.com/javase/7/docs/technotes/guides/jni/">Oracle docs on JNI</a> useful.</li>
<li><a class="reference external" href="http://developer.android.com/training/basics/activity-lifecycle/starting.html">Android Activity</a> and its lifecycle, that is an essential Android API class.</li>
<li>OpenCV development will certainly require some knowlege of the <a class="reference external" href="http://developer.android.com/guide/topics/media/camera.html">Android Camera</a> specifics.</li>
</ol>
<p class="rubric">Quick environment setup for Android development</p>
<p>If you are making a clean environment install, then you can try <a class="reference external" href="https://developer.nvidia.com/tegra-android-development-pack">Tegra Android Development Pack</a> (<strong>TADP</strong>) released by <strong>NVIDIA</strong>.</p>
<p>Starting the <em>version 2.0</em> the TADP package includes <em>OpenCV for Tegra</em> SDK that is a regular <em>OpenCV4Android SDK</em> extended with Tegra-specific stuff. When unpacked, TADP will cover all of the environment setup automatically and you can skip the rest of the guide.</p>
<p>If you are a beginner in Android development then we also recommend you to start with TADP.</p>
<p><em>NVIDIA</em> ‘s Tegra Android Development Pack includes some special features for NVIDIA*’s <a class="reference external" href="http://www.nvidia.com/object/tegra-3-processor.html">Tegra platform</a> but its use is not limited to *Tegra devices only. * You need at least <em>1.6 Gb</em> free disk space for the install.</p>
<ul class="simple">
<li>TADP will download Android SDK platforms and Android NDK from Google’s server, so Internet connection is required for the installation.</li>
<li>TADP may ask you to flash your development kit at the end of installation process. Just skip this step if you have no <a class="reference external" href="http://developer.nvidia.com/mobile/tegra-hardware-sales-inquiries">Tegra Development Kit</a>.</li>
<li>(UNIX) TADP will ask you for <em>root</em> in the middle of installation, so you need to be a member of <em>sudo</em> group.</li>
</ul>
<p class="rubric">Manual environment setup for Android development</p>
<p class="rubric">Development in Java</p>
<p>You need the following software to be installed in order to develop for Android in Java:</p>
<ol class="arabic">
<li><p class="first"><strong>Sun JDK 6</strong> (Sun JDK 7 is also possible)</p>
<p>Visit <a class="reference external" href="http://www.oracle.com/technetwork/java/javase/downloads/">Java SE Downloads page</a> and download an installer for your OS.</p>
<p>Here is a detailed JDK (Java Development Kit) <a class="reference external" href="http://source.android.com/source/initializing.html#installing-the-jdk">installation guide</a> for Ubuntu and Mac OS (only JDK sections are applicable for OpenCV)</p>
<p>OpenJDK is not suitable for Android development, since Android SDK supports only Sun JDK. If you use Ubuntu, after installation of Sun JDK you should run the following command to set Sun java environment:</p>
<pre class="highlight literal-block">
<span></span><span class="n">sudo</span> <span class="n">update</span><span class="o">-</span><span class="n">java</span><span class="o">-</span><span class="n">alternatives</span> <span class="o">--</span><span class="n">set</span> <span class="n">java</span><span class="o">-</span><span class="mi">6</span><span class="o">-</span><span class="n">sun</span>
</pre>
</li>
<li><p class="first"><strong>Android SDK</strong></p>
<p>Get the latest Android SDK from <a class="reference external" href="http://developer.android.com/sdk/index.html">http://developer.android.com/sdk/index.html</a></p>
<p>Here is Google’s <a class="reference external" href="http://developer.android.com/sdk/installing.html">install guide</a> for the SDK.</p>
<p>You can choose downloading <strong>ADT Bundle package</strong> that in addition to Android SDK Tools includes Eclipse + ADT + NDK/CDT plugins, Android Platform-tools, the latest Android platform and the latest Android system image for the emulator - this is the best choice for those who is setting up Android development environment the first time!</p>
<p>If you are running x64 version of Ubuntu Linux, then you need ia32 shared libraries for use on amd64 and ia64 systems to be installed. You can install them with the following command:</p>
<pre class="highlight literal-block">
<span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">ia32</span><span class="o">-</span><span class="n">libs</span>
</pre>
<p>For Red Hat based systems the following command might be helpful:</p>
<pre class="highlight literal-block">
<span></span><span class="n">sudo</span> <span class="n">yum</span> <span class="n">install</span> <span class="n">libXtst</span><span class="p">.</span><span class="n">i386</span>
</pre>
</li>
<li><p class="first"><strong>Android SDK components</strong></p>
<p>You need the following SDK components to be installed:</p>
<ul>
<li><p class="first"><em>Android SDK Tools, revision 20</em> or newer.</p>
<p>Older revisions should also work, but they are not recommended.</p>
</li>
<li><p class="first"><em>SDK Platform Android 3.0</em> (API 11).</p>
<p>The minimal platform supported by OpenCV Java API is <strong>Android 2.2</strong> (API 8). This is also the minimum API Level required for the provided samples to run. See the &lt;uses-sdk android:minSdkVersion=”8”/&gt; tag in their <strong>AndroidManifest.xml</strong> files. But for successful compilation the <strong>target</strong> platform should be set to Android 3.0 (API 11) or higher. It will not prevent them from running on Android 2.2.</p>
<img alt="_images/android_sdk_and_avd_manager.png" src="_images/android_sdk_and_avd_manager.png" />
<p>See <a class="reference external" href="http://developer.android.com/sdk/installing/adding-packages.html">Adding Platforms and Packages</a> for help with installing/updating SDK components.</p>
</li>
</ul>
</li>
<li><p class="first"><strong>Eclipse IDE</strong></p>
<p>Check the <a class="reference external" href="http://developer.android.com/sdk/requirements.html">Android SDK System Requirements</a> document for a list of Eclipse versions that are compatible with the Android SDK. For OpenCV 2.4.x we recommend <strong>Eclipse 3.7 (Indigo)</strong> or <strong>Eclipse 4.2 (Juno)</strong>. They work well for OpenCV under both Windows and Linux.</p>
<p>If you have no Eclipse installed, you can get it from the <a class="reference external" href="http://www.eclipse.org/downloads/">official site</a>.</p>
</li>
<li><p class="first"><strong>ADT plugin for Eclipse</strong></p>
<p>These instructions are copied from <a class="reference external" href="http://developer.android.com/sdk/installing/installing-adt.html">Android Developers site</a>, check it out in case of any ADT-related problem.</p>
<p>Assuming that you have Eclipse IDE installed, as described above, follow these steps to download and install the ADT plugin:</p>
<ol class="arabic">
<li><p class="first">Start Eclipse, then select Help&gt; Install New Software…</p>
</li>
<li><p class="first">Click Add (in the top-right corner).</p>
</li>
<li><p class="first">In the Add Repository dialog that appears, enter “ADT Plugin” for the Name and the following URL for the Location: <a class="reference external" href="https://dl-ssl.google.com/android/eclipse/">https://dl-ssl.google.com/android/eclipse/</a></p>
</li>
<li><p class="first">Click OK</p>
<p>If you have trouble acquiring the plugin, try using “http” in the Location URL, instead of “https” (https is preferred for security reasons).</p>
</li>
<li><p class="first">In the Available Software dialog, select the checkbox next to Developer Tools and click Next.</p>
</li>
<li><p class="first">In the next window, you’ll see a list of the tools to be downloaded. Click Next.</p>
<p>If you also plan to develop native C++ code with Android NDK don’t forget to enable NDK Plugins installations as well.</p>
<img alt="_images/eclipse_inst_adt.png" src="_images/eclipse_inst_adt.png" />
</li>
<li><p class="first">Read and accept the license agreements, then click Finish.</p>
<p>If you get a security warning saying that the authenticity or validity of the software can’t be established, click OK.</p>
</li>
<li><p class="first">When the installation completes, restart Eclipse.</p>
</li>
</ol>
</li>
</ol>
<p class="rubric">Native development in C++</p>
<p>You need the following software to be installed in order to develop for Android in C++:</p>
<ol class="arabic">
<li><p class="first"><strong>Android NDK</strong></p>
<p>To compile C++ code for Android platform you need Android Native Development Kit (<em>NDK</em>).</p>
<p>You can get the latest version of NDK from the <a class="reference external" href="http://developer.android.com/tools/sdk/ndk/index.html">download page</a>. To install Android NDK just extract the archive to some folder on your computer. Here are <a class="reference external" href="http://developer.android.com/tools/sdk/ndk/index.html#Installing">installation instructions</a>.</p>
<p>Before start you can read official Android NDK documentation which is in the Android NDK archive, in the folder <code class="docutils literal notranslate"><span class="pre">docs/</span></code>. The main article about using Android NDK build system is in the <code class="docutils literal notranslate"><span class="pre">ANDROID-MK.html</span></code> file. Some additional information you can find in the <code class="docutils literal notranslate"><span class="pre">APPLICATION-MK.html</span></code>, <code class="docutils literal notranslate"><span class="pre">NDK-BUILD.html</span></code> files, and <code class="docutils literal notranslate"><span class="pre">CPU-ARM-NEON.html</span></code>, <code class="docutils literal notranslate"><span class="pre">CPLUSPLUS-SUPPORT.html</span></code>, <code class="docutils literal notranslate"><span class="pre">PREBUILTS.html</span></code>.</p>
</li>
<li><p class="first"><strong>CDT plugin for Eclipse</strong></p>
<p>If you selected for installation the NDK plugins component of Eclipse ADT plugin (see the picture above) your Eclipse IDE should already have CDT plugin (that means C/C++ Development Tooling). There are several possible ways to integrate compilation of C++ code by Android NDK into Eclipse compilation process. We recommend the approach based on Eclipse CDT(C/C++ Development Tooling) Builder.</p>
</li>
</ol>
<p class="rubric">Android application structure</p>
<p>Usually source code of an Android application has the following structure:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">root</span> <span class="pre">folder</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">project/</span></code><ul>
<li><code class="docutils literal notranslate"><span class="pre">jni/</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">libs/</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">res/</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">src/</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">AndroidManifest.xml</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">project.properties</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">...</span> <span class="pre">other</span> <span class="pre">files</span> <span class="pre">...</span></code></li>
</ul>
</li>
</ul>
<p>Where:</p>
<ul>
<li><p class="first">the <code class="docutils literal notranslate"><span class="pre">src</span></code> folder contains Java code of the application,</p>
</li>
<li><p class="first">the <code class="docutils literal notranslate"><span class="pre">res</span></code> folder contains resources of the application (images, xml files describing UI layout, etc),</p>
</li>
<li><p class="first">the <code class="docutils literal notranslate"><span class="pre">libs</span></code> folder will contain native libraries after a successful build,</p>
</li>
<li><p class="first">and the <code class="docutils literal notranslate"><span class="pre">jni</span></code> folder contains C/C++ application source code and NDK’s build scripts <code class="docutils literal notranslate"><span class="pre">Android.mk</span></code> and <code class="docutils literal notranslate"><span class="pre">Application.mk</span></code> producing the native libraries,</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">AndroidManifest.xml</span></code> file presents essential information about application to the Android system (name of the Application, name of main application’s package, components of the application, required permissions, etc).</p>
<p>It can be created using Eclipse wizard or android tool from Android SDK.</p>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">project.properties</span></code> is a text file containing information about target Android platform and other build details. This file is generated by Eclipse or can be created with android tool included in Android SDK.</p>
</li>
</ul>
<p>Both <code class="docutils literal notranslate"><span class="pre">AndroidManifest.xml</span></code> and <code class="docutils literal notranslate"><span class="pre">project.properties</span></code> files are required to compile the C++ part of the application, since Android NDK build system relies on them. If any of these files does not exist, compile the Java part of the project before the C++ part.</p>
<p class="rubric">and  scripts</p>
<p>The script <code class="docutils literal notranslate"><span class="pre">Android.mk</span></code> usually has the following structure:</p>
<pre class="highlight literal-block">
<span></span><span class="nl">LOCAL_PATH</span> <span class="p">:</span><span class="o">=</span> <span class="err">\</span><span class="n">f</span><span class="err">$</span><span class="p">(</span><span class="n">call</span> <span class="n">my</span><span class="o">-</span><span class="n">dir</span><span class="p">)</span>

<span class="n">include</span> <span class="err">\</span><span class="n">f</span><span class="err">$</span><span class="p">(</span><span class="n">CLEAR_VARS</span><span class="p">)</span>
<span class="nl">LOCAL_MODULE</span>    <span class="p">:</span><span class="o">=</span> <span class="o">&lt;</span><span class="n">module_name</span><span class="o">&gt;</span>
<span class="nl">LOCAL_SRC_FILES</span> <span class="p">:</span><span class="o">=</span> <span class="o">&lt;</span><span class="n">list</span> <span class="n">of</span> <span class="p">.</span><span class="n">c</span> <span class="n">and</span> <span class="p">.</span><span class="n">cpp</span> <span class="n">project</span> <span class="n">files</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">some</span> <span class="n">variable</span> <span class="n">name</span><span class="o">&gt;</span> <span class="o">:=</span> <span class="o">&lt;</span><span class="n">some</span> <span class="n">variable</span> <span class="n">value</span><span class="o">&gt;</span>
<span class="p">...</span>
<span class="o">&lt;</span><span class="n">some</span> <span class="n">variable</span> <span class="n">name</span><span class="o">&gt;</span> <span class="o">:=</span> <span class="o">&lt;</span><span class="n">some</span> <span class="n">variable</span> <span class="n">value</span><span class="o">&gt;</span>

<span class="n">include</span> <span class="err">\</span><span class="n">f</span><span class="err">$</span><span class="p">(</span><span class="n">BUILD_SHARED_LIBRARY</span><span class="p">)</span>
</pre>
<p>This is the minimal file <code class="docutils literal notranslate"><span class="pre">Android.mk</span></code>, which builds C++ source code of an Android application. Note that the first two lines and the last line are mandatory for any <code class="docutils literal notranslate"><span class="pre">Android.mk</span></code>.</p>
<p>Usually the file <code class="docutils literal notranslate"><span class="pre">Application.mk</span></code> is optional, but in case of project using OpenCV, when STL and exceptions are used in C++, it also should be created. Example of the file <code class="docutils literal notranslate"><span class="pre">Application.mk</span></code> :</p>
<pre class="highlight literal-block">
<span></span><span class="nl">APP_STL</span> <span class="p">:</span><span class="o">=</span> <span class="n">gnustl_static</span>
<span class="nl">APP_CPPFLAGS</span> <span class="p">:</span><span class="o">=</span> <span class="o">-</span><span class="n">frtti</span> <span class="o">-</span><span class="n">fexceptions</span>
<span class="nl">APP_ABI</span> <span class="p">:</span><span class="o">=</span> <span class="n">all</span>
</pre>
<p>We recommend setting APP_ABI := all for all targets. If you want to specify the target explicitly, use armeabi for ARMv5/ARMv6, armeabi-v7a for ARMv7, x86 for Intel Atom or mips for MIPS.</p>
<p><span class="target" id="doxid-d9-d3f-tutorial-android-dev-intro-1tutorial-android-dev-intro-ndk"></span></p>
<p class="rubric">Building application native part from command line</p>
<p>Here is the standard way to compile C++ part of an Android application:</p>
<p><strong>warning</strong></p>
<p>We strongly reccomend using cmd.exe (standard Windows console) instead of Cygwin on <strong>Windows</strong>. Use the latter if only you’re absolutely sure about, what you’re doing. Cygwin is not really supported and we are unlikely to help you in case you encounter some problems with it. So, use it only if you’re capable of handling the consequences yourself.</p>
<ol class="arabic">
<li><p class="first">Open console and go to the root folder of an Android application</p>
<pre class="highlight literal-block">
<span></span><span class="n">cd</span> <span class="o">&lt;</span><span class="n">root</span> <span class="n">folder</span> <span class="n">of</span> <span class="n">the</span> <span class="n">project</span><span class="o">&gt;/</span>
</pre>
</li>
<li><p class="first">Run the following command</p>
<pre class="highlight literal-block">
<span></span><span class="o">&lt;</span><span class="n">path_where_NDK_is_placed</span><span class="o">&gt;/</span><span class="n">ndk</span><span class="o">-</span><span class="n">build</span>
</pre>
<p>On Windows we recommend to use ndk-build.cmd in standard Windows console (cmd.exe) rather than the similar bash script in Cygwin shell.</p>
<img alt="_images/ndk_build.png" src="_images/ndk_build.png" />
</li>
<li><p class="first">After executing this command the C++ part of the source code is compiled.</p>
</li>
</ol>
<p>After that the Java part of the application can be (re)compiled (using either <em>Eclipse</em> or <em>Ant</em> build tool).</p>
<p>Some parameters can be set for the ndk-build: <strong>Example 1</strong> : Verbose compilation</p>
<pre class="highlight literal-block">
<span></span><span class="o">&lt;</span><span class="n">path_where_NDK_is_placed</span><span class="o">&gt;/</span><span class="n">ndk</span><span class="o">-</span><span class="n">build</span> <span class="n">V</span><span class="o">=</span><span class="mi">1</span>
</pre>
<p><strong>Example 2</strong> : Rebuild all</p>
<pre class="highlight literal-block">
<span></span><span class="o">&lt;</span><span class="n">path_where_NDK_is_placed</span><span class="o">&gt;/</span><span class="n">ndk</span><span class="o">-</span><span class="n">build</span> <span class="o">-</span><span class="n">B</span>
</pre>
<p><span class="target" id="doxid-d9-d3f-tutorial-android-dev-intro-1tutorial-android-dev-intro-eclipse"></span></p>
<p class="rubric">Building application native part from  (CDT Builder)</p>
<p>There are several possible ways to integrate compilation of native C++ code by Android NDK into Eclipse build process. We recommend the approach based on Eclipse CDT(C/C++ Development Tooling) Builder.</p>
<p><strong>important</strong></p>
<p>OpenCV for Android package since version 2.4.2 contains sample projects pre-configured CDT Builders. For your own projects follow the steps below.</p>
<ol class="arabic">
<li><p class="first">Define the NDKROOT environment variable containing the path to Android NDK in your system (e.g. “X:\Apps\android-ndk-r8” or “/opt/android-ndk-r8”).</p>
<p><strong>On Windows</strong> an environment variable can be set via My Computer -&gt; Properties -&gt; Advanced -&gt; Environment variables. On Windows 7 it’s also possible to use <a class="reference external" href="http://ss64.com/nt/setx.html">setx</a> command in a console session.</p>
<p><strong>On Linux</strong> and <strong>MacOS</strong> an environment variable can be set via appending a “export VAR_NAME=VAR_VALUE” line to the <code class="docutils literal notranslate"><span class="pre">&quot;~/.bashrc&quot;</span></code> file and logging off and then on.</p>
<p>It’s also possible to define the NDKROOT environment variable within Eclipse IDE, but it should be done for every new workspace you create. If you prefer this option better than setting system environment variable, open Eclipse menu Window -&gt; Preferences -&gt; C/C++ -&gt; Build -&gt; Environment, press the Add… button and set variable name to NDKROOT and value to local Android NDK path. #. After that you need to <strong>restart Eclipse</strong> to apply the changes.</p>
</li>
<li><p class="first">Open Eclipse and load the Android app project to configure.</p>
</li>
<li><p class="first">Add C/C++ Nature to the project via Eclipse menu New -&gt; Other -&gt; C/C++ -&gt; Convert to a C/C++ Project.</p>
<img alt="_images/eclipse_cdt_cfg1.png" src="_images/eclipse_cdt_cfg1.png" />
<p>And:</p>
<img alt="_images/eclipse_cdt_cfg2.png" src="_images/eclipse_cdt_cfg2.png" />
</li>
<li><p class="first">Select the project(s) to convert. Specify “Project type” = Makefile project, “Toolchains” = Other Toolchain.</p>
<img alt="_images/eclipse_cdt_cfg3.png" src="_images/eclipse_cdt_cfg3.png" />
</li>
<li><dl class="first docutils">
<dt>Open Project Properties -&gt; C/C++ Build, uncheck Use default build command, replace “Build</dt>
<dd><p class="first last">command” text from “make” to</p>
</dd>
</dl>
<p>“${NDKROOT}/ndk-build.cmd” on Windows,</p>
<p>“${NDKROOT}/ndk-build” on Linux and MacOS.</p>
<img alt="_images/eclipse_cdt_cfg4.png" src="_images/eclipse_cdt_cfg4.png" />
</li>
<li><p class="first">Go to Behaviour tab and change “Workbench build type” section like shown below:</p>
<img alt="_images/eclipse_cdt_cfg5.png" src="_images/eclipse_cdt_cfg5.png" />
</li>
<li><p class="first">Press OK and make sure the ndk-build is successfully invoked when building the project.</p>
<img alt="_images/eclipse_cdt_cfg6.png" src="_images/eclipse_cdt_cfg6.png" />
</li>
<li><p class="first">If you open your C++ source file in Eclipse editor, you’ll see syntax error notifications. They are not real errors, but additional CDT configuring is required.</p>
<img alt="_images/eclipse_cdt_cfg7.png" src="_images/eclipse_cdt_cfg7.png" />
</li>
<li><p class="first">Open Project Properties -&gt; C/C++ General -&gt; Paths and Symbols and add the following <strong>Include</strong> paths for **C++**:</p>
<pre class="highlight literal-block">
<span></span><span class="cp"># for NDK r8 and prior:</span>
<span class="err">$</span><span class="p">{</span><span class="n">NDKROOT</span><span class="p">}</span><span class="o">/</span><span class="n">platforms</span><span class="o">/</span><span class="n">android</span><span class="o">-</span><span class="mi">9</span><span class="o">/</span><span class="n">arch</span><span class="o">-</span><span class="n">arm</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">include</span>
<span class="err">$</span><span class="p">{</span><span class="n">NDKROOT</span><span class="p">}</span><span class="o">/</span><span class="n">sources</span><span class="o">/</span><span class="n">cxx</span><span class="o">-</span><span class="n">stl</span><span class="o">/</span><span class="n">gnu</span><span class="o">-</span><span class="n">libstdc</span><span class="o">++/</span><span class="n">include</span>
<span class="err">$</span><span class="p">{</span><span class="n">NDKROOT</span><span class="p">}</span><span class="o">/</span><span class="n">sources</span><span class="o">/</span><span class="n">cxx</span><span class="o">-</span><span class="n">stl</span><span class="o">/</span><span class="n">gnu</span><span class="o">-</span><span class="n">libstdc</span><span class="o">++/</span><span class="n">libs</span><span class="o">/</span><span class="n">armeabi</span><span class="o">-</span><span class="n">v7a</span><span class="o">/</span><span class="n">include</span>
<span class="err">$</span><span class="p">{</span><span class="n">ProjDirPath</span><span class="p">}</span><span class="o">/</span><span class="p">..</span><span class="o">/</span><span class="p">..</span><span class="o">/</span><span class="n">sdk</span><span class="o">/</span><span class="n">native</span><span class="o">/</span><span class="n">jni</span><span class="o">/</span><span class="n">include</span>

<span class="cp"># for NDK r8b and later:</span>
<span class="err">$</span><span class="p">{</span><span class="n">NDKROOT</span><span class="p">}</span><span class="o">/</span><span class="n">platforms</span><span class="o">/</span><span class="n">android</span><span class="o">-</span><span class="mi">9</span><span class="o">/</span><span class="n">arch</span><span class="o">-</span><span class="n">arm</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">include</span>
<span class="err">$</span><span class="p">{</span><span class="n">NDKROOT</span><span class="p">}</span><span class="o">/</span><span class="n">sources</span><span class="o">/</span><span class="n">cxx</span><span class="o">-</span><span class="n">stl</span><span class="o">/</span><span class="n">gnu</span><span class="o">-</span><span class="n">libstdc</span><span class="o">++/</span><span class="mf">4.6</span><span class="o">/</span><span class="n">include</span>
<span class="err">$</span><span class="p">{</span><span class="n">NDKROOT</span><span class="p">}</span><span class="o">/</span><span class="n">sources</span><span class="o">/</span><span class="n">cxx</span><span class="o">-</span><span class="n">stl</span><span class="o">/</span><span class="n">gnu</span><span class="o">-</span><span class="n">libstdc</span><span class="o">++/</span><span class="mf">4.6</span><span class="o">/</span><span class="n">libs</span><span class="o">/</span><span class="n">armeabi</span><span class="o">-</span><span class="n">v7a</span><span class="o">/</span><span class="n">include</span>
<span class="err">$</span><span class="p">{</span><span class="n">ProjDirPath</span><span class="p">}</span><span class="o">/</span><span class="p">..</span><span class="o">/</span><span class="p">..</span><span class="o">/</span><span class="n">sdk</span><span class="o">/</span><span class="n">native</span><span class="o">/</span><span class="n">jni</span><span class="o">/</span><span class="n">include</span>
</pre>
<p>The last path should be changed to the correct absolute or relative path to OpenCV4Android SDK location.</p>
<p>This should clear the syntax error notifications in Eclipse C++ editor.</p>
<img alt="_images/eclipse_cdt_cfg8.png" src="_images/eclipse_cdt_cfg8.png" />
</li>
</ol>
<p class="rubric">Debugging and Testing</p>
<p>In this section we will give you some easy-to-follow instructions on how to set up an emulator or hardware device for testing and debugging an Android project.</p>
<p class="rubric">AVD</p>
<p>AVD (<em>Android Virtual Device</em>) is not probably the most convenient way to test an OpenCV-dependent application, but sure the most uncomplicated one to configure.</p>
<ol class="arabic">
<li><p class="first">Assuming you already have <em>Android SDK</em> and <em>Eclipse IDE</em> installed, in Eclipse go Window -&gt; AVD Manager.</p>
</li>
<li><p class="first">Press the New button in AVD Manager window.</p>
</li>
<li><p class="first">Create new Android Virtual Device window will let you select some properties for your new device, like target API level, size of SD-card and other.</p>
<img alt="_images/AVD_create.png" src="_images/AVD_create.png" />
</li>
<li><p class="first">When you click the Create AVD button, your new AVD will be availible in AVD Manager.</p>
</li>
<li><p class="first">Press Start to launch the device. Be aware that any AVD (a.k.a. Emulator) is usually much slower than a hardware Android device, so it may take up to several minutes to start.</p>
</li>
<li><p class="first">Go Run -&gt; Run/Debug in Eclipse IDE to run your application in regular or debugging mode. Device Chooser will let you choose among the running devices or to start a new one.</p>
</li>
</ol>
<p class="rubric">Hardware Device</p>
<p>If you have an Android device, you can use it to test and debug your applications. This way is more authentic, though a little bit harder to set up. You need to make some actions for Windows and Linux operating systems to be able to work with Android devices. No extra actions are required for Mac OS. See detailed information on configuring hardware devices in subsections below.</p>
<p>You may also consult the official <a class="reference external" href="http://developer.android.com/tools/device.html">Android Developers site instructions</a> for more information.</p>
<p class="rubric">Windows host computer</p>
<ol class="arabic">
<li><p class="first">Enable USB debugging on the Android device (via Settings menu).</p>
</li>
<li><p class="first">Attach the Android device to your PC with a USB cable.</p>
</li>
<li><p class="first">Go to Start Menu and <strong>right-click</strong> on Computer. Select Manage in the context menu. You may be asked for Administrative permissions.</p>
</li>
<li><p class="first">Select Device Manager in the left pane and find an unknown device in the list. You may try unplugging it and then plugging back in order to check whether it’s your exact equipment appears in the list.</p>
<img alt="_images/usb_device_connect_01.png" src="_images/usb_device_connect_01.png" />
</li>
<li><p class="first">Try your luck installing Google USB drivers without any modifications: <strong>right-click</strong> on the unknown device, select Properties menu item&gt; Details tab&gt; Update Driver button.</p>
<img alt="_images/usb_device_connect_05.png" src="_images/usb_device_connect_05.png" />
</li>
<li><p class="first">Select Browse computer for driver software.</p>
<img alt="_images/usb_device_connect_06.png" src="_images/usb_device_connect_06.png" />
</li>
<li><p class="first">Specify the path to <code class="docutils literal notranslate"><span class="pre">&lt;Android</span> <span class="pre">SDK</span> <span class="pre">folder&gt;/extras/google/usb_driver/</span></code> folder.</p>
<img alt="_images/usb_device_connect_07.png" src="_images/usb_device_connect_07.png" />
</li>
<li><p class="first">If you get the prompt to install unverified drivers and report about success - you’ve finished with USB driver installation.</p>
<img alt="_images/usb_device_connect_08.png" src="_images/usb_device_connect_08.png" />
<img alt="_images/usb_device_connect_09.png" src="_images/usb_device_connect_09.png" />
</li>
<li><p class="first">Otherwise (getting the failure like shown below) follow the next steps.</p>
<img alt="_images/usb_device_connect_12.png" src="_images/usb_device_connect_12.png" />
</li>
<li><p class="first">Again <strong>right-click</strong> on the unknown device, select Properties&gt; Details&gt; Hardware Ids and copy the line like <code class="docutils literal notranslate"><span class="pre">USB\VID_XXXX&amp;PID_XXXX&amp;MI_XX</span></code>.</p>
<img alt="_images/usb_device_connect_02.png" src="_images/usb_device_connect_02.png" />
</li>
<li><p class="first">Now open file <code class="docutils literal notranslate"><span class="pre">&lt;Android</span> <span class="pre">SDK</span> <span class="pre">folder&gt;/extras/google/usb_driver/android_winusb.inf</span></code>. Select either Google.NTx86 or Google.NTamd64 section depending on your host system architecture.</p>
<img alt="_images/usb_device_connect_03.png" src="_images/usb_device_connect_03.png" />
</li>
<li><p class="first">There should be a record like existing ones for your device and you need to add one manually.</p>
<img alt="_images/usb_device_connect_04.png" src="_images/usb_device_connect_04.png" />
</li>
<li><p class="first">Save the <code class="docutils literal notranslate"><span class="pre">android_winusb.inf</span></code> file and try to install the USB driver again.</p>
<img alt="_images/usb_device_connect_05.png" src="_images/usb_device_connect_05.png" />
<img alt="_images/usb_device_connect_06.png" src="_images/usb_device_connect_06.png" />
<img alt="_images/usb_device_connect_07.png" src="_images/usb_device_connect_07.png" />
</li>
<li><p class="first">This time installation should go successfully.</p>
<img alt="_images/usb_device_connect_08.png" src="_images/usb_device_connect_08.png" />
<img alt="_images/usb_device_connect_09.png" src="_images/usb_device_connect_09.png" />
</li>
<li><p class="first">And an unknown device is now recognized as an Android phone.</p>
<img alt="_images/usb_device_connect_10.png" src="_images/usb_device_connect_10.png" />
</li>
<li><p class="first">Successful device USB connection can be verified in console via adb devices command.</p>
<img alt="_images/usb_device_connect_11.png" src="_images/usb_device_connect_11.png" />
</li>
<li><p class="first">Now, in Eclipse go Run -&gt; Run/Debug to run your application in regular or debugging mode. Device Chooser will let you choose among the devices.</p>
</li>
</ol>
<p class="rubric">Linux host computer</p>
<p>By default Linux doesn’t recognize Android devices, but it’s easy to fix this issue. On Ubuntu Linux you have to create a new **/etc/udev/rules.d/51-android.rules** configuration file that contains information about your Android device. You may find some Vendor ID’s <a class="reference external" href="http://developer.android.com/tools/device.html#VendorIds">here</a> or execute lsusb command to view VendorID of plugged Android device. Here is an example of such file for LG device:</p>
<pre class="highlight literal-block">
<span></span><span class="n">SUBSYSTEM</span><span class="o">==</span><span class="s">&quot;usb&quot;</span><span class="p">,</span> <span class="n">ATTR</span><span class="p">{</span><span class="n">idVendor</span><span class="p">}</span><span class="o">==</span><span class="s">&quot;1004&quot;</span><span class="p">,</span>  <span class="n">MODE</span><span class="o">=</span><span class="s">&quot;0666&quot;</span><span class="p">,</span> <span class="n">GROUP</span><span class="o">=</span><span class="s">&quot;plugdev&quot;</span>
</pre>
<p>Then restart your adb server (even better to restart the system), plug in your Android device and execute adb devices command. You will see the list of attached devices:</p>
<img alt="_images/usb_device_connect_ubuntu.png" src="_images/usb_device_connect_ubuntu.png" />
<p class="rubric">Mac OS host computer</p>
<p>No actions are required, just connect your device via USB and run adb devices to check connection.</p>
<p class="rubric">What’s next</p>
<p>Now, when you have your development environment set up and configured, you may want to proceed to installing OpenCV4Android SDK. You can learn how to do that in a separate <a class="reference internal" href="page_tutorial_O4A_SDK.html#doxid-d9-da6-tutorial-o4-a-s-d-k"><span class="std std-ref">OpenCV4Android SDK</span></a> tutorial.</p>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="page_tutorial_java_dev_intro.html" title="Introduction to Java Development"
             >next</a> |</li>
        <li class="right" >
          <a href="page_tutorial_ios_install.html" title="Installation in iOS"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">OpenCV Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="page_tutorial_root.html" >OpenCV Tutorials</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="page_tutorial_table_of_content_introduction.html" >Introduction to OpenCV</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 1999-2017, OpenCV Maintainers.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>