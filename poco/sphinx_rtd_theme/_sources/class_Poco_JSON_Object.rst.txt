.. index:: pair: class; Poco::JSON::Object
.. _doxid-class_poco_1_1_j_s_o_n_1_1_object:

class Poco::JSON::Object
========================

.. toctree::
	:hidden:

Overview
~~~~~~~~

Represents a :ref:`JSON <doxid-namespace_poco_1_1_j_s_o_n>` object. :ref:`More...<details-class_poco_1_1_j_s_o_n_1_1_object>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <Object.h>
	
	class Object
	{
	public:
		// typedefs
	
		typedef :ref:`SharedPtr<doxid-class_poco_1_1_shared_ptr>`<Object> :target:`Ptr<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a03dbde848f00716887308883f547eef7>`;
		typedef std::map<std::string, :ref:`Dynamic::Var<doxid-class_poco_1_1_dynamic_1_1_var>`> :target:`ValueMap<doxid-class_poco_1_1_j_s_o_n_1_1_object_1abd8af99a64e3782ae78982da6f37bcb2>`;
		typedef ValueMap::value_type :target:`ValueType<doxid-class_poco_1_1_j_s_o_n_1_1_object_1afbbe1e1a34d925c00724702d8c48541e>`;
		typedef ValueMap::iterator :target:`Iterator<doxid-class_poco_1_1_j_s_o_n_1_1_object_1ab559301ff9c401972f656d23265526d8>`;
		typedef ValueMap::const_iterator :target:`ConstIterator<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a510fcce6a2715a559e4a74f2e4b91369>`;

		// construction
	
		:ref:`Object<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a86d1939721967d3f03677f4dbca3700c>`(bool preserveInsertionOrder = false);
		:ref:`Object<doxid-class_poco_1_1_j_s_o_n_1_1_object_1ae7772cea485de6cb9d860e19f370aa27>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` Object& copy);

		// methods
	
		:ref:`Iterator<doxid-class_poco_1_1_j_s_o_n_1_1_object_1ab559301ff9c401972f656d23265526d8>`
		:target:`begin<doxid-class_poco_1_1_j_s_o_n_1_1_object_1af7f03f276c1d4f367e18de8ef5e7d0a7>`();
	
		:ref:`ConstIterator<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a510fcce6a2715a559e4a74f2e4b91369>`
		:target:`begin<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a09a7ae052c605b318b8e42726e415d6e>`() const;
	
		:ref:`Iterator<doxid-class_poco_1_1_j_s_o_n_1_1_object_1ab559301ff9c401972f656d23265526d8>`
		:target:`end<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a4d279e70042b2d6f0d1ac6ca06cd5ebc>`();
	
		:ref:`ConstIterator<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a510fcce6a2715a559e4a74f2e4b91369>`
		:target:`end<doxid-class_poco_1_1_j_s_o_n_1_1_object_1aac476a90dc2f4ed90c36c4f8754bceb8>`() const;
	
		:ref:`Dynamic::Var<doxid-class_poco_1_1_dynamic_1_1_var>`
		:ref:`get<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a29a11929e3cb2186b48f6c0616cc94d1>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key) const;
	
		:ref:`Array::Ptr<doxid-class_poco_1_1_j_s_o_n_1_1_array_1aeceb3f751138fa25594300ea1daec83f>`
		:ref:`getArray<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a2592a4856a575ce441f6ff42d4530c67>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key) const;
	
		:ref:`Object::Ptr<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a03dbde848f00716887308883f547eef7>`
		:ref:`getObject<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a49675d2337614d22471c2b6c1eef0395>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key) const;
	
		template <typename T>
		T
		:ref:`getValue<doxid-class_poco_1_1_j_s_o_n_1_1_object_1ad1d8cc6f5db734860146700a53ef46ee>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key) const;
	
		template <typename T>
		:ref:`Poco::Nullable<doxid-class_poco_1_1_nullable>`<T>
		:ref:`getNullableValue<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a479655bad4793c68bcec61a164889c84>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key) const;
	
		void
		:ref:`getNames<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a557367fa321454f8ccf8200cd0b833d2>`(std::vector<std::string>& names) const;
	
		bool
		:ref:`has<doxid-class_poco_1_1_j_s_o_n_1_1_object_1ad594643d15224fee11f4326811d812d6>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key) const;
	
		bool
		:ref:`isArray<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a9ea59a234974fe2990b6c57b81894c56>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key) const;
	
		bool
		:ref:`isArray<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a98c2b630093f7b672c13680388640d67>`(:ref:`ConstIterator<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a510fcce6a2715a559e4a74f2e4b91369>`& it) const;
	
		bool
		:ref:`isNull<doxid-class_poco_1_1_j_s_o_n_1_1_object_1af1d91c83aa3f1d9879dac8f69c241b18>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key) const;
	
		bool
		:ref:`isObject<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a936ce57d610dfd9e9d1208c347198602>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key) const;
	
		bool
		:ref:`isObject<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a2fb8c145481a0d4bc5e86211a1dfcb9e>`(:ref:`ConstIterator<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a510fcce6a2715a559e4a74f2e4b91369>`& it) const;
	
		template <typename T>
		T
		:ref:`optValue<doxid-class_poco_1_1_j_s_o_n_1_1_object_1aba0243012ba431c7564d87c0534e4091>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` T& def
			) const;
	
		std::size_t
		:ref:`size<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a9b33547bf419b1d9d6313dafaf33b736>`() const;
	
		void
		:ref:`set<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a41852d4cf0669957d8cfd0a42cf9edd8>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Dynamic::Var<doxid-class_poco_1_1_dynamic_1_1_var>`& value
			);
	
		void
		:ref:`stringify<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a116a3e3372676ae3e24d1f6dae5f559e>`(
			std::ostream& out,
			unsigned int indent = 0,
			int step = -1
			) const;
	
		void
		:ref:`remove<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a4cbdf5b89c4dce68a22603858b378bd0>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key);
	
		:ref:`operator const Poco::DynamicStruct &<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a04dc509c488ef75aaf6ad4e4a551b46d>`() const;
	
		void
		:ref:`clear<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a420de9304c19be71e6b10b4ba98f54fb>`();
	
		static
		:ref:`Poco::DynamicStruct<doxid-namespace_poco_1a0357afd39d6ace0553863deda91b4bf1>`
		:ref:`makeStruct<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a4bf3326db3cee5fcc4620831a7c1d6e2>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Object::Ptr<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a03dbde848f00716887308883f547eef7>`& obj);
	};
.. _details-class_poco_1_1_j_s_o_n_1_1_object:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

Represents a :ref:`JSON <doxid-namespace_poco_1_1_j_s_o_n>` object.

:ref:`Object <doxid-class_poco_1_1_j_s_o_n_1_1_object>` provides a representation based on shared pointers and optimized for performance. It is possible to convert :ref:`Object <doxid-class_poco_1_1_j_s_o_n_1_1_object>` to DynamicStruct. Conversion requires copying and therefore has performance penalty; the benefit is in improved syntax, eg:

.. ref-code-block:: cpp

	std::string json = "{ \"test\" : { \"property\" : \"value\" } }";
	Parser parser;
	Var result = parser.parse(json);
	
	// use pointers to avoid copying
	Object::Ptr object = result.extract<Object::Ptr>();
	Var test = object->get("test"); // holds { "property" : "value" }
	Object::Ptr subObject = test.extract<Object::Ptr>();
	test = subObject->get("property");
	std::string val = test.toString(); // val holds "value"
	
	// copy/convert to Poco::DynamicStruct
	Poco::DynamicStruct ds = *object;
	val = ds["test"]["property"]; // val holds "value"

Construction
------------

.. index:: pair: function; Object
.. _doxid-class_poco_1_1_j_s_o_n_1_1_object_1a86d1939721967d3f03677f4dbca3700c:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	Object(bool preserveInsertionOrder = false)

Creates an empty :ref:`Object <doxid-class_poco_1_1_j_s_o_n_1_1_object>`.

If preserveInsertionOrder, object will preserve the items insertion order. Otherwise, items will be sorted by keys.

.. index:: pair: function; Object
.. _doxid-class_poco_1_1_j_s_o_n_1_1_object_1ae7772cea485de6cb9d860e19f370aa27:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	Object(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` Object& copy)

Creates an :ref:`Object <doxid-class_poco_1_1_j_s_o_n_1_1_object>` by copying another one.

Struct is not copied to keep the operation as efficient as possible (when needed, it will be generated upon request).

Methods
-------

.. index:: pair: function; get
.. _doxid-class_poco_1_1_j_s_o_n_1_1_object_1a29a11929e3cb2186b48f6c0616cc94d1:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Dynamic::Var<doxid-class_poco_1_1_dynamic_1_1_var>`
	get(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key) const

Retrieves a property.

An empty value is returned when the property doesn't exist.

.. index:: pair: function; getArray
.. _doxid-class_poco_1_1_j_s_o_n_1_1_object_1a2592a4856a575ce441f6ff42d4530c67:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Array::Ptr<doxid-class_poco_1_1_j_s_o_n_1_1_array_1aeceb3f751138fa25594300ea1daec83f>`
	getArray(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key) const

Returns a :ref:`SharedPtr <doxid-class_poco_1_1_shared_ptr>` to an array when the property is an array.

An empty :ref:`SharedPtr <doxid-class_poco_1_1_shared_ptr>` is returned when the element doesn't exist or is not an array.

.. index:: pair: function; getObject
.. _doxid-class_poco_1_1_j_s_o_n_1_1_object_1a49675d2337614d22471c2b6c1eef0395:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Object::Ptr<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a03dbde848f00716887308883f547eef7>`
	getObject(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key) const

Returns a :ref:`SharedPtr <doxid-class_poco_1_1_shared_ptr>` to an object when the property is an object.

An empty :ref:`SharedPtr <doxid-class_poco_1_1_shared_ptr>` is returned when the property doesn't exist or is not an object

.. index:: pair: function; getValue
.. _doxid-class_poco_1_1_j_s_o_n_1_1_object_1ad1d8cc6f5db734860146700a53ef46ee:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	template <typename T>
	T
	getValue(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key) const

Retrieves the property with the given name and will try to convert the value to the given template type.

The convert<T>() method of Var is called which can also throw exceptions for invalid values. Note: This will not work for an array or an object.

.. index:: pair: function; getNullableValue
.. _doxid-class_poco_1_1_j_s_o_n_1_1_object_1a479655bad4793c68bcec61a164889c84:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	template <typename T>
	:ref:`Poco::Nullable<doxid-class_poco_1_1_nullable>`<T>
	getNullableValue(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key) const

Retrieves the property with the given name and will try to convert the value to the given template type.

The convert<T> method of Var is called which can also throw exceptions for invalid values. Note: This will not work for an array or an object.

.. index:: pair: function; getNames
.. _doxid-class_poco_1_1_j_s_o_n_1_1_object_1a557367fa321454f8ccf8200cd0b833d2:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	getNames(std::vector<std::string>& names) const

Returns all property names.

.. index:: pair: function; has
.. _doxid-class_poco_1_1_j_s_o_n_1_1_object_1ad594643d15224fee11f4326811d812d6:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	bool
	has(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key) const

Returns true when the given property exists.

.. index:: pair: function; isArray
.. _doxid-class_poco_1_1_j_s_o_n_1_1_object_1a9ea59a234974fe2990b6c57b81894c56:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	bool
	isArray(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key) const

Returns true when the given property contains an array.

.. index:: pair: function; isArray
.. _doxid-class_poco_1_1_j_s_o_n_1_1_object_1a98c2b630093f7b672c13680388640d67:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	bool
	isArray(:ref:`ConstIterator<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a510fcce6a2715a559e4a74f2e4b91369>`& it) const

Returns true when the given property contains an array.

.. index:: pair: function; isNull
.. _doxid-class_poco_1_1_j_s_o_n_1_1_object_1af1d91c83aa3f1d9879dac8f69c241b18:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	bool
	isNull(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key) const

Returns true when the given property contains a null value.

.. index:: pair: function; isObject
.. _doxid-class_poco_1_1_j_s_o_n_1_1_object_1a936ce57d610dfd9e9d1208c347198602:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	bool
	isObject(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key) const

Returns true when the given property contains an object.

.. index:: pair: function; isObject
.. _doxid-class_poco_1_1_j_s_o_n_1_1_object_1a2fb8c145481a0d4bc5e86211a1dfcb9e:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	bool
	isObject(:ref:`ConstIterator<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a510fcce6a2715a559e4a74f2e4b91369>`& it) const

Returns true when the given property contains an object.

.. index:: pair: function; optValue
.. _doxid-class_poco_1_1_j_s_o_n_1_1_object_1aba0243012ba431c7564d87c0534e4091:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	template <typename T>
	T
	optValue(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key,
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` T& def
		) const

Returns the value of a property when the property exists and can be converted to the given type.

Otherwise def will be returned.

.. index:: pair: function; size
.. _doxid-class_poco_1_1_j_s_o_n_1_1_object_1a9b33547bf419b1d9d6313dafaf33b736:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	std::size_t
	size() const

Returns the number of properties.

.. index:: pair: function; set
.. _doxid-class_poco_1_1_j_s_o_n_1_1_object_1a41852d4cf0669957d8cfd0a42cf9edd8:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	set(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key,
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Dynamic::Var<doxid-class_poco_1_1_dynamic_1_1_var>`& value
		)

Sets a new value.

.. index:: pair: function; stringify
.. _doxid-class_poco_1_1_j_s_o_n_1_1_object_1a116a3e3372676ae3e24d1f6dae5f559e:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	stringify(
		std::ostream& out,
		unsigned int indent = 0,
		int step = -1
		) const

Prints the object to out stream.

When indent is 0, the object will be printed on a single line without indentation.

.. index:: pair: function; remove
.. _doxid-class_poco_1_1_j_s_o_n_1_1_object_1a4cbdf5b89c4dce68a22603858b378bd0:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	remove(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& key)

Removes the property with the given key.

.. index:: pair: function; operator const Poco::DynamicStruct &
.. _doxid-class_poco_1_1_j_s_o_n_1_1_object_1a04dc509c488ef75aaf6ad4e4a551b46d:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	operator const Poco::DynamicStruct &() const

Cast operator to Poco::DynamiStruct.

.. index:: pair: function; clear
.. _doxid-class_poco_1_1_j_s_o_n_1_1_object_1a420de9304c19be71e6b10b4ba98f54fb:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	clear()

Clears the contents of the object.

Insertion order preservation property is left intact.

.. index:: pair: function; makeStruct
.. _doxid-class_poco_1_1_j_s_o_n_1_1_object_1a4bf3326db3cee5fcc4620831a7c1d6e2:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	static
	:ref:`Poco::DynamicStruct<doxid-namespace_poco_1a0357afd39d6ace0553863deda91b4bf1>`
	makeStruct(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Object::Ptr<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a03dbde848f00716887308883f547eef7>`& obj)

Utility function for creation of struct.

