.. index:: pair: class; Poco::JSON::Query
.. _doxid-class_poco_1_1_j_s_o_n_1_1_query:

class Poco::JSON::Query
=======================

.. toctree::
	:hidden:

Overview
~~~~~~~~

Class that can be used to search for a value in a :ref:`JSON <doxid-namespace_poco_1_1_j_s_o_n>` object or array. :ref:`More...<details-class_poco_1_1_j_s_o_n_1_1_query>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <Query.h>
	
	class Query
	{
	public:
		// construction
	
		:ref:`Query<doxid-class_poco_1_1_j_s_o_n_1_1_query_1aa62277776f8d0f02e1f456b2532a0e71>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Dynamic::Var<doxid-class_poco_1_1_dynamic_1_1_var>`& source);

		// methods
	
		:ref:`Object::Ptr<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a03dbde848f00716887308883f547eef7>`
		:ref:`findObject<doxid-class_poco_1_1_j_s_o_n_1_1_query_1aa2d5be75e51b4efba2fa723219a0a70b>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& path) const;
	
		:ref:`Object<doxid-class_poco_1_1_j_s_o_n_1_1_object>`&
		:ref:`findObject<doxid-class_poco_1_1_j_s_o_n_1_1_query_1a880cc09a57c2ac9b2e9253fe42ea4ea8>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& path,
			:ref:`Object<doxid-class_poco_1_1_j_s_o_n_1_1_object>`& obj
			) const;
	
		:ref:`Array::Ptr<doxid-class_poco_1_1_j_s_o_n_1_1_array_1aeceb3f751138fa25594300ea1daec83f>`
		:ref:`findArray<doxid-class_poco_1_1_j_s_o_n_1_1_query_1a91e73c6665fa39653bf285a798172033>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& path) const;
	
		:ref:`Array<doxid-class_poco_1_1_j_s_o_n_1_1_array>`&
		:ref:`findArray<doxid-class_poco_1_1_j_s_o_n_1_1_query_1a32f77ae0f35130ebfe6bd544830b46ef>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& path,
			:ref:`Array<doxid-class_poco_1_1_j_s_o_n_1_1_array>`& obj
			) const;
	
		:ref:`Dynamic::Var<doxid-class_poco_1_1_dynamic_1_1_var>`
		:ref:`find<doxid-class_poco_1_1_j_s_o_n_1_1_query_1a502816370aea6751cd60ff929b4ab84d>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& path) const;
	
		template <typename T>
		T
		:ref:`findValue<doxid-class_poco_1_1_j_s_o_n_1_1_query_1a2669aa24f87a5bed911be4db19c68dae>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& path,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` T& def
			) const;
	
		std::string
		:ref:`findValue<doxid-class_poco_1_1_j_s_o_n_1_1_query_1a409d57a70e0053682e8ded90c8f3e396>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` char* path,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` char* def
			) const;
	};
.. _details-class_poco_1_1_j_s_o_n_1_1_query:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

Class that can be used to search for a value in a :ref:`JSON <doxid-namespace_poco_1_1_j_s_o_n>` object or array.

Construction
------------

.. index:: pair: function; Query
.. _doxid-class_poco_1_1_j_s_o_n_1_1_query_1aa62277776f8d0f02e1f456b2532a0e71:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	Query(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Dynamic::Var<doxid-class_poco_1_1_dynamic_1_1_var>`& source)

Creates a Query/.

Source must be :ref:`JSON <doxid-namespace_poco_1_1_j_s_o_n>` :ref:`Object <doxid-class_poco_1_1_j_s_o_n_1_1_object>`, :ref:`Array <doxid-class_poco_1_1_j_s_o_n_1_1_array>`, :ref:`Object::Ptr <doxid-class_poco_1_1_j_s_o_n_1_1_object_1a03dbde848f00716887308883f547eef7>`, :ref:`Array::Ptr <doxid-class_poco_1_1_j_s_o_n_1_1_array_1aeceb3f751138fa25594300ea1daec83f>` or empty Var. :ref:`Any <doxid-class_poco_1_1_any>` other type will trigger throwing of InvalidArgumentException.

Creating :ref:`Query <doxid-class_poco_1_1_j_s_o_n_1_1_query>` holding Ptr will typically result in faster performance.

Methods
-------

.. index:: pair: function; findObject
.. _doxid-class_poco_1_1_j_s_o_n_1_1_query_1aa2d5be75e51b4efba2fa723219a0a70b:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Object::Ptr<doxid-class_poco_1_1_j_s_o_n_1_1_object_1a03dbde848f00716887308883f547eef7>`
	findObject(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& path) const

Search for an object.

When the object can't be found, a zero Ptr is returned; otherwise, a shared pointer to internally held object is returned. If object (as opposed to a pointer to object) is held internally, a shared pointer to new (heap-allocated) :ref:`Object <doxid-class_poco_1_1_j_s_o_n_1_1_object>` is returned; this may be expensive operation.

.. index:: pair: function; findObject
.. _doxid-class_poco_1_1_j_s_o_n_1_1_query_1a880cc09a57c2ac9b2e9253fe42ea4ea8:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Object<doxid-class_poco_1_1_j_s_o_n_1_1_object>`&
	findObject(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& path,
		:ref:`Object<doxid-class_poco_1_1_j_s_o_n_1_1_object>`& obj
		) const

Search for an object.

If object is found, it is assigned to the :ref:`Object <doxid-class_poco_1_1_j_s_o_n_1_1_object>` through the reference passed in. When the object can't be found, the provided :ref:`Object <doxid-class_poco_1_1_j_s_o_n_1_1_object>` is emptied and returned.

.. index:: pair: function; findArray
.. _doxid-class_poco_1_1_j_s_o_n_1_1_query_1a91e73c6665fa39653bf285a798172033:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Array::Ptr<doxid-class_poco_1_1_j_s_o_n_1_1_array_1aeceb3f751138fa25594300ea1daec83f>`
	findArray(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& path) const

Search for an array.

When the array can't be found, a zero Ptr is returned; otherwise, a shared pointer to internally held array is returned. If array (as opposed to a pointer to array) is held internally, a shared pointer to new (heap-allocated) :ref:`Object <doxid-class_poco_1_1_j_s_o_n_1_1_object>` is returned; this may be expensive operation.

.. index:: pair: function; findArray
.. _doxid-class_poco_1_1_j_s_o_n_1_1_query_1a32f77ae0f35130ebfe6bd544830b46ef:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Array<doxid-class_poco_1_1_j_s_o_n_1_1_array>`&
	findArray(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& path,
		:ref:`Array<doxid-class_poco_1_1_j_s_o_n_1_1_array>`& obj
		) const

Search for an array.

If array is found, it is assigned to the :ref:`Object <doxid-class_poco_1_1_j_s_o_n_1_1_object>` through the reference passed in. When the array can't be found, the provided :ref:`Object <doxid-class_poco_1_1_j_s_o_n_1_1_object>` is emptied and returned.

.. index:: pair: function; find
.. _doxid-class_poco_1_1_j_s_o_n_1_1_query_1a502816370aea6751cd60ff929b4ab84d:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Dynamic::Var<doxid-class_poco_1_1_dynamic_1_1_var>`
	find(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& path) const

Searches a value.

Example: "person.children[0].name" will return the the name of the first child. When the value can't be found an empty value is returned.

.. index:: pair: function; findValue
.. _doxid-class_poco_1_1_j_s_o_n_1_1_query_1a2669aa24f87a5bed911be4db19c68dae:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	template <typename T>
	T
	findValue(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& path,
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` T& def
		) const

Searches for a value will convert it to the given type.

When the value can't be found or has an invalid type the default value will be returned.

.. index:: pair: function; findValue
.. _doxid-class_poco_1_1_j_s_o_n_1_1_query_1a409d57a70e0053682e8ded90c8f3e396:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	std::string
	findValue(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` char* path,
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` char* def
		) const

Searches for a value will convert it to the given type.

When the value can't be found or has an invalid type the default value will be returned.

