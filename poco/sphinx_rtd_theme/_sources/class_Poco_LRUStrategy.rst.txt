.. index:: pair: class; Poco::LRUStrategy
.. _doxid-class_poco_1_1_l_r_u_strategy:

template class Poco::LRUStrategy
================================

.. toctree::
	:hidden:

Overview
~~~~~~~~

An :ref:`LRUStrategy <doxid-class_poco_1_1_l_r_u_strategy>` implements least recently used cache replacement. :ref:`More...<details-class_poco_1_1_l_r_u_strategy>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <LRUStrategy.h>
	
	template <
		class TKey,
		class TValue
		>
	class LRUStrategy: public :ref:`Poco::AbstractStrategy<doxid-class_poco_1_1_abstract_strategy>`
	{
	public:
		// typedefs
	
		typedef std::list<TKey> :target:`Keys<doxid-class_poco_1_1_l_r_u_strategy_1abe6e8ad16692bbf2cc83b937e3a41dda>`;
		typedef Keys::iterator :target:`Iterator<doxid-class_poco_1_1_l_r_u_strategy_1a4efb168a4110f20f2aceaef144c663bc>`;
		typedef Keys::const_iterator :target:`ConstIterator<doxid-class_poco_1_1_l_r_u_strategy_1a7b102b2d63f024e5ad3bf03a4d3bbc29>`;
		typedef std::map<TKey, :ref:`Iterator<doxid-class_poco_1_1_l_r_u_strategy_1a4efb168a4110f20f2aceaef144c663bc>`> :target:`KeyIndex<doxid-class_poco_1_1_l_r_u_strategy_1a2e02f930471cb559175063d23361c3f8>`;
		typedef KeyIndex::iterator :target:`IndexIterator<doxid-class_poco_1_1_l_r_u_strategy_1aebe24481eb3dcc7901829dcac333589b>`;
		typedef KeyIndex::const_iterator :target:`ConstIndexIterator<doxid-class_poco_1_1_l_r_u_strategy_1ac5cb8a010cf459bd67bc24d10856d853>`;

		// construction
	
		:target:`LRUStrategy<doxid-class_poco_1_1_l_r_u_strategy_1a55e69945eb8d9329bc61b49b8ec28b45>`(std::size_t size);

		// methods
	
		virtual
		void
		:ref:`onAdd<doxid-class_poco_1_1_l_r_u_strategy_1a1235775f41db3dde2931c890dc0e8e79>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`KeyValueArgs<doxid-class_poco_1_1_key_value_args>`<TKey, TValue>& key
			);
	
		virtual
		void
		:ref:`onRemove<doxid-class_poco_1_1_l_r_u_strategy_1a9f9310bba513b46dc4e577ffb0608511>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` TKey& key
			);
	
		virtual
		void
		:ref:`onGet<doxid-class_poco_1_1_l_r_u_strategy_1aba8a86be5f7de6f5ffa1a64218911d0c>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` TKey& key
			);
	
		virtual
		void
		:ref:`onClear<doxid-class_poco_1_1_l_r_u_strategy_1ad3816fa185847728729a68f05c0ff2cf>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`EventArgs<doxid-class_poco_1_1_event_args>`& args
			);
	
		virtual
		void
		:ref:`onIsValid<doxid-class_poco_1_1_l_r_u_strategy_1ab06f12c533655977c02fd24ae4fdc655>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`ValidArgs<doxid-class_poco_1_1_valid_args>`<TKey>& key
			);
	
		virtual
		void
		:ref:`onReplace<doxid-class_poco_1_1_l_r_u_strategy_1a6bd44415b867ccd105b9e6bbb98b2b23>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			std::set<TKey>& elemsToRemove
			);

	protected:
		// fields
	
		std::size_t :ref:`_size<doxid-class_poco_1_1_l_r_u_strategy_1ab4ea0ae5f141c0c6bae4018f8523f514>`;
		:ref:`Keys<doxid-class_poco_1_1_l_r_u_strategy_1abe6e8ad16692bbf2cc83b937e3a41dda>` :target:`_keys<doxid-class_poco_1_1_l_r_u_strategy_1abd62a4e172d7ef5235a8db4b0b482060>`;
		:ref:`KeyIndex<doxid-class_poco_1_1_l_r_u_strategy_1a2e02f930471cb559175063d23361c3f8>` :ref:`_keyIndex<doxid-class_poco_1_1_l_r_u_strategy_1ab2cf5e0570aa5b9e7ea1f018d0335019>`;
	};

Inherited Members
-----------------

.. ref-code-block:: cpp
	:class: doxyrest-overview-inherited-code-block

	public:
		// methods
	
		virtual
		void
		:ref:`onUpdate<doxid-class_poco_1_1_abstract_strategy_1ae6d1f28a5590ebd288eb644747b016a7>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`KeyValueArgs<doxid-class_poco_1_1_key_value_args>`<TKey, TValue>& args
			);
	
		virtual
		void
		:ref:`onAdd<doxid-class_poco_1_1_abstract_strategy_1a40bb84cd0085c3ff59064cd3d13a21dd>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`KeyValueArgs<doxid-class_poco_1_1_key_value_args>`<TKey, TValue>& key
			) = 0;
	
		virtual
		void
		:ref:`onRemove<doxid-class_poco_1_1_abstract_strategy_1a3c74a0e9b7469f4246ee083252d995ac>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` TKey& key
			) = 0;
	
		virtual
		void
		:ref:`onGet<doxid-class_poco_1_1_abstract_strategy_1a802663d39fa378d09ca76b37daccf8e9>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` TKey& key
			) = 0;
	
		virtual
		void
		:ref:`onClear<doxid-class_poco_1_1_abstract_strategy_1a84d1033a199ef6eea12207f7a40bca72>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`EventArgs<doxid-class_poco_1_1_event_args>`& args
			) = 0;
	
		virtual
		void
		:ref:`onIsValid<doxid-class_poco_1_1_abstract_strategy_1ade01399ff91ed48ca9ab2656c184dc7e>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`ValidArgs<doxid-class_poco_1_1_valid_args>`<TKey>& key
			) = 0;
	
		virtual
		void
		:ref:`onReplace<doxid-class_poco_1_1_abstract_strategy_1a344d2caa3f8b5ea1507a5a26c49f7eae>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			std::set<TKey>& elemsToRemove
			) = 0;

.. _details-class_poco_1_1_l_r_u_strategy:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

An :ref:`LRUStrategy <doxid-class_poco_1_1_l_r_u_strategy>` implements least recently used cache replacement.

Fields
------

.. index:: pair: variable; _size
.. _doxid-class_poco_1_1_l_r_u_strategy_1ab4ea0ae5f141c0c6bae4018f8523f514:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	std::size_t _size

Number of keys the cache can store.

.. index:: pair: variable; _keyIndex
.. _doxid-class_poco_1_1_l_r_u_strategy_1ab2cf5e0570aa5b9e7ea1f018d0335019:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`KeyIndex<doxid-class_poco_1_1_l_r_u_strategy_1a2e02f930471cb559175063d23361c3f8>` _keyIndex

For faster access to _keys.

Methods
-------

.. index:: pair: function; onAdd
.. _doxid-class_poco_1_1_l_r_u_strategy_1a1235775f41db3dde2931c890dc0e8e79:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	onAdd(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`KeyValueArgs<doxid-class_poco_1_1_key_value_args>`<TKey, TValue>& key
		)

Adds the key to the strategy.

If for the key already an entry exists, an exception will be thrown.

.. index:: pair: function; onRemove
.. _doxid-class_poco_1_1_l_r_u_strategy_1a9f9310bba513b46dc4e577ffb0608511:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	onRemove(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` TKey& key
		)

Removes an entry from the strategy.

If the entry is not found the remove is ignored.

.. index:: pair: function; onGet
.. _doxid-class_poco_1_1_l_r_u_strategy_1aba8a86be5f7de6f5ffa1a64218911d0c:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	onGet(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` TKey& key
		)

Informs the strategy that a read-access happens to an element.

.. index:: pair: function; onClear
.. _doxid-class_poco_1_1_l_r_u_strategy_1ad3816fa185847728729a68f05c0ff2cf:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	onClear(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`EventArgs<doxid-class_poco_1_1_event_args>`& args
		)

Removes all elements from the cache.

.. index:: pair: function; onIsValid
.. _doxid-class_poco_1_1_l_r_u_strategy_1ab06f12c533655977c02fd24ae4fdc655:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	onIsValid(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
		:ref:`ValidArgs<doxid-class_poco_1_1_valid_args>`<TKey>& key
		)

Used to query if a key is still valid (i.e. cached).

.. index:: pair: function; onReplace
.. _doxid-class_poco_1_1_l_r_u_strategy_1a6bd44415b867ccd105b9e6bbb98b2b23:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	onReplace(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
		std::set<TKey>& elemsToRemove
		)

Used by the Strategy to indicate which elements should be removed from the cache.

Note that onReplace does not change the current list of keys. The cache object is reponsible to remove the elements.

