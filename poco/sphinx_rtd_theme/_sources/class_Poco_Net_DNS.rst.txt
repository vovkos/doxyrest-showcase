.. index:: pair: class; Poco::Net::DNS
.. _doxid-class_poco_1_1_net_1_1_d_n_s:

class Poco::Net::DNS
====================

.. toctree::
	:hidden:

	enum_Poco_Net_DNS_HintFlag.rst

Overview
~~~~~~~~

This class provides an interface to the domain name service. :ref:`More...<details-class_poco_1_1_net_1_1_d_n_s>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <DNS.h>
	
	class DNS
	{
	public:
		// enums
	
		enum :ref:`HintFlag<doxid-class_poco_1_1_net_1_1_d_n_s_1a702f0efb963ca0874221e48be83a055f>`;

		// methods
	
		static
		:ref:`HostEntry<doxid-class_poco_1_1_net_1_1_host_entry>`
		:target:`hostByName<doxid-class_poco_1_1_net_1_1_d_n_s_1a6cd739eff0d87e1f7a29995d80bcbb15>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& hostname,
			unsigned hintFlags = :ref:`DNS_HINT_NONE<doxid-class_poco_1_1_net_1_1_d_n_s_1a702f0efb963ca0874221e48be83a055fa888b9851a93d0f0970ce4b3c650239f0>`
			);
	
		static
		:ref:`HostEntry<doxid-class_poco_1_1_net_1_1_host_entry>`
		:target:`hostByAddress<doxid-class_poco_1_1_net_1_1_d_n_s_1a9b59a86d1924fc0798787613067b08f1>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`IPAddress<doxid-class_poco_1_1_net_1_1_i_p_address>`& address,
			unsigned hintFlags = :ref:`DNS_HINT_NONE<doxid-class_poco_1_1_net_1_1_d_n_s_1a702f0efb963ca0874221e48be83a055fa888b9851a93d0f0970ce4b3c650239f0>`
			);
	
		static
		:ref:`HostEntry<doxid-class_poco_1_1_net_1_1_host_entry>`
		:ref:`resolve<doxid-class_poco_1_1_net_1_1_d_n_s_1ae85cb0a872d702bf4ff069cbf59dcefa>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& address);
	
		static
		:ref:`IPAddress<doxid-class_poco_1_1_net_1_1_i_p_address>`
		:ref:`resolveOne<doxid-class_poco_1_1_net_1_1_d_n_s_1aebc5fd3dacb7bc455dfa1a92ecdd8814>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& address);
	
		static
		:ref:`HostEntry<doxid-class_poco_1_1_net_1_1_host_entry>`
		:ref:`thisHost<doxid-class_poco_1_1_net_1_1_d_n_s_1a6900a14f916137cbb8100c8772a48332>`();
	
		static
		void
		:ref:`reload<doxid-class_poco_1_1_net_1_1_d_n_s_1a3dd83218e31856626a57f648f04006c3>`();
	
		static
		void
		:ref:`flushCache<doxid-class_poco_1_1_net_1_1_d_n_s_1a08f5af250fae91ad65dc89661910ab7b>`();
	
		static
		std::string
		:ref:`hostName<doxid-class_poco_1_1_net_1_1_d_n_s_1a464496656f488d3693f0d8d4c0b647cb>`();

	protected:
		// methods
	
		static
		int
		:ref:`lastError<doxid-class_poco_1_1_net_1_1_d_n_s_1a734804faab7dd2054a30aeed0bdccec2>`();
	
		static
		void
		:ref:`error<doxid-class_poco_1_1_net_1_1_d_n_s_1ab9f7db324ec316bdaecae670d5fd5222>`(
			int code,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& arg
			);
	
		static
		void
		:ref:`aierror<doxid-class_poco_1_1_net_1_1_d_n_s_1aef54e175e1dc570fc17c6c4346da4037>`(
			int code,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& arg
			);
	};
.. _details-class_poco_1_1_net_1_1_d_n_s:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

This class provides an interface to the domain name service.

An internal :ref:`DNS <doxid-class_poco_1_1_net_1_1_d_n_s>` cache is used to speed up name lookups.

Methods
-------

.. index:: pair: function; resolve
.. _doxid-class_poco_1_1_net_1_1_d_n_s_1ae85cb0a872d702bf4ff069cbf59dcefa:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	static
	:ref:`HostEntry<doxid-class_poco_1_1_net_1_1_host_entry>`
	resolve(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& address)

Returns a :ref:`HostEntry <doxid-class_poco_1_1_net_1_1_host_entry>` object containing the :ref:`DNS <doxid-class_poco_1_1_net_1_1_d_n_s>` information for the host with the given IP address or host name.

Throws a HostNotFoundException if a host with the given name cannot be found.

Throws a NoAddressFoundException if no address can be found for the hostname.

Throws a DNSException in case of a general :ref:`DNS <doxid-class_poco_1_1_net_1_1_d_n_s>` error.

Throws an IOException in case of any other error.

.. index:: pair: function; resolveOne
.. _doxid-class_poco_1_1_net_1_1_d_n_s_1aebc5fd3dacb7bc455dfa1a92ecdd8814:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	static
	:ref:`IPAddress<doxid-class_poco_1_1_net_1_1_i_p_address>`
	resolveOne(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& address)

Convenience method that calls resolve(address) and returns the first address from the HostInfo.

.. index:: pair: function; thisHost
.. _doxid-class_poco_1_1_net_1_1_d_n_s_1a6900a14f916137cbb8100c8772a48332:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	static
	:ref:`HostEntry<doxid-class_poco_1_1_net_1_1_host_entry>`
	thisHost()

Returns a :ref:`HostEntry <doxid-class_poco_1_1_net_1_1_host_entry>` object containing the :ref:`DNS <doxid-class_poco_1_1_net_1_1_d_n_s>` information for this host.

Throws a HostNotFoundException if :ref:`DNS <doxid-class_poco_1_1_net_1_1_d_n_s>` information for this host cannot be found.

Throws a NoAddressFoundException if no address can be found for this host.

Throws a DNSException in case of a general :ref:`DNS <doxid-class_poco_1_1_net_1_1_d_n_s>` error.

Throws an IOException in case of any other error.

.. index:: pair: function; reload
.. _doxid-class_poco_1_1_net_1_1_d_n_s_1a3dd83218e31856626a57f648f04006c3:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	static
	void
	reload()

Reloads the resolver configuration.

This method will call res_init() if the :ref:`Net <doxid-namespace_poco_1_1_net>` library has been compiled with -DPOCO_HAVE_LIBRESOLV. Otherwise it will do nothing.

.. index:: pair: function; flushCache
.. _doxid-class_poco_1_1_net_1_1_d_n_s_1a08f5af250fae91ad65dc89661910ab7b:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	static
	void
	flushCache()

Flushes the internal :ref:`DNS <doxid-class_poco_1_1_net_1_1_d_n_s>` cache.

As of 1.4.2, the :ref:`DNS <doxid-class_poco_1_1_net_1_1_d_n_s>` cache is no longer used and this method does not do anything.

.. index:: pair: function; hostName
.. _doxid-class_poco_1_1_net_1_1_d_n_s_1a464496656f488d3693f0d8d4c0b647cb:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	static
	std::string
	hostName()

Returns the host name of this host.

.. index:: pair: function; lastError
.. _doxid-class_poco_1_1_net_1_1_d_n_s_1a734804faab7dd2054a30aeed0bdccec2:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	static
	int
	lastError()

Returns the code of the last error.

.. index:: pair: function; error
.. _doxid-class_poco_1_1_net_1_1_d_n_s_1ab9f7db324ec316bdaecae670d5fd5222:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	static
	void
	error(
		int code,
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& arg
		)

Throws an exception according to the error code.

.. index:: pair: function; aierror
.. _doxid-class_poco_1_1_net_1_1_d_n_s_1aef54e175e1dc570fc17c6c4346da4037:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	static
	void
	aierror(
		int code,
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& arg
		)

Throws an exception according to the getaddrinfo() error code.

