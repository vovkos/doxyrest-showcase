.. index:: pair: class; Poco::Net::HTTPClientSession
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session:

class Poco::Net::HTTPClientSession
==================================

.. toctree::
	:hidden:

	struct_Poco_Net_HTTPClientSession_ProxyConfig.rst

Overview
~~~~~~~~

This class implements the client-side of a HTTP session. :ref:`More...<details-class_poco_1_1_net_1_1_h_t_t_p_client_session>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <HTTPClientSession.h>
	
	class HTTPClientSession: public :ref:`Poco::Net::HTTPSession<doxid-class_poco_1_1_net_1_1_h_t_t_p_session>`
	{
	public:
		// structs
	
		struct :ref:`ProxyConfig<doxid-struct_poco_1_1_net_1_1_h_t_t_p_client_session_1_1_proxy_config>`;

		// construction
	
		:ref:`HTTPClientSession<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a1a8193e4330290efb684c07932b7e669>`();
		:ref:`HTTPClientSession<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a2f547c0e94d50aa28e07b4d74673f74b>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`StreamSocket<doxid-class_poco_1_1_net_1_1_stream_socket>`& socket);
		:ref:`HTTPClientSession<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a04f543b3ce15817a86282d8bc9c957db>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address);
	
		:ref:`HTTPClientSession<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a5ce34661bd3a3c5cff819204be471402>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& host,
			Poco::UInt16 port = :ref:`HTTPSession::HTTP_PORT<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1a7e78432e9e6b9be68de9c85adcf259b6a7bc48abc88c649b13f10ea2acd5eb40e>`
			);
	
		:ref:`HTTPClientSession<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a2caf8d25b8d370c90bbec223818f6caa>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& host,
			Poco::UInt16 port,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`ProxyConfig<doxid-struct_poco_1_1_net_1_1_h_t_t_p_client_session_1_1_proxy_config>`& proxyConfig
			);

		// methods
	
		void
		:ref:`setHost<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a2698c66358e1943de81a75688feb0706>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& host);
	
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string&
		:ref:`getHost<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a10e9cee355c5ae0b577f9dc519dc7d69>`() const;
	
		void
		:ref:`setPort<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1af92377ff12882281b2f63b645b805b7c>`(Poco::UInt16 port);
	
		Poco::UInt16
		:ref:`getPort<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1ae1095be6b2fefd52fa241aa3de27516d>`() const;
	
		void
		:ref:`setProxy<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1af80efd8df680a3eac649f50f1e8f1a82>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& host,
			Poco::UInt16 port = :ref:`HTTPSession::HTTP_PORT<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1a7e78432e9e6b9be68de9c85adcf259b6a7bc48abc88c649b13f10ea2acd5eb40e>`
			);
	
		void
		:ref:`setProxyHost<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a2f516bcc6ef7405c6057f625cc405ad5>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& host);
	
		void
		:ref:`setProxyPort<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1ab50972d2bd3e0979c069967de0449370>`(Poco::UInt16 port);
	
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string&
		:ref:`getProxyHost<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a4f3c8312bee0e4eaa31c665456e0c7d3>`() const;
	
		Poco::UInt16
		:ref:`getProxyPort<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1af5a9b79a0a66a1305371c73af3e8c953>`() const;
	
		void
		:ref:`setProxyCredentials<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a0f7cf95ecb8272f991fce9e23c3f7495>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& username,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& password
			);
	
		void
		:ref:`setProxyUsername<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a9cb37d841e82417e67ee1baf14e63385>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& username);
	
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string&
		:ref:`getProxyUsername<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a910d4de5bb1e9fb34cf22825f8f9f725>`() const;
	
		void
		:ref:`setProxyPassword<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a77fcb9fd390ff50540798cb9cfff9e83>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& password);
	
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string&
		:ref:`getProxyPassword<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1aa42cce8aeb837ce3db241967a81f8dee>`() const;
	
		void
		:ref:`setProxyConfig<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a93c4c0d1c3483cab55c2dd3f36148523>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`ProxyConfig<doxid-struct_poco_1_1_net_1_1_h_t_t_p_client_session_1_1_proxy_config>`& config);
	
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`ProxyConfig<doxid-struct_poco_1_1_net_1_1_h_t_t_p_client_session_1_1_proxy_config>`&
		:ref:`getProxyConfig<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a44272d050b785cb74cdd573f8921c2dc>`() const;
	
		void
		:ref:`setKeepAliveTimeout<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a942490aa4ca7e2457d6ef784343b6a7f>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`& timeout);
	
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`&
		:ref:`getKeepAliveTimeout<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a9bf4165f166a066859825830a7c7ee78>`() const;
	
		virtual
		std::ostream&
		:ref:`sendRequest<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a1739c6ac53078ebf6aaf4bf6cfab5c5a>`(:ref:`HTTPRequest<doxid-class_poco_1_1_net_1_1_h_t_t_p_request>`& request);
	
		virtual
		std::istream&
		:ref:`receiveResponse<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a43b4f42c34a2d9b3ed3263745645f99a>`(:ref:`HTTPResponse<doxid-class_poco_1_1_net_1_1_h_t_t_p_response>`& response);
	
		void
		:ref:`reset<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a333fb50be0047f2aebdcf2561c18a794>`();
	
		virtual
		bool
		:ref:`secure<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1aeb16f52db3b2ddf4782a29fcebe40b9b>`() const;
	
		bool
		:ref:`bypassProxy<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1adbd4fc6d262876a3c9001ee9aebf6abf>`() const;
	
		static
		void
		:ref:`setGlobalProxyConfig<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1aa11cc676a0f47cf84f454a9f5013e9c9>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`ProxyConfig<doxid-struct_poco_1_1_net_1_1_h_t_t_p_client_session_1_1_proxy_config>`& config);
	
		static
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`ProxyConfig<doxid-struct_poco_1_1_net_1_1_h_t_t_p_client_session_1_1_proxy_config>`&
		:ref:`getGlobalProxyConfig<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1ac385a751dd8e830c74a1d46c96e58c78>`();

	protected:
		// enums
	
		enum
		{
		    :target:`DEFAULT_KEEP_ALIVE_TIMEOUT<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1ae5bf3446ed76b1b1ceeb2127d1152e7ca423a42aa7cad10c0cb760e38e90129b2>` = 8,
		};

		// methods
	
		void
		:ref:`reconnect<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1ac8f4f4a59fb654116ab2424554a4abb8>`();
	
		virtual
		int
		:ref:`write<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1ab777183142f73b28e223c8f963a1ff89>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` char* buffer,
			std::streamsize length
			);
	
		virtual
		std::string
		:ref:`proxyRequestPrefix<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1afe2f6478c813361320777d265de7421b>`() const;
	
		virtual
		bool
		:ref:`mustReconnect<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a7f76572fee61e515b2501f6925dd6118>`() const;
	
		virtual
		void
		:ref:`proxyAuthenticate<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a10e9d6dc90539e710575a573d6822d20>`(:ref:`HTTPRequest<doxid-class_poco_1_1_net_1_1_h_t_t_p_request>`& request);
	
		void
		:ref:`proxyAuthenticateImpl<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a16e1a7dca73098f4b7e61b049eab3b29>`(:ref:`HTTPRequest<doxid-class_poco_1_1_net_1_1_h_t_t_p_request>`& request);
	
		:ref:`StreamSocket<doxid-class_poco_1_1_net_1_1_stream_socket>`
		:ref:`proxyConnect<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a0cbec25865b49715530e5eee4a3f36d0>`();
	
		void
		:ref:`proxyTunnel<doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a2ac7cb4455cdeb8513fabba0803fcd83>`();
	};

Inherited Members
-----------------

.. ref-code-block:: cpp
	:class: doxyrest-overview-inherited-code-block

	public:
		// enums
	
		enum
		{
		    :ref:`HTTP_PORT<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1a7e78432e9e6b9be68de9c85adcf259b6a7bc48abc88c649b13f10ea2acd5eb40e>` = 80,
		};

		// methods
	
		void
		:ref:`setKeepAlive<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1a0f26e56231626324cda47a77764de1f1>`(bool keepAlive);
	
		bool
		:ref:`getKeepAlive<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1a5e256ffa0ebcf858313c19b66f0237b8>`() const;
	
		void
		:ref:`setTimeout<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1ac3b0e50de429e8fd4f5dc4a29a7f462d>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`& timeout);
	
		:ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`
		:ref:`getTimeout<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1a53513a8292c059fde84315cd77cbb1da>`() const;
	
		bool
		:ref:`connected<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1aa86d1fc3fea4d65a522ef7dbbd160a22>`() const;
	
		virtual
		void
		:ref:`abort<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1a9ac3b8330254494361f77154237175e5>`();
	
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Exception<doxid-class_poco_1_1_exception>`*
		:ref:`networkException<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1af129fb7e044498220f7bdc174aa36754>`() const;
	
		void
		:ref:`attachSessionData<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1a173eb4f77be8506fd70ae55eef7b870e>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Any<doxid-class_poco_1_1_any>`& data);
	
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Any<doxid-class_poco_1_1_any>`&
		:ref:`sessionData<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1abaf374cb873d125048778e65712b51fc>`() const;
	
		:ref:`StreamSocket<doxid-class_poco_1_1_net_1_1_stream_socket>`
		:ref:`detachSocket<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1a23b4bff0b82e6ae1163493829191c7c9>`();
	
		:ref:`StreamSocket<doxid-class_poco_1_1_net_1_1_stream_socket>`&
		:ref:`socket<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1a182567e432a2641121f20753721cb476>`();
	
		void
		:ref:`drainBuffer<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1a88015e458df0965f55e2577b4902a10e>`(:ref:`Poco::Buffer<doxid-class_poco_1_1_buffer>`<char>& buffer);

	protected:
		// methods
	
		int
		:ref:`get<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1a820bcbed4147f4bb2f99539ab53d174d>`();
	
		int
		:ref:`peek<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1ab94b6d69b827a552caf567862f96e2fe>`();
	
		virtual
		int
		:ref:`read<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1a6875dc9399fdbe3aa1eb0d364cbb3f03>`(
			char* buffer,
			std::streamsize length
			);
	
		virtual
		int
		:ref:`write<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1a1caa7029dcf1266db4bc4a5cc363c8e0>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` char* buffer,
			std::streamsize length
			);
	
		int
		:ref:`receive<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1a30aa9bdf25c31303b9c069d5c926d152>`(
			char* buffer,
			int length
			);
	
		int
		:ref:`buffered<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1ad089729b720424ce8b0c1272cbce333a>`() const;
	
		void
		:ref:`refill<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1aa40c1ada2a7b6f53614d69c47511f8e8>`();
	
		virtual
		void
		:ref:`connect<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1af17a521622971969cb591a4a37b19fc3>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address);
	
		void
		:ref:`attachSocket<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1ac72cad836b2904ff29893fce46f22ede>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`StreamSocket<doxid-class_poco_1_1_net_1_1_stream_socket>`& socket);
	
		void
		:ref:`close<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1a5c0150fffac13de77e83b81cea30813b>`();
	
		void
		:ref:`setException<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1a49c55e08b257d07b57b8cb7e764c4ade>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Exception<doxid-class_poco_1_1_exception>`& exc);
	
		void
		:ref:`clearException<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1a09215e39a1d3679d2cfb0654c30510c2>`();

.. _details-class_poco_1_1_net_1_1_h_t_t_p_client_session:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

This class implements the client-side of a HTTP session.

To send a HTTP request to a HTTP server, first instantiate a :ref:`HTTPClientSession <doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session>` object and specify the server's host name and port number.

Then create a :ref:`HTTPRequest <doxid-class_poco_1_1_net_1_1_h_t_t_p_request>` object, fill it accordingly, and pass it as argument to the :ref:`sendRequest() <doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a1739c6ac53078ebf6aaf4bf6cfab5c5a>` method.

:ref:`sendRequest() <doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a1739c6ac53078ebf6aaf4bf6cfab5c5a>` will return an output stream that can be used to send the request body, if there is any.

After you are done sending the request body, create a :ref:`HTTPResponse <doxid-class_poco_1_1_net_1_1_h_t_t_p_response>` object and pass it to :ref:`receiveResponse() <doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a43b4f42c34a2d9b3ed3263745645f99a>`.

This will return an input stream that can be used to read the response body.

See RFC 2616 `http://www.faqs.org/rfcs/rfc2616.html <http://www.faqs.org/rfcs/rfc2616.html>`__ for more information about the HTTP protocol.

Proxies and proxy authorization (only HTTP Basic Authorization) is supported. Use :ref:`setProxy() <doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1af80efd8df680a3eac649f50f1e8f1a82>` and :ref:`setProxyCredentials() <doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a0f7cf95ecb8272f991fce9e23c3f7495>` to set up a session through a proxy.

Construction
------------

.. index:: pair: function; HTTPClientSession
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a1a8193e4330290efb684c07932b7e669:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	HTTPClientSession()

Creates an unconnected :ref:`HTTPClientSession <doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session>`.

.. index:: pair: function; HTTPClientSession
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a2f547c0e94d50aa28e07b4d74673f74b:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	HTTPClientSession(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`StreamSocket<doxid-class_poco_1_1_net_1_1_stream_socket>`& socket)

Creates a :ref:`HTTPClientSession <doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session>` using the given socket.

The socket must not be connected. The session takes ownership of the socket.

.. index:: pair: function; HTTPClientSession
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a04f543b3ce15817a86282d8bc9c957db:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	HTTPClientSession(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address)

Creates a :ref:`HTTPClientSession <doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session>` using the given address.

.. index:: pair: function; HTTPClientSession
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a5ce34661bd3a3c5cff819204be471402:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	HTTPClientSession(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& host,
		Poco::UInt16 port = :ref:`HTTPSession::HTTP_PORT<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1a7e78432e9e6b9be68de9c85adcf259b6a7bc48abc88c649b13f10ea2acd5eb40e>`
		)

Creates a :ref:`HTTPClientSession <doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session>` using the given host and port.

.. index:: pair: function; HTTPClientSession
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a2caf8d25b8d370c90bbec223818f6caa:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	HTTPClientSession(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& host,
		Poco::UInt16 port,
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`ProxyConfig<doxid-struct_poco_1_1_net_1_1_h_t_t_p_client_session_1_1_proxy_config>`& proxyConfig
		)

Creates a :ref:`HTTPClientSession <doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session>` using the given host, port and proxy configuration.

Methods
-------

.. index:: pair: function; setHost
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a2698c66358e1943de81a75688feb0706:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	setHost(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& host)

Sets the host name of the target HTTP server.

The host must not be changed once there is an open connection to the server.

.. index:: pair: function; getHost
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a10e9cee355c5ae0b577f9dc519dc7d69:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string&
	getHost() const

Returns the host name of the target HTTP server.

.. index:: pair: function; setPort
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1af92377ff12882281b2f63b645b805b7c:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	setPort(Poco::UInt16 port)

Sets the port number of the target HTTP server.

The port number must not be changed once there is an open connection to the server.

.. index:: pair: function; getPort
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1ae1095be6b2fefd52fa241aa3de27516d:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	Poco::UInt16
	getPort() const

Returns the port number of the target HTTP server.

.. index:: pair: function; setProxy
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1af80efd8df680a3eac649f50f1e8f1a82:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	setProxy(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& host,
		Poco::UInt16 port = :ref:`HTTPSession::HTTP_PORT<doxid-class_poco_1_1_net_1_1_h_t_t_p_session_1a7e78432e9e6b9be68de9c85adcf259b6a7bc48abc88c649b13f10ea2acd5eb40e>`
		)

Sets the proxy host name and port number.

.. index:: pair: function; setProxyHost
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a2f516bcc6ef7405c6057f625cc405ad5:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	setProxyHost(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& host)

Sets the host name of the proxy server.

.. index:: pair: function; setProxyPort
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1ab50972d2bd3e0979c069967de0449370:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	setProxyPort(Poco::UInt16 port)

Sets the port number of the proxy server.

.. index:: pair: function; getProxyHost
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a4f3c8312bee0e4eaa31c665456e0c7d3:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string&
	getProxyHost() const

Returns the proxy host name.

.. index:: pair: function; getProxyPort
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1af5a9b79a0a66a1305371c73af3e8c953:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	Poco::UInt16
	getProxyPort() const

Returns the proxy port number.

.. index:: pair: function; setProxyCredentials
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a0f7cf95ecb8272f991fce9e23c3f7495:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	setProxyCredentials(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& username,
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& password
		)

Sets the username and password for proxy authentication.

Only Basic authentication is supported.

.. index:: pair: function; setProxyUsername
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a9cb37d841e82417e67ee1baf14e63385:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	setProxyUsername(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& username)

Sets the username for proxy authentication.

Only Basic authentication is supported.

.. index:: pair: function; getProxyUsername
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a910d4de5bb1e9fb34cf22825f8f9f725:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string&
	getProxyUsername() const

Returns the username for proxy authentication.

.. index:: pair: function; setProxyPassword
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a77fcb9fd390ff50540798cb9cfff9e83:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	setProxyPassword(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& password)

Sets the password for proxy authentication.

Only Basic authentication is supported.

.. index:: pair: function; getProxyPassword
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1aa42cce8aeb837ce3db241967a81f8dee:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string&
	getProxyPassword() const

Returns the password for proxy authentication.

.. index:: pair: function; setProxyConfig
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a93c4c0d1c3483cab55c2dd3f36148523:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	setProxyConfig(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`ProxyConfig<doxid-struct_poco_1_1_net_1_1_h_t_t_p_client_session_1_1_proxy_config>`& config)

Sets the proxy configuration.

.. index:: pair: function; getProxyConfig
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a44272d050b785cb74cdd573f8921c2dc:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`ProxyConfig<doxid-struct_poco_1_1_net_1_1_h_t_t_p_client_session_1_1_proxy_config>`&
	getProxyConfig() const

Returns the proxy configuration.

.. index:: pair: function; setKeepAliveTimeout
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a942490aa4ca7e2457d6ef784343b6a7f:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	setKeepAliveTimeout(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`& timeout)

Sets the connection timeout for HTTP connections.

.. index:: pair: function; getKeepAliveTimeout
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a9bf4165f166a066859825830a7c7ee78:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`&
	getKeepAliveTimeout() const

Returns the connection timeout for HTTP connections.

.. index:: pair: function; sendRequest
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a1739c6ac53078ebf6aaf4bf6cfab5c5a:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	std::ostream&
	sendRequest(:ref:`HTTPRequest<doxid-class_poco_1_1_net_1_1_h_t_t_p_request>`& request)

Sends the header for the given HTTP request to the server.

The :ref:`HTTPClientSession <doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session>` will set the request's Host and Keep-Alive headers accordingly.

The returned output stream can be used to write the request body. The stream is valid until :ref:`receiveResponse() <doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a43b4f42c34a2d9b3ed3263745645f99a>` is called or the session is destroyed.

In case a network or server failure happens while writing the request body to the returned stream, the stream state will change to bad or fail. In this case, :ref:`reset() <doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a333fb50be0047f2aebdcf2561c18a794>` should be called if the session will be reused and persistent connections are enabled to ensure a new connection will be set up for the next request.

.. index:: pair: function; receiveResponse
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a43b4f42c34a2d9b3ed3263745645f99a:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	std::istream&
	receiveResponse(:ref:`HTTPResponse<doxid-class_poco_1_1_net_1_1_h_t_t_p_response>`& response)

Receives the header for the response to the previous HTTP request.

The returned input stream can be used to read the response body. The stream is valid until :ref:`sendRequest() <doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a1739c6ac53078ebf6aaf4bf6cfab5c5a>` is called or the session is destroyed.

It must be ensured that the response stream is fully consumed before sending a new request and persistent connections are enabled. Otherwise, the unread part of the response body may be treated as part of the next request's response header, resulting in a Poco::Net::MessageException being thrown.

In case a network or server failure happens while reading the response body from the returned stream, the stream state will change to bad or fail. In this case, :ref:`reset() <doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a333fb50be0047f2aebdcf2561c18a794>` should be called if the session will be reused and persistent connections are enabled to ensure a new connection will be set up for the next request.

.. index:: pair: function; reset
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a333fb50be0047f2aebdcf2561c18a794:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	reset()

Resets the session and closes the socket.

The next request will initiate a new connection, even if persistent connections are enabled.

This should be called whenever something went wrong when sending a request (e.g., :ref:`sendRequest() <doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a1739c6ac53078ebf6aaf4bf6cfab5c5a>` or :ref:`receiveResponse() <doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a43b4f42c34a2d9b3ed3263745645f99a>` throws an exception, or the request or response stream changes into fail or bad state, but not eof state).

.. index:: pair: function; secure
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1aeb16f52db3b2ddf4782a29fcebe40b9b:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	bool
	secure() const

Return true iff the session uses SSL or TLS, or false otherwise.

.. index:: pair: function; bypassProxy
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1adbd4fc6d262876a3c9001ee9aebf6abf:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	bool
	bypassProxy() const

Returns true if the proxy should be bypassed for the current host.

.. index:: pair: function; setGlobalProxyConfig
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1aa11cc676a0f47cf84f454a9f5013e9c9:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	static
	void
	setGlobalProxyConfig(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`ProxyConfig<doxid-struct_poco_1_1_net_1_1_h_t_t_p_client_session_1_1_proxy_config>`& config)

Sets the global proxy configuration.

The global proxy configuration is used by all :ref:`HTTPClientSession <doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session>` instances, unless a different proxy configuration is explicitly set.

Warning: Setting the global proxy configuration is not thread safe. The global proxy configuration should be set at start up, before the first :ref:`HTTPClientSession <doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session>` instance is created.

.. index:: pair: function; getGlobalProxyConfig
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1ac385a751dd8e830c74a1d46c96e58c78:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	static
	:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`ProxyConfig<doxid-struct_poco_1_1_net_1_1_h_t_t_p_client_session_1_1_proxy_config>`&
	getGlobalProxyConfig()

Returns the global proxy configuration.

.. index:: pair: function; reconnect
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1ac8f4f4a59fb654116ab2424554a4abb8:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	reconnect()

Connects the underlying socket to the HTTP server.

.. index:: pair: function; write
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1ab777183142f73b28e223c8f963a1ff89:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	int
	write(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` char* buffer,
		std::streamsize length
		)

Tries to re-connect if keep-alive is on.

.. index:: pair: function; proxyRequestPrefix
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1afe2f6478c813361320777d265de7421b:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	std::string
	proxyRequestPrefix() const

Returns the prefix prepended to the :ref:`URI <doxid-class_poco_1_1_u_r_i>` for proxy requests (e.g., "http://myhost.com").

.. index:: pair: function; mustReconnect
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a7f76572fee61e515b2501f6925dd6118:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	bool
	mustReconnect() const

Checks if we can reuse a persistent connection.

.. index:: pair: function; proxyAuthenticate
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a10e9d6dc90539e710575a573d6822d20:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	proxyAuthenticate(:ref:`HTTPRequest<doxid-class_poco_1_1_net_1_1_h_t_t_p_request>`& request)

Sets the proxy credentials (Proxy-Authorization header), if proxy username and password have been set.

.. index:: pair: function; proxyAuthenticateImpl
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a16e1a7dca73098f4b7e61b049eab3b29:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	proxyAuthenticateImpl(:ref:`HTTPRequest<doxid-class_poco_1_1_net_1_1_h_t_t_p_request>`& request)

Sets the proxy credentials (Proxy-Authorization header), if proxy username and password have been set.

.. index:: pair: function; proxyConnect
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a0cbec25865b49715530e5eee4a3f36d0:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`StreamSocket<doxid-class_poco_1_1_net_1_1_stream_socket>`
	proxyConnect()

Sends a CONNECT request to the proxy server and returns a :ref:`StreamSocket <doxid-class_poco_1_1_net_1_1_stream_socket>` for the resulting connection.

.. index:: pair: function; proxyTunnel
.. _doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a2ac7cb4455cdeb8513fabba0803fcd83:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	proxyTunnel()

Calls :ref:`proxyConnect() <doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session_1a0cbec25865b49715530e5eee4a3f36d0>` and attaches the resulting :ref:`StreamSocket <doxid-class_poco_1_1_net_1_1_stream_socket>` to the :ref:`HTTPClientSession <doxid-class_poco_1_1_net_1_1_h_t_t_p_client_session>`.

