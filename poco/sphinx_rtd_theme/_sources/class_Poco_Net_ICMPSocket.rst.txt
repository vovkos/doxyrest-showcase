.. index:: pair: class; Poco::Net::ICMPSocket
.. _doxid-class_poco_1_1_net_1_1_i_c_m_p_socket:

class Poco::Net::ICMPSocket
===========================

.. toctree::
	:hidden:

Overview
~~~~~~~~

This class provides an interface to an ICMP client socket. :ref:`More...<details-class_poco_1_1_net_1_1_i_c_m_p_socket>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <ICMPSocket.h>
	
	class ICMPSocket: public :ref:`Poco::Net::Socket<doxid-class_poco_1_1_net_1_1_socket>`
	{
	public:
		// construction
	
		:ref:`ICMPSocket<doxid-class_poco_1_1_net_1_1_i_c_m_p_socket_1a17c07da3b7c97c808728197b658f04c0>`(
			:ref:`IPAddress::Family<doxid-class_poco_1_1_net_1_1_i_p_address_1a048c8fc29019f4722f2cdb5ba752d9b6>` family,
			int dataSize = 48,
			int ttl = 128,
			int timeout = 500000
			);
	
		:ref:`ICMPSocket<doxid-class_poco_1_1_net_1_1_i_c_m_p_socket_1a71e9f2f5b504a39715f8619f6b2f6df0>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Socket<doxid-class_poco_1_1_net_1_1_socket>`& socket);

		// methods
	
		ICMPSocket&
		:ref:`operator=<doxid-class_poco_1_1_net_1_1_i_c_m_p_socket_1a033f765faaf12a6a54a88b890514ab1a>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Socket<doxid-class_poco_1_1_net_1_1_socket>`& socket);
	
		int
		:ref:`sendTo<doxid-class_poco_1_1_net_1_1_i_c_m_p_socket_1af689af957e49bff6d4aa38df67d9f8a8>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address,
			int flags = 0
			);
	
		int
		:ref:`receiveFrom<doxid-class_poco_1_1_net_1_1_i_c_m_p_socket_1aa5efd3fd195754296a44bc5483d67bce>`(
			:ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address,
			int flags = 0
			);
	
		int
		:ref:`dataSize<doxid-class_poco_1_1_net_1_1_i_c_m_p_socket_1a334128faec473179e7a9c08cfccfbdf7>`() const;
	
		int
		:ref:`ttl<doxid-class_poco_1_1_net_1_1_i_c_m_p_socket_1aa4d26f75a8ac9165dbee7f8a2c70a3b1>`() const;
	
		int
		:ref:`timeout<doxid-class_poco_1_1_net_1_1_i_c_m_p_socket_1aa33409ef88ce08a0644f30160260bf43>`() const;

	protected:
		// construction
	
		:ref:`ICMPSocket<doxid-class_poco_1_1_net_1_1_i_c_m_p_socket_1a0d637a1d7dca76e02a43359188986c6d>`(:ref:`SocketImpl<doxid-class_poco_1_1_net_1_1_socket_impl>`* pImpl);
	};

Inherited Members
-----------------

.. ref-code-block:: cpp
	:class: doxyrest-overview-inherited-code-block

	public:
		// typedefs
	
		typedef std::vector<:ref:`Socket<doxid-class_poco_1_1_net_1_1_socket>`> :ref:`SocketList<doxid-class_poco_1_1_net_1_1_socket_1a315ed5b3dc1d380eaa8a7ac72c249dfe>`;

		// enums
	
		enum :ref:`SelectMode<doxid-class_poco_1_1_net_1_1_socket_1a4f2719a7b9af7039b8081636e5e2fc67>`;

		// methods
	
		:ref:`Socket<doxid-class_poco_1_1_net_1_1_socket>`&
		:ref:`operator=<doxid-class_poco_1_1_net_1_1_socket_1af9a8696aa734348dc92fe9ae048651af>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Socket<doxid-class_poco_1_1_net_1_1_socket>`& socket);
	
		bool
		:ref:`operator==<doxid-class_poco_1_1_net_1_1_socket_1a380e206bef3f6861e175384a93d23516>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Socket<doxid-class_poco_1_1_net_1_1_socket>`& socket) const;
	
		bool
		:ref:`operator!=<doxid-class_poco_1_1_net_1_1_socket_1ae08fbe96cfea9be3e9d51e2708110867>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Socket<doxid-class_poco_1_1_net_1_1_socket>`& socket) const;
	
		bool
		:ref:`operator<<doxid-class_poco_1_1_net_1_1_socket_1a606f0afdfaea73d9b34c4b4f778dcb44>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Socket<doxid-class_poco_1_1_net_1_1_socket>`& socket) const;
	
		bool
		:ref:`operator<=<doxid-class_poco_1_1_net_1_1_socket_1a0c807b51985702536be2afe8ccdfc3fb>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Socket<doxid-class_poco_1_1_net_1_1_socket>`& socket) const;
	
		bool
		:ref:`operator><doxid-class_poco_1_1_net_1_1_socket_1aa2210ca68e5ffa16388f414af3fe580d>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Socket<doxid-class_poco_1_1_net_1_1_socket>`& socket) const;
	
		bool
		:ref:`operator>=<doxid-class_poco_1_1_net_1_1_socket_1a2f3ae39578712d7e06c5c8b545d1b9fe>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Socket<doxid-class_poco_1_1_net_1_1_socket>`& socket) const;
	
		void
		:ref:`close<doxid-class_poco_1_1_net_1_1_socket_1ab29f65f9263a1cc48e641b1e41134ff1>`();
	
		bool
		:ref:`poll<doxid-class_poco_1_1_net_1_1_socket_1ad2cf208c0ce3eb1bcc50ca8c27d24e4a>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`& timeout,
			int mode
			) const;
	
		int
		:ref:`available<doxid-class_poco_1_1_net_1_1_socket_1afbe4bee1dc9e37420606c2be412debb9>`() const;
	
		void
		:ref:`setSendBufferSize<doxid-class_poco_1_1_net_1_1_socket_1a473e73c78a3bbe6161d7e7c2894b7439>`(int size);
	
		int
		:ref:`getSendBufferSize<doxid-class_poco_1_1_net_1_1_socket_1a0b5ffad8ea21959c02464355a4b3b0bd>`() const;
	
		void
		:ref:`setReceiveBufferSize<doxid-class_poco_1_1_net_1_1_socket_1a146d6b42a2f70b8cdbc6c06e4b076225>`(int size);
	
		int
		:ref:`getReceiveBufferSize<doxid-class_poco_1_1_net_1_1_socket_1aac068c66d2c67fb1847c9dd1ecdfa07a>`() const;
	
		void
		:ref:`setSendTimeout<doxid-class_poco_1_1_net_1_1_socket_1a69fd0e82469d36929f91d96d63dade89>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`& timeout);
	
		:ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`
		:ref:`getSendTimeout<doxid-class_poco_1_1_net_1_1_socket_1ae1d0b997da5324b52e1cdd7e2d884811>`() const;
	
		void
		:ref:`setReceiveTimeout<doxid-class_poco_1_1_net_1_1_socket_1a9f9001c54738af42b93fe11f132e0801>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`& timeout);
	
		:ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`
		:ref:`getReceiveTimeout<doxid-class_poco_1_1_net_1_1_socket_1ab1921d3c58dc490f6a4e1ade6cd25fc1>`() const;
	
		void
		:ref:`setOption<doxid-class_poco_1_1_net_1_1_socket_1a3d1aa81a141d1f1b3bfb071f036b0fa6>`(
			int level,
			int option,
			int value
			);
	
		void
		:ref:`setOption<doxid-class_poco_1_1_net_1_1_socket_1a83379bf3c0e5f86e1d8fee194fb0ee23>`(
			int level,
			int option,
			unsigned value
			);
	
		void
		:ref:`setOption<doxid-class_poco_1_1_net_1_1_socket_1a3b0cd6b667345d18ba14b5ee129bc644>`(
			int level,
			int option,
			unsigned char value
			);
	
		void
		:ref:`setOption<doxid-class_poco_1_1_net_1_1_socket_1a30441a67011a6c4035b98c74bab91a7e>`(
			int level,
			int option,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`& value
			);
	
		void
		:ref:`setOption<doxid-class_poco_1_1_net_1_1_socket_1a91514c913493a3fe54351e44ed83ec50>`(
			int level,
			int option,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`IPAddress<doxid-class_poco_1_1_net_1_1_i_p_address>`& value
			);
	
		void
		:ref:`getOption<doxid-class_poco_1_1_net_1_1_socket_1ad1f11bb29b991646aab5bffedd373aa2>`(
			int level,
			int option,
			int& value
			) const;
	
		void
		:ref:`getOption<doxid-class_poco_1_1_net_1_1_socket_1a7240a4349e2a12c19ed0a75f3120a349>`(
			int level,
			int option,
			unsigned& value
			) const;
	
		void
		:ref:`getOption<doxid-class_poco_1_1_net_1_1_socket_1a95730d6c5f4fbcad02e0870438f89b68>`(
			int level,
			int option,
			unsigned char& value
			) const;
	
		void
		:ref:`getOption<doxid-class_poco_1_1_net_1_1_socket_1a151742e2e524654ba8d390d67097d8cf>`(
			int level,
			int option,
			:ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`& value
			) const;
	
		void
		:ref:`getOption<doxid-class_poco_1_1_net_1_1_socket_1a16d19cd8e3d6b32044bd0c1e6b5319c9>`(
			int level,
			int option,
			:ref:`IPAddress<doxid-class_poco_1_1_net_1_1_i_p_address>`& value
			) const;
	
		void
		:ref:`setLinger<doxid-class_poco_1_1_net_1_1_socket_1a170d9415f6ecfc7fd700ede78190dabd>`(
			bool on,
			int seconds
			);
	
		void
		:ref:`getLinger<doxid-class_poco_1_1_net_1_1_socket_1aa6be0f597bddc2568514f9d7d6e3424c>`(
			bool& on,
			int& seconds
			) const;
	
		void
		:ref:`setNoDelay<doxid-class_poco_1_1_net_1_1_socket_1af9c5034912615b98ec8430d4c50cb6bd>`(bool flag);
	
		bool
		:ref:`getNoDelay<doxid-class_poco_1_1_net_1_1_socket_1a038c8e59c05cff6b5ea5998486465055>`() const;
	
		void
		:ref:`setKeepAlive<doxid-class_poco_1_1_net_1_1_socket_1a765cf373854d78ee2736b807a495863b>`(bool flag);
	
		bool
		:ref:`getKeepAlive<doxid-class_poco_1_1_net_1_1_socket_1a3de1a81d36c55c49ed6979997eef3b2d>`() const;
	
		void
		:ref:`setReuseAddress<doxid-class_poco_1_1_net_1_1_socket_1aa72a6f98d0962f419ec1f2f9c65499fb>`(bool flag);
	
		bool
		:ref:`getReuseAddress<doxid-class_poco_1_1_net_1_1_socket_1a1c5465897c9ddb84a32f758144491ef2>`() const;
	
		void
		:ref:`setReusePort<doxid-class_poco_1_1_net_1_1_socket_1aef394e0d07fb5581d3d87aa324f87508>`(bool flag);
	
		bool
		:ref:`getReusePort<doxid-class_poco_1_1_net_1_1_socket_1acc77c06b00b05ce7797dbfe49ac76b2c>`() const;
	
		void
		:ref:`setOOBInline<doxid-class_poco_1_1_net_1_1_socket_1ab1fd49a609cb99272db395eaffdef9a3>`(bool flag);
	
		bool
		:ref:`getOOBInline<doxid-class_poco_1_1_net_1_1_socket_1a0bbbca3e0d50b2c8ec6c8205c57f2268>`() const;
	
		void
		:ref:`setBlocking<doxid-class_poco_1_1_net_1_1_socket_1ac134ebb19caac648ecf010f750f5daf1>`(bool flag);
	
		bool
		:ref:`getBlocking<doxid-class_poco_1_1_net_1_1_socket_1aada554cc9847d3e1da9b29567b5c4ad4>`() const;
	
		:ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`
		:ref:`address<doxid-class_poco_1_1_net_1_1_socket_1a4d09afdbb03e7235e1453c2354bc7972>`() const;
	
		:ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`
		:ref:`peerAddress<doxid-class_poco_1_1_net_1_1_socket_1a54a140a6a3e2107e828d01b25096b040>`() const;
	
		:ref:`SocketImpl<doxid-class_poco_1_1_net_1_1_socket_impl>`*
		:ref:`impl<doxid-class_poco_1_1_net_1_1_socket_1aedb94763d83874e7294fcf9d056288ad>`() const;
	
		bool
		:ref:`secure<doxid-class_poco_1_1_net_1_1_socket_1a5e1fb2fd8fc7b70f3c34e8f6371bdd63>`() const;
	
		void
		:ref:`init<doxid-class_poco_1_1_net_1_1_socket_1a3b2019a38bdfe6a4744a690f4f4ca9d0>`(int af);
	
		static
		int
		:ref:`select<doxid-class_poco_1_1_net_1_1_socket_1a4b64fe1fc3848e6dec346b49f0708248>`(
			:ref:`SocketList<doxid-class_poco_1_1_net_1_1_socket_1a315ed5b3dc1d380eaa8a7ac72c249dfe>`& readList,
			:ref:`SocketList<doxid-class_poco_1_1_net_1_1_socket_1a315ed5b3dc1d380eaa8a7ac72c249dfe>`& writeList,
			:ref:`SocketList<doxid-class_poco_1_1_net_1_1_socket_1a315ed5b3dc1d380eaa8a7ac72c249dfe>`& exceptList,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`& timeout
			);
	
		static
		bool
		:ref:`supportsIPv4<doxid-class_poco_1_1_net_1_1_socket_1a9984aca97d4457ba8978c1a69192ad5f>`();
	
		static
		bool
		:ref:`supportsIPv6<doxid-class_poco_1_1_net_1_1_socket_1af705fd05a2f647ebbe0faee274668a9f>`();

	protected:
		// methods
	
		poco_socket_t
		:ref:`sockfd<doxid-class_poco_1_1_net_1_1_socket_1a00217abc6aed61f8accb03c8239727a1>`() const;

.. _details-class_poco_1_1_net_1_1_i_c_m_p_socket:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

This class provides an interface to an ICMP client socket.

Construction
------------

.. index:: pair: function; ICMPSocket
.. _doxid-class_poco_1_1_net_1_1_i_c_m_p_socket_1a17c07da3b7c97c808728197b658f04c0:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	ICMPSocket(
		:ref:`IPAddress::Family<doxid-class_poco_1_1_net_1_1_i_p_address_1a048c8fc29019f4722f2cdb5ba752d9b6>` family,
		int dataSize = 48,
		int ttl = 128,
		int timeout = 500000
		)

Creates an unconnected ICMP socket.

The socket will be created for the given address family.

.. index:: pair: function; ICMPSocket
.. _doxid-class_poco_1_1_net_1_1_i_c_m_p_socket_1a71e9f2f5b504a39715f8619f6b2f6df0:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	ICMPSocket(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Socket<doxid-class_poco_1_1_net_1_1_socket>`& socket)

Creates the :ref:`ICMPSocket <doxid-class_poco_1_1_net_1_1_i_c_m_p_socket>` with the :ref:`SocketImpl <doxid-class_poco_1_1_net_1_1_socket_impl>` from another socket.

The :ref:`SocketImpl <doxid-class_poco_1_1_net_1_1_socket_impl>` must be a :ref:`ICMPSocketImpl <doxid-class_poco_1_1_net_1_1_i_c_m_p_socket_impl>`, otherwise an InvalidArgumentException will be thrown.

.. index:: pair: function; ICMPSocket
.. _doxid-class_poco_1_1_net_1_1_i_c_m_p_socket_1a0d637a1d7dca76e02a43359188986c6d:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	ICMPSocket(:ref:`SocketImpl<doxid-class_poco_1_1_net_1_1_socket_impl>`* pImpl)

Creates the :ref:`Socket <doxid-class_poco_1_1_net_1_1_socket>` and attaches the given :ref:`SocketImpl <doxid-class_poco_1_1_net_1_1_socket_impl>`.

The socket takes ownership of the :ref:`SocketImpl <doxid-class_poco_1_1_net_1_1_socket_impl>`.

The :ref:`SocketImpl <doxid-class_poco_1_1_net_1_1_socket_impl>` must be a :ref:`ICMPSocketImpl <doxid-class_poco_1_1_net_1_1_i_c_m_p_socket_impl>`, otherwise an InvalidArgumentException will be thrown.

Methods
-------

.. index:: pair: function; operator=
.. _doxid-class_poco_1_1_net_1_1_i_c_m_p_socket_1a033f765faaf12a6a54a88b890514ab1a:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	ICMPSocket&
	operator=(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Socket<doxid-class_poco_1_1_net_1_1_socket>`& socket)

Assignment operator.

Releases the socket's :ref:`SocketImpl <doxid-class_poco_1_1_net_1_1_socket_impl>` and attaches the :ref:`SocketImpl <doxid-class_poco_1_1_net_1_1_socket_impl>` from the other socket and increments the reference count of the :ref:`SocketImpl <doxid-class_poco_1_1_net_1_1_socket_impl>`.

.. index:: pair: function; sendTo
.. _doxid-class_poco_1_1_net_1_1_i_c_m_p_socket_1af689af957e49bff6d4aa38df67d9f8a8:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	int
	sendTo(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address,
		int flags = 0
		)

Sends an ICMP request through the socket to the given address.

Returns the number of bytes sent.

.. index:: pair: function; receiveFrom
.. _doxid-class_poco_1_1_net_1_1_i_c_m_p_socket_1aa5efd3fd195754296a44bc5483d67bce:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	int
	receiveFrom(
		:ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address,
		int flags = 0
		)

Receives data from the socket.

Stores the address of the sender in address.

Returns the time elapsed since the originating request was sent.

.. index:: pair: function; dataSize
.. _doxid-class_poco_1_1_net_1_1_i_c_m_p_socket_1a334128faec473179e7a9c08cfccfbdf7:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	int
	dataSize() const

Returns the data size in bytes.

.. index:: pair: function; ttl
.. _doxid-class_poco_1_1_net_1_1_i_c_m_p_socket_1aa4d26f75a8ac9165dbee7f8a2c70a3b1:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	int
	ttl() const

Returns the Time-To-Live value.

.. index:: pair: function; timeout
.. _doxid-class_poco_1_1_net_1_1_i_c_m_p_socket_1aa33409ef88ce08a0644f30160260bf43:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	int
	timeout() const

Returns the socket timeout value.

