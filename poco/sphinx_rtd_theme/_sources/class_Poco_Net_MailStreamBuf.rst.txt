.. index:: pair: class; Poco::Net::MailStreamBuf
.. _doxid-class_poco_1_1_net_1_1_mail_stream_buf:

class Poco::Net::MailStreamBuf
==============================

.. toctree::
	:hidden:

Overview
~~~~~~~~

The sole purpose of this stream buffer is to replace a "\r\n.\r\n" character sequence with a "\r\n..\r\n" sequence for output streams and vice-versa for input streams. :ref:`More...<details-class_poco_1_1_net_1_1_mail_stream_buf>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <MailStream.h>
	
	class MailStreamBuf: public :ref:`Poco::BasicUnbufferedStreamBuf<doxid-class_poco_1_1_basic_unbuffered_stream_buf>`
	{
	public:
		// construction
	
		:ref:`MailStreamBuf<doxid-class_poco_1_1_net_1_1_mail_stream_buf_1a661d70c862e12981f112965b51c6dfb0>`(std::istream& istr);
		:ref:`MailStreamBuf<doxid-class_poco_1_1_net_1_1_mail_stream_buf_1ac22c3150d02400e4e1be324fec246a59>`(std::ostream& ostr);

		// methods
	
		void
		:ref:`close<doxid-class_poco_1_1_net_1_1_mail_stream_buf_1aced3f6fb06476e47937e88f30e08ce59>`();

	protected:
		// methods
	
		virtual
		int
		:target:`readFromDevice<doxid-class_poco_1_1_net_1_1_mail_stream_buf_1a90c7e8129be38ed6e4cf14b97ce23447>`();
	
		int
		:target:`writeToDevice<doxid-class_poco_1_1_net_1_1_mail_stream_buf_1a443265a3beafdfe45682e7bb8f147107>`(char c);
	
		int
		:target:`readOne<doxid-class_poco_1_1_net_1_1_mail_stream_buf_1abdb51e66497f1bc08727376c1a8d2aa4>`();
	};

Inherited Members
-----------------

.. ref-code-block:: cpp
	:class: doxyrest-overview-inherited-code-block

	public:
		// methods
	
		virtual
		:ref:`int_type<doxid-class_poco_1_1_basic_unbuffered_stream_buf_1af4ed13f581184a5758933d22d83ed58e>`
		:ref:`overflow<doxid-class_poco_1_1_basic_unbuffered_stream_buf_1a383786cdc9ee1858c2be846a6bb95eb5>`(:ref:`int_type<doxid-class_poco_1_1_basic_unbuffered_stream_buf_1af4ed13f581184a5758933d22d83ed58e>` c);
	
		virtual
		:ref:`int_type<doxid-class_poco_1_1_basic_unbuffered_stream_buf_1af4ed13f581184a5758933d22d83ed58e>`
		:ref:`underflow<doxid-class_poco_1_1_basic_unbuffered_stream_buf_1a6a1ec03bd68ac0d7d0b690df307548c3>`();
	
		virtual
		:ref:`int_type<doxid-class_poco_1_1_basic_unbuffered_stream_buf_1af4ed13f581184a5758933d22d83ed58e>`
		:ref:`uflow<doxid-class_poco_1_1_basic_unbuffered_stream_buf_1ac9bdf1db12470b9213e598b6a697a1c8>`();
	
		virtual
		:ref:`int_type<doxid-class_poco_1_1_basic_unbuffered_stream_buf_1af4ed13f581184a5758933d22d83ed58e>`
		:ref:`pbackfail<doxid-class_poco_1_1_basic_unbuffered_stream_buf_1a25fb7df73df7f7e51fcdf520af0e9c0c>`(:ref:`int_type<doxid-class_poco_1_1_basic_unbuffered_stream_buf_1af4ed13f581184a5758933d22d83ed58e>` c);
	
		virtual
		std::streamsize
		:ref:`xsgetn<doxid-class_poco_1_1_basic_unbuffered_stream_buf_1ab637da26331962c509da9050b9eb3d6f>`(
			:ref:`char_type<doxid-class_poco_1_1_basic_unbuffered_stream_buf_1ae1adb26f3babc92ffa99d19d260486dd>`* p,
			std::streamsize count
			);

	protected:
		// typedefs
	
		typedef std::basic_streambuf<ch, tr> :ref:`Base<doxid-class_poco_1_1_basic_unbuffered_stream_buf_1a8d4e5dd8a6723d41cf27e864804335c3>`;
		typedef std::basic_ios<ch, tr> :ref:`IOS<doxid-class_poco_1_1_basic_unbuffered_stream_buf_1af4fc862b52cd539e16848d4e6e7c1375>`;
		typedef ch :ref:`char_type<doxid-class_poco_1_1_basic_unbuffered_stream_buf_1ae1adb26f3babc92ffa99d19d260486dd>`;
		typedef tr :ref:`char_traits<doxid-class_poco_1_1_basic_unbuffered_stream_buf_1a92ac446a28fe6bda224f89a836db052f>`;
		typedef Base::int_type :ref:`int_type<doxid-class_poco_1_1_basic_unbuffered_stream_buf_1af4ed13f581184a5758933d22d83ed58e>`;
		typedef Base::pos_type :ref:`pos_type<doxid-class_poco_1_1_basic_unbuffered_stream_buf_1a7ff4716397c4aa1a590431c31c98db79>`;
		typedef Base::off_type :ref:`off_type<doxid-class_poco_1_1_basic_unbuffered_stream_buf_1a6b0ee0a102317c7d40e4af00994a7007>`;
		typedef IOS::openmode :ref:`openmode<doxid-class_poco_1_1_basic_unbuffered_stream_buf_1a338f2102e31674bb03238208165ba872>`;

		// methods
	
		static
		:ref:`int_type<doxid-class_poco_1_1_basic_unbuffered_stream_buf_1af4ed13f581184a5758933d22d83ed58e>`
		:ref:`charToInt<doxid-class_poco_1_1_basic_unbuffered_stream_buf_1a2071547aeb7e1813ec16232c3bc5abe4>`(:ref:`char_type<doxid-class_poco_1_1_basic_unbuffered_stream_buf_1ae1adb26f3babc92ffa99d19d260486dd>` c);

.. _details-class_poco_1_1_net_1_1_mail_stream_buf:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

The sole purpose of this stream buffer is to replace a "\r\n.\r\n" character sequence with a "\r\n..\r\n" sequence for output streams and vice-versa for input streams.

This is used when sending mail messages to SMTP servers, or receiving mail messages from POP servers.

See RFC 2181 (Simple Mail Transfer Protocol) and RFC 1939 (Post Office Protocol - Version 3) for more information.

Construction
------------

.. index:: pair: function; MailStreamBuf
.. _doxid-class_poco_1_1_net_1_1_mail_stream_buf_1a661d70c862e12981f112965b51c6dfb0:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	MailStreamBuf(std::istream& istr)

Creates the :ref:`MailStreamBuf <doxid-class_poco_1_1_net_1_1_mail_stream_buf>` and connects it to the given input stream.

.. index:: pair: function; MailStreamBuf
.. _doxid-class_poco_1_1_net_1_1_mail_stream_buf_1ac22c3150d02400e4e1be324fec246a59:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	MailStreamBuf(std::ostream& ostr)

Creates the :ref:`MailStreamBuf <doxid-class_poco_1_1_net_1_1_mail_stream_buf>` and connects it to the given output stream.

Methods
-------

.. index:: pair: function; close
.. _doxid-class_poco_1_1_net_1_1_mail_stream_buf_1aced3f6fb06476e47937e88f30e08ce59:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	close()

Writes the terminating period, followed by CR-LF.

