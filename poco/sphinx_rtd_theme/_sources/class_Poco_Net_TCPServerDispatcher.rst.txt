.. index:: pair: class; Poco::Net::TCPServerDispatcher
.. _doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher:

class Poco::Net::TCPServerDispatcher
====================================

.. toctree::
	:hidden:

Overview
~~~~~~~~

A helper class for :ref:`TCPServer <doxid-class_poco_1_1_net_1_1_t_c_p_server>` that dispatches connections to server connection threads. :ref:`More...<details-class_poco_1_1_net_1_1_t_c_p_server_dispatcher>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <TCPServerDispatcher.h>
	
	class TCPServerDispatcher: public :ref:`Poco::Runnable<doxid-class_poco_1_1_runnable>`
	{
	public:
		// construction
	
		:ref:`TCPServerDispatcher<doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1ad640f24fe40c479453fdb58942639c6b>`(
			:ref:`TCPServerConnectionFactory::Ptr<doxid-class_poco_1_1_net_1_1_t_c_p_server_connection_factory_1ae0d969474f313a3d530187fc72024688>` pFactory,
			:ref:`Poco::ThreadPool<doxid-class_poco_1_1_thread_pool>`& threadPool,
			:ref:`TCPServerParams::Ptr<doxid-class_poco_1_1_net_1_1_t_c_p_server_params_1a2764661030f4c5fd7da346cb2fdddb83>` pParams
			);

		// methods
	
		void
		:ref:`duplicate<doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1aa2c1cb5dd8eff9feaa3c74e8c34046c6>`();
	
		void
		:ref:`release<doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1ab7b35715fa3c88b9e09bcee5853c4e05>`();
	
		virtual
		void
		:ref:`run<doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1a7dd542cff505b89a67a1cb536bf9ca59>`();
	
		void
		:ref:`enqueue<doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1aeb0aa87de24f5dc9bc22c58e6c5756d1>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`StreamSocket<doxid-class_poco_1_1_net_1_1_stream_socket>`& socket);
	
		void
		:ref:`stop<doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1a07fd569f55ee13ba6b11fd96cd750d0a>`();
	
		int
		:ref:`currentThreads<doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1ab5d2bf05683a52b1c906a687183843a1>`() const;
	
		int
		:ref:`maxThreads<doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1a667da594856ab0ceb1bf65a6b86b780b>`() const;
	
		int
		:ref:`totalConnections<doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1abacedd0dc2c0e954d8d024fa08d75c3d>`() const;
	
		int
		:ref:`currentConnections<doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1a077624735e9ae9674fb6fefa63f4a051>`() const;
	
		int
		:ref:`maxConcurrentConnections<doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1ab13ee29324b1cbc60f6a483357ba1c7f>`() const;
	
		int
		:ref:`queuedConnections<doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1a59344763c0b10a9106973c7e8e4c48e9>`() const;
	
		int
		:ref:`refusedConnections<doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1ad54abcc979eb10d644610171f640e15d>`() const;
	
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`TCPServerParams<doxid-class_poco_1_1_net_1_1_t_c_p_server_params>`&
		:ref:`params<doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1a2ea50d3b38bed7850c4eb56354c7a950>`() const;

	protected:
		// methods
	
		void
		:ref:`beginConnection<doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1a3d94bfb6506cb8e3a5b93e3636e6462c>`();
	
		void
		:ref:`endConnection<doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1ae54128c030a8241c7a8998af182eeefe>`();
	};

Inherited Members
-----------------

.. ref-code-block:: cpp
	:class: doxyrest-overview-inherited-code-block

	public:
		// methods
	
		virtual
		void
		:ref:`run<doxid-class_poco_1_1_runnable_1ad89816e81207bf5f1e52d5df860d11d4>`() = 0;

.. _details-class_poco_1_1_net_1_1_t_c_p_server_dispatcher:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

A helper class for :ref:`TCPServer <doxid-class_poco_1_1_net_1_1_t_c_p_server>` that dispatches connections to server connection threads.

Construction
------------

.. index:: pair: function; TCPServerDispatcher
.. _doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1ad640f24fe40c479453fdb58942639c6b:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	TCPServerDispatcher(
		:ref:`TCPServerConnectionFactory::Ptr<doxid-class_poco_1_1_net_1_1_t_c_p_server_connection_factory_1ae0d969474f313a3d530187fc72024688>` pFactory,
		:ref:`Poco::ThreadPool<doxid-class_poco_1_1_thread_pool>`& threadPool,
		:ref:`TCPServerParams::Ptr<doxid-class_poco_1_1_net_1_1_t_c_p_server_params_1a2764661030f4c5fd7da346cb2fdddb83>` pParams
		)

Creates the :ref:`TCPServerDispatcher <doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher>`.

The dispatcher takes ownership of the :ref:`TCPServerParams <doxid-class_poco_1_1_net_1_1_t_c_p_server_params>` object. If no :ref:`TCPServerParams <doxid-class_poco_1_1_net_1_1_t_c_p_server_params>` object is supplied, the :ref:`TCPServerDispatcher <doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher>` creates one.

Methods
-------

.. index:: pair: function; duplicate
.. _doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1aa2c1cb5dd8eff9feaa3c74e8c34046c6:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	duplicate()

Increments the object's reference count.

.. index:: pair: function; release
.. _doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1ab7b35715fa3c88b9e09bcee5853c4e05:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	release()

Decrements the object's reference count and deletes the object if the count reaches zero.

.. index:: pair: function; run
.. _doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1a7dd542cff505b89a67a1cb536bf9ca59:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	run()

Runs the dispatcher.

.. index:: pair: function; enqueue
.. _doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1aeb0aa87de24f5dc9bc22c58e6c5756d1:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	enqueue(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`StreamSocket<doxid-class_poco_1_1_net_1_1_stream_socket>`& socket)

Queues the given socket connection.

.. index:: pair: function; stop
.. _doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1a07fd569f55ee13ba6b11fd96cd750d0a:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	stop()

Stops the dispatcher.

.. index:: pair: function; currentThreads
.. _doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1ab5d2bf05683a52b1c906a687183843a1:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	int
	currentThreads() const

Returns the number of currently used threads.

.. index:: pair: function; maxThreads
.. _doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1a667da594856ab0ceb1bf65a6b86b780b:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	int
	maxThreads() const

Returns the maximum number of threads available.

.. index:: pair: function; totalConnections
.. _doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1abacedd0dc2c0e954d8d024fa08d75c3d:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	int
	totalConnections() const

Returns the total number of handled connections.

.. index:: pair: function; currentConnections
.. _doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1a077624735e9ae9674fb6fefa63f4a051:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	int
	currentConnections() const

Returns the number of currently handled connections.

.. index:: pair: function; maxConcurrentConnections
.. _doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1ab13ee29324b1cbc60f6a483357ba1c7f:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	int
	maxConcurrentConnections() const

Returns the maximum number of concurrently handled connections.

.. index:: pair: function; queuedConnections
.. _doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1a59344763c0b10a9106973c7e8e4c48e9:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	int
	queuedConnections() const

Returns the number of queued connections.

.. index:: pair: function; refusedConnections
.. _doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1ad54abcc979eb10d644610171f640e15d:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	int
	refusedConnections() const

Returns the number of refused connections.

.. index:: pair: function; params
.. _doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1a2ea50d3b38bed7850c4eb56354c7a950:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`TCPServerParams<doxid-class_poco_1_1_net_1_1_t_c_p_server_params>`&
	params() const

Returns a const reference to the TCPServerParam object.

.. index:: pair: function; beginConnection
.. _doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1a3d94bfb6506cb8e3a5b93e3636e6462c:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	beginConnection()

Updates the performance counters.

.. index:: pair: function; endConnection
.. _doxid-class_poco_1_1_net_1_1_t_c_p_server_dispatcher_1ae54128c030a8241c7a8998af182eeefe:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	endConnection()

Updates the performance counters.

