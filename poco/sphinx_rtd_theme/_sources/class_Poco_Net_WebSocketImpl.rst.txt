.. index:: pair: class; Poco::Net::WebSocketImpl
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl:

class Poco::Net::WebSocketImpl
==============================

.. toctree::
	:hidden:

Overview
~~~~~~~~

This class implements a :ref:`WebSocket <doxid-class_poco_1_1_net_1_1_web_socket>`, according to the :ref:`WebSocket <doxid-class_poco_1_1_net_1_1_web_socket>` protocol described in RFC 6455. :ref:`More...<details-class_poco_1_1_net_1_1_web_socket_impl>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <WebSocketImpl.h>
	
	class WebSocketImpl: public :ref:`Poco::Net::StreamSocketImpl<doxid-class_poco_1_1_net_1_1_stream_socket_impl>`
	{
	public:
		// construction
	
		:ref:`WebSocketImpl<doxid-class_poco_1_1_net_1_1_web_socket_impl_1afe9f8ca61441219bac81f9b9bc66dc60>`(
			:ref:`StreamSocketImpl<doxid-class_poco_1_1_net_1_1_stream_socket_impl>`* pStreamSocketImpl,
			:ref:`HTTPSession<doxid-class_poco_1_1_net_1_1_h_t_t_p_session>`& session,
			bool mustMaskPayload
			);

		// methods
	
		virtual
		int
		:ref:`sendBytes<doxid-class_poco_1_1_net_1_1_web_socket_impl_1af7ce7cde53cfad634b2a94c0e2066c1e>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* buffer,
			int length,
			int flags
			);
	
		virtual
		int
		:ref:`receiveBytes<doxid-class_poco_1_1_net_1_1_web_socket_impl_1acf70121fa7d1ff069185207a8abd0b67>`(
			void* buffer,
			int length,
			int flags
			);
	
		virtual
		:ref:`SocketImpl<doxid-class_poco_1_1_net_1_1_socket_impl>`*
		:ref:`acceptConnection<doxid-class_poco_1_1_net_1_1_web_socket_impl_1a0131ec003fa5c96d8a82b495afc5afb8>`(:ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& clientAddr);
	
		virtual
		void
		:ref:`connect<doxid-class_poco_1_1_net_1_1_web_socket_impl_1a1d5948951d616ff72a0cbcf9fcf9f607>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address);
	
		virtual
		void
		:ref:`connect<doxid-class_poco_1_1_net_1_1_web_socket_impl_1ae3b58711323509afb0fd5cd4631f376b>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`& timeout
			);
	
		virtual
		void
		:ref:`connectNB<doxid-class_poco_1_1_net_1_1_web_socket_impl_1a2355742539b36d750b8759eeec7fed10>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address);
	
		virtual
		void
		:ref:`bind<doxid-class_poco_1_1_net_1_1_web_socket_impl_1a5fdf82f8106f7c6cf83b648d50a1e14d>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address,
			bool reuseAddress = false
			);
	
		virtual
		void
		:ref:`bind6<doxid-class_poco_1_1_net_1_1_web_socket_impl_1a5e45a4b5ecdffbd878ee53994010ebd1>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address,
			bool reuseAddress = false,
			bool ipV6Only = false
			);
	
		virtual
		void
		:ref:`listen<doxid-class_poco_1_1_net_1_1_web_socket_impl_1a0fd0a80c8dc5d3ca51d93e284528ebe1>`(int backlog = 64);
	
		virtual
		void
		:ref:`close<doxid-class_poco_1_1_net_1_1_web_socket_impl_1abff2e7d88daf29f1351177aa2afe63d9>`();
	
		virtual
		void
		:ref:`shutdownReceive<doxid-class_poco_1_1_net_1_1_web_socket_impl_1a96d41c0216bce818d9cc470fb6bbe6be>`();
	
		virtual
		void
		:ref:`shutdownSend<doxid-class_poco_1_1_net_1_1_web_socket_impl_1ae96eae80c853ff56be05357caa1333ab>`();
	
		virtual
		void
		:ref:`shutdown<doxid-class_poco_1_1_net_1_1_web_socket_impl_1a222a4cef97dcd276deeda9171f5bfbff>`();
	
		virtual
		int
		:ref:`sendTo<doxid-class_poco_1_1_net_1_1_web_socket_impl_1a4e57ec5f39e4fbce7a2347e45c8ae09d>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* buffer,
			int length,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address,
			int flags = 0
			);
	
		virtual
		int
		:ref:`receiveFrom<doxid-class_poco_1_1_net_1_1_web_socket_impl_1a0b2880435f0a7dfdf3f9251587d39da8>`(
			void* buffer,
			int length,
			:ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address,
			int flags = 0
			);
	
		virtual
		void
		:ref:`sendUrgent<doxid-class_poco_1_1_net_1_1_web_socket_impl_1a0bc0ed2c90f1e6b4cefaabd3e5834d3f>`(unsigned char data);
	
		virtual
		int
		:ref:`available<doxid-class_poco_1_1_net_1_1_web_socket_impl_1a0a31fa6fe898c4bd53c5752331904b5c>`();
	
		virtual
		bool
		:ref:`secure<doxid-class_poco_1_1_net_1_1_web_socket_impl_1afd964ee1af69e3b0cfa3567649f68be6>`() const;
	
		virtual
		void
		:ref:`setSendTimeout<doxid-class_poco_1_1_net_1_1_web_socket_impl_1afc872a7794e2a3b7e8f31d2ce9b70583>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`& timeout);
	
		virtual
		:ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`
		:ref:`getSendTimeout<doxid-class_poco_1_1_net_1_1_web_socket_impl_1a2cded97e5cfbef2e9a3b499621838e67>`();
	
		virtual
		void
		:ref:`setReceiveTimeout<doxid-class_poco_1_1_net_1_1_web_socket_impl_1ae0d45acf249427dee7e1130f2389d44d>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`& timeout);
	
		virtual
		:ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`
		:ref:`getReceiveTimeout<doxid-class_poco_1_1_net_1_1_web_socket_impl_1abb72e8a5a5e99726bc9b405700cf3f5a>`();
	
		int
		:ref:`frameFlags<doxid-class_poco_1_1_net_1_1_web_socket_impl_1a2db68986ced4331f92105d662297408c>`() const;
	
		bool
		:ref:`mustMaskPayload<doxid-class_poco_1_1_net_1_1_web_socket_impl_1a2dedc61f6fcf599774c12469456bf50e>`() const;

	protected:
		// enums
	
		enum
		{
		    :target:`FRAME_FLAG_MASK<doxid-class_poco_1_1_net_1_1_web_socket_impl_1a82b68196a2c9fb82051eddf510bb3cf7ab7a1aea7781df20dbf9a5ef6989058a5>`   = 0x80,
		    :target:`MAX_HEADER_LENGTH<doxid-class_poco_1_1_net_1_1_web_socket_impl_1a82b68196a2c9fb82051eddf510bb3cf7ae4b45ee936bf864fde8ab7db01d15e8c>` = 14,
		};

		// methods
	
		int
		:target:`receiveNBytes<doxid-class_poco_1_1_net_1_1_web_socket_impl_1a1226497901cb481ddf19359e57df0b3c>`(
			void* buffer,
			int bytes
			);
	
		int
		:target:`receiveSomeBytes<doxid-class_poco_1_1_net_1_1_web_socket_impl_1a8a664588e48f9f29ba210459aa853055>`(
			char* buffer,
			int bytes
			);
	};

Inherited Members
-----------------

.. ref-code-block:: cpp
	:class: doxyrest-overview-inherited-code-block

	public:
		// enums
	
		enum :ref:`SelectMode<doxid-class_poco_1_1_net_1_1_socket_impl_1a83da33f180ce05c177be867406e3f780>`;

		// methods
	
		void
		:ref:`duplicate<doxid-class_poco_1_1_ref_counted_object_1a13296da57127169ed0709b3dde86bf0d>`() const;
	
		void
		:ref:`release<doxid-class_poco_1_1_ref_counted_object_1a14bf204923a6ba4b97df6f8fdb9deb72>`() const;
	
		int
		:ref:`referenceCount<doxid-class_poco_1_1_ref_counted_object_1a45b62ccd833bcb06055399c2d889eb35>`() const;
	
		virtual
		:ref:`SocketImpl<doxid-class_poco_1_1_net_1_1_socket_impl>`*
		:ref:`acceptConnection<doxid-class_poco_1_1_net_1_1_socket_impl_1a16153f827776eb018d36aeb467cde290>`(:ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& clientAddr);
	
		virtual
		void
		:ref:`connect<doxid-class_poco_1_1_net_1_1_socket_impl_1a9272c566890928fc5c9e96bcf37aa1ff>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address);
	
		virtual
		void
		:ref:`connect<doxid-class_poco_1_1_net_1_1_socket_impl_1ae4729b67ec92f0a604702cb88c6f1e6b>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`& timeout
			);
	
		virtual
		void
		:ref:`connectNB<doxid-class_poco_1_1_net_1_1_socket_impl_1a290c5e4887abdc5fd7bb5bd7d8856806>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address);
	
		virtual
		void
		:ref:`bind<doxid-class_poco_1_1_net_1_1_socket_impl_1a43d3da41f5b2b22cf75b6eb222fc53a5>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address,
			bool reuseAddress = false
			);
	
		virtual
		void
		:ref:`bind6<doxid-class_poco_1_1_net_1_1_socket_impl_1a5e2a45cbf7d403ddd1edb4585da193f5>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address,
			bool reuseAddress = false,
			bool ipV6Only = false
			);
	
		virtual
		void
		:ref:`listen<doxid-class_poco_1_1_net_1_1_socket_impl_1a0994375254b7e67388330c1197b242e1>`(int backlog = 64);
	
		virtual
		void
		:ref:`close<doxid-class_poco_1_1_net_1_1_socket_impl_1a823bc2ba9a95531c00051611c9cdde64>`();
	
		virtual
		void
		:ref:`shutdownReceive<doxid-class_poco_1_1_net_1_1_socket_impl_1a0e92238ec6c7228a8a36c829cf500662>`();
	
		virtual
		void
		:ref:`shutdownSend<doxid-class_poco_1_1_net_1_1_socket_impl_1acdcad7d9b270930874dfed91d0b621a6>`();
	
		virtual
		void
		:ref:`shutdown<doxid-class_poco_1_1_net_1_1_socket_impl_1ae962421bd2ce3466ec906178c00018e7>`();
	
		virtual
		int
		:ref:`sendBytes<doxid-class_poco_1_1_net_1_1_socket_impl_1aa59d3c72d02155d6075cb3b681e691f0>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* buffer,
			int length,
			int flags = 0
			);
	
		virtual
		int
		:ref:`receiveBytes<doxid-class_poco_1_1_net_1_1_socket_impl_1a0fad62e3c1372bd59866007e2191f470>`(
			void* buffer,
			int length,
			int flags = 0
			);
	
		virtual
		int
		:ref:`sendTo<doxid-class_poco_1_1_net_1_1_socket_impl_1a1bb8b92cd44600dc1067c753d53d3f34>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* buffer,
			int length,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address,
			int flags = 0
			);
	
		virtual
		int
		:ref:`receiveFrom<doxid-class_poco_1_1_net_1_1_socket_impl_1a9c8592fd354cb5127498628062561109>`(
			void* buffer,
			int length,
			:ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address,
			int flags = 0
			);
	
		virtual
		void
		:ref:`sendUrgent<doxid-class_poco_1_1_net_1_1_socket_impl_1a0e9222ef356eef6a09f6c59be3da75ea>`(unsigned char data);
	
		virtual
		int
		:ref:`available<doxid-class_poco_1_1_net_1_1_socket_impl_1a05ce9b0b60e4b72ed4f2cb6790d59059>`();
	
		virtual
		bool
		:ref:`poll<doxid-class_poco_1_1_net_1_1_socket_impl_1a79bb81af87335fd4a000f235af7a9ef2>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`& timeout,
			int mode
			);
	
		virtual
		void
		:ref:`setSendBufferSize<doxid-class_poco_1_1_net_1_1_socket_impl_1afeaa1b59ae76e8c38a8f92cb1a19e0b9>`(int size);
	
		virtual
		int
		:ref:`getSendBufferSize<doxid-class_poco_1_1_net_1_1_socket_impl_1a56ede6958c25cdeb73833648e4909d7c>`();
	
		virtual
		void
		:ref:`setReceiveBufferSize<doxid-class_poco_1_1_net_1_1_socket_impl_1a34e15aeb178ffb949ab24d0a66d7e175>`(int size);
	
		virtual
		int
		:ref:`getReceiveBufferSize<doxid-class_poco_1_1_net_1_1_socket_impl_1a4e4ed01d5eb87858612f1b08db4d8c9e>`();
	
		virtual
		void
		:ref:`setSendTimeout<doxid-class_poco_1_1_net_1_1_socket_impl_1a6e7069c5e8385ec9581522cabaaef724>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`& timeout);
	
		virtual
		:ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`
		:ref:`getSendTimeout<doxid-class_poco_1_1_net_1_1_socket_impl_1a24b1e5bdf46170d24262bf6cee5dd135>`();
	
		virtual
		void
		:ref:`setReceiveTimeout<doxid-class_poco_1_1_net_1_1_socket_impl_1a5401c99e2a540d19f128f807e27172fa>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`& timeout);
	
		virtual
		:ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`
		:ref:`getReceiveTimeout<doxid-class_poco_1_1_net_1_1_socket_impl_1a1e165309a5ce14e9c661dec13308a612>`();
	
		virtual
		:ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`
		:ref:`address<doxid-class_poco_1_1_net_1_1_socket_impl_1aef377790f80420714811b589dc3af635>`();
	
		virtual
		:ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`
		:ref:`peerAddress<doxid-class_poco_1_1_net_1_1_socket_impl_1a59d6dc5bd3a908cdd3af6ea902a13a8b>`();
	
		void
		:ref:`setOption<doxid-class_poco_1_1_net_1_1_socket_impl_1a35d99f6d235985827cd382e6e74cf7ca>`(
			int level,
			int option,
			int value
			);
	
		void
		:ref:`setOption<doxid-class_poco_1_1_net_1_1_socket_impl_1af7a3e1e5a6975cf88dec37028063d170>`(
			int level,
			int option,
			unsigned value
			);
	
		void
		:ref:`setOption<doxid-class_poco_1_1_net_1_1_socket_impl_1ac0f8a780abeb3d13e9bbe3cca02e6378>`(
			int level,
			int option,
			unsigned char value
			);
	
		void
		:ref:`setOption<doxid-class_poco_1_1_net_1_1_socket_impl_1ab082d67fa3ea3c11238926f0d6a07666>`(
			int level,
			int option,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`& value
			);
	
		void
		:ref:`setOption<doxid-class_poco_1_1_net_1_1_socket_impl_1a3212bf116ed3319ff59f0a008c47006e>`(
			int level,
			int option,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`IPAddress<doxid-class_poco_1_1_net_1_1_i_p_address>`& value
			);
	
		virtual
		void
		:ref:`setRawOption<doxid-class_poco_1_1_net_1_1_socket_impl_1a3753ed5d4277882b8cbd32492c56f6a0>`(
			int level,
			int option,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* value,
			poco_socklen_t length
			);
	
		void
		:ref:`getOption<doxid-class_poco_1_1_net_1_1_socket_impl_1aa9e27c9fcff68c77257228a976ca5153>`(
			int level,
			int option,
			int& value
			);
	
		void
		:ref:`getOption<doxid-class_poco_1_1_net_1_1_socket_impl_1adce6fbbb34a8623054e08f684dd2b41b>`(
			int level,
			int option,
			unsigned& value
			);
	
		void
		:ref:`getOption<doxid-class_poco_1_1_net_1_1_socket_impl_1a2ad26450a604cbb7d1ff387a46e77e58>`(
			int level,
			int option,
			unsigned char& value
			);
	
		void
		:ref:`getOption<doxid-class_poco_1_1_net_1_1_socket_impl_1a60a11678ff2884e60982b7e0f0d02e3f>`(
			int level,
			int option,
			:ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`& value
			);
	
		void
		:ref:`getOption<doxid-class_poco_1_1_net_1_1_socket_impl_1a9912f75c526f124366931422e1775711>`(
			int level,
			int option,
			:ref:`IPAddress<doxid-class_poco_1_1_net_1_1_i_p_address>`& value
			);
	
		virtual
		void
		:ref:`getRawOption<doxid-class_poco_1_1_net_1_1_socket_impl_1a282fbc921cdd87e191daa67e150a1ddb>`(
			int level,
			int option,
			void* value,
			poco_socklen_t& length
			);
	
		void
		:ref:`setLinger<doxid-class_poco_1_1_net_1_1_socket_impl_1aca64e2ea533f82b9e78b668ad059240d>`(
			bool on,
			int seconds
			);
	
		void
		:ref:`getLinger<doxid-class_poco_1_1_net_1_1_socket_impl_1aeb04c4c6889aacdda74309fb23db18ec>`(
			bool& on,
			int& seconds
			);
	
		void
		:ref:`setNoDelay<doxid-class_poco_1_1_net_1_1_socket_impl_1a6e41e51a3034a64e47a3a0d0b63c6f6f>`(bool flag);
	
		bool
		:ref:`getNoDelay<doxid-class_poco_1_1_net_1_1_socket_impl_1ab969da4db2960f8e66a585a3c5d03958>`();
	
		void
		:ref:`setKeepAlive<doxid-class_poco_1_1_net_1_1_socket_impl_1af8be6670ad1a1115e9415415c14a174c>`(bool flag);
	
		bool
		:ref:`getKeepAlive<doxid-class_poco_1_1_net_1_1_socket_impl_1a49f847d52804a670914b304695fbd386>`();
	
		void
		:ref:`setReuseAddress<doxid-class_poco_1_1_net_1_1_socket_impl_1ad9443b9ff4558ca50ee2810355714144>`(bool flag);
	
		bool
		:ref:`getReuseAddress<doxid-class_poco_1_1_net_1_1_socket_impl_1a5f3f9c10cbdb05c03455ac64ebb9787d>`();
	
		void
		:ref:`setReusePort<doxid-class_poco_1_1_net_1_1_socket_impl_1a4f719f8476f74babeb0dd510379cc134>`(bool flag);
	
		bool
		:ref:`getReusePort<doxid-class_poco_1_1_net_1_1_socket_impl_1ae16279c4ad520e93e981d2223b07ade9>`();
	
		void
		:ref:`setOOBInline<doxid-class_poco_1_1_net_1_1_socket_impl_1aef598e7a5551a432481c1f1f78b6023f>`(bool flag);
	
		bool
		:ref:`getOOBInline<doxid-class_poco_1_1_net_1_1_socket_impl_1a4b1b5fcc6e43f6f06074c7921ce13a69>`();
	
		void
		:ref:`setBroadcast<doxid-class_poco_1_1_net_1_1_socket_impl_1a98e91e59b1d1385f4c85bce4bcc2aecb>`(bool flag);
	
		bool
		:ref:`getBroadcast<doxid-class_poco_1_1_net_1_1_socket_impl_1a32f3b5ded0f2657e2a5afe26de744726>`();
	
		virtual
		void
		:ref:`setBlocking<doxid-class_poco_1_1_net_1_1_socket_impl_1a385b74e6b9c1a8064a2f64a3711686d6>`(bool flag);
	
		virtual
		bool
		:ref:`getBlocking<doxid-class_poco_1_1_net_1_1_socket_impl_1a42a191f4fa362dfe0921843c84af5c04>`() const;
	
		virtual
		bool
		:ref:`secure<doxid-class_poco_1_1_net_1_1_socket_impl_1a03ad30594c5f54ce331519adcc51e44f>`() const;
	
		int
		:ref:`socketError<doxid-class_poco_1_1_net_1_1_socket_impl_1a2051824d16288272de51f2b224c6f093>`();
	
		poco_socket_t
		:ref:`sockfd<doxid-class_poco_1_1_net_1_1_socket_impl_1a39dc408f5d254af81ee85767d9fc4cdc>`() const;
	
		void
		:ref:`ioctl<doxid-class_poco_1_1_net_1_1_socket_impl_1a9b8e95ddf8210cac78ac1173db12effc>`(
			poco_ioctl_request_t request,
			int& arg
			);
	
		void
		:ref:`ioctl<doxid-class_poco_1_1_net_1_1_socket_impl_1aa04b9b1452f8af21e99a4810ceabb524>`(
			poco_ioctl_request_t request,
			void* arg
			);
	
		bool
		:ref:`initialized<doxid-class_poco_1_1_net_1_1_socket_impl_1a7a7448461bb35fdd9b1c9cefe9bc92c7>`() const;
	
		virtual
		int
		:ref:`sendBytes<doxid-class_poco_1_1_net_1_1_stream_socket_impl_1ac8940d8ebe49ecd929f7e1dcd0a4c47a>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* buffer,
			int length,
			int flags = 0
			);

	protected:
		// methods
	
		virtual
		void
		:ref:`init<doxid-class_poco_1_1_net_1_1_socket_impl_1a79ad870810e84d67811d656c4a8707d4>`(int af);
	
		void
		:ref:`initSocket<doxid-class_poco_1_1_net_1_1_socket_impl_1aedff929707b03a0044b4db661c14c786>`(
			int af,
			int type,
			int proto = 0
			);
	
		void
		:ref:`reset<doxid-class_poco_1_1_net_1_1_socket_impl_1a5c12ec8588d8c7543b2b9c9b9cd0ef2d>`(poco_socket_t fd = POCO_INVALID_SOCKET);
	
		static
		int
		:ref:`lastError<doxid-class_poco_1_1_net_1_1_socket_impl_1a3ffe9583ed625f2d4ff2dd4871300cf4>`();
	
		static
		void
		:ref:`error<doxid-class_poco_1_1_net_1_1_socket_impl_1a811dbd3e9e8f153fc7b5c2f4e5cbacdf>`();
	
		static
		void
		:ref:`error<doxid-class_poco_1_1_net_1_1_socket_impl_1afb5b15ed692c7aa408d0deef308a8036>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& arg);
	
		static
		void
		:ref:`error<doxid-class_poco_1_1_net_1_1_socket_impl_1a2fac81981e534ba1baec655718a018fb>`(int code);
	
		static
		void
		:ref:`error<doxid-class_poco_1_1_net_1_1_socket_impl_1a46eb122eb782d0f7bc7334a3c8310041>`(
			int code,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& arg
			);

.. _details-class_poco_1_1_net_1_1_web_socket_impl:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

This class implements a :ref:`WebSocket <doxid-class_poco_1_1_net_1_1_web_socket>`, according to the :ref:`WebSocket <doxid-class_poco_1_1_net_1_1_web_socket>` protocol described in RFC 6455.

Construction
------------

.. index:: pair: function; WebSocketImpl
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1afe9f8ca61441219bac81f9b9bc66dc60:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	WebSocketImpl(
		:ref:`StreamSocketImpl<doxid-class_poco_1_1_net_1_1_stream_socket_impl>`* pStreamSocketImpl,
		:ref:`HTTPSession<doxid-class_poco_1_1_net_1_1_h_t_t_p_session>`& session,
		bool mustMaskPayload
		)

Creates a :ref:`WebSocketImpl <doxid-class_poco_1_1_net_1_1_web_socket_impl>`.

Methods
-------

.. index:: pair: function; sendBytes
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1af7ce7cde53cfad634b2a94c0e2066c1e:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	int
	sendBytes(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* buffer,
		int length,
		int flags
		)

Sends a :ref:`WebSocket <doxid-class_poco_1_1_net_1_1_web_socket>` protocol frame.

.. index:: pair: function; receiveBytes
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1acf70121fa7d1ff069185207a8abd0b67:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	int
	receiveBytes(
		void* buffer,
		int length,
		int flags
		)

Receives a :ref:`WebSocket <doxid-class_poco_1_1_net_1_1_web_socket>` protocol frame.

.. index:: pair: function; acceptConnection
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1a0131ec003fa5c96d8a82b495afc5afb8:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	:ref:`SocketImpl<doxid-class_poco_1_1_net_1_1_socket_impl>`*
	acceptConnection(:ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& clientAddr)

Get the next completed connection from the socket's completed connection queue.

If the queue is empty, waits until a connection request completes.

Returns a new TCP socket for the connection with the client.

The client socket's address is returned in clientAddr.

.. index:: pair: function; connect
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1a1d5948951d616ff72a0cbcf9fcf9f607:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	connect(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address)

Initializes the socket and establishes a connection to the TCP server at the given address.

Can also be used for UDP sockets. In this case, no connection is established. Instead, incoming and outgoing packets are restricted to the specified address.

.. index:: pair: function; connect
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1ae3b58711323509afb0fd5cd4631f376b:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	connect(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address,
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`& timeout
		)

Initializes the socket, sets the socket timeout and establishes a connection to the TCP server at the given address.

.. index:: pair: function; connectNB
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1a2355742539b36d750b8759eeec7fed10:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	connectNB(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address)

Initializes the socket and establishes a connection to the TCP server at the given address.

Prior to opening the connection the socket is set to nonblocking mode.

.. index:: pair: function; bind
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1a5fdf82f8106f7c6cf83b648d50a1e14d:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	bind(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address,
		bool reuseAddress = false
		)

Bind a local address to the socket.

This is usually only done when establishing a server socket. TCP clients should not bind a socket to a specific address.

If reuseAddress is true, sets the SO_REUSEADDR socket option.

.. index:: pair: function; bind6
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1a5e45a4b5ecdffbd878ee53994010ebd1:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	bind6(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address,
		bool reuseAddress = false,
		bool ipV6Only = false
		)

Bind a local IPv6 address to the socket.

This is usually only done when establishing a server socket. TCP clients should not bind a socket to a specific address.

If reuseAddress is true, sets the SO_REUSEADDR socket option.

The given address must be an IPv6 address. The IPPROTO_IPV6/IPV6_V6ONLY option is set on the socket according to the ipV6Only parameter.

If the library has not been built with IPv6 support, a Poco::NotImplementedException will be thrown.

.. index:: pair: function; listen
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1a0fd0a80c8dc5d3ca51d93e284528ebe1:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	listen(int backlog = 64)

Puts the socket into listening state.

The socket becomes a passive socket that can accept incoming connection requests.

The backlog argument specifies the maximum number of connections that can be queued for this socket.

.. index:: pair: function; close
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1abff2e7d88daf29f1351177aa2afe63d9:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	close()

Close the socket.

.. index:: pair: function; shutdownReceive
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1a96d41c0216bce818d9cc470fb6bbe6be:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	shutdownReceive()

Shuts down the receiving part of the socket connection.

.. index:: pair: function; shutdownSend
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1ae96eae80c853ff56be05357caa1333ab:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	shutdownSend()

Shuts down the sending part of the socket connection.

.. index:: pair: function; shutdown
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1a222a4cef97dcd276deeda9171f5bfbff:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	shutdown()

Shuts down both the receiving and the sending part of the socket connection.

.. index:: pair: function; sendTo
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1a4e57ec5f39e4fbce7a2347e45c8ae09d:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	int
	sendTo(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* buffer,
		int length,
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address,
		int flags = 0
		)

Sends the contents of the given buffer through the socket to the given address.

Returns the number of bytes sent, which may be less than the number of bytes specified.

.. index:: pair: function; receiveFrom
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1a0b2880435f0a7dfdf3f9251587d39da8:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	int
	receiveFrom(
		void* buffer,
		int length,
		:ref:`SocketAddress<doxid-class_poco_1_1_net_1_1_socket_address>`& address,
		int flags = 0
		)

Receives data from the socket and stores it in buffer.

Up to length bytes are received. Stores the address of the sender in address.

Returns the number of bytes received.

.. index:: pair: function; sendUrgent
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1a0bc0ed2c90f1e6b4cefaabd3e5834d3f:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	sendUrgent(unsigned char data)

Sends one byte of urgent data through the socket.

The data is sent with the MSG_OOB flag.

The preferred way for a socket to receive urgent data is by enabling the SO_OOBINLINE option.

.. index:: pair: function; available
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1a0a31fa6fe898c4bd53c5752331904b5c:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	int
	available()

Returns the number of bytes available that can be read without causing the socket to block.

.. index:: pair: function; secure
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1afd964ee1af69e3b0cfa3567649f68be6:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	bool
	secure() const

Returns true iff the socket's connection is secure (using SSL or TLS).

.. index:: pair: function; setSendTimeout
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1afc872a7794e2a3b7e8f31d2ce9b70583:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	setSendTimeout(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`& timeout)

Sets the send timeout for the socket.

.. index:: pair: function; getSendTimeout
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1a2cded97e5cfbef2e9a3b499621838e67:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	:ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`
	getSendTimeout()

Returns the send timeout for the socket.

The returned timeout may be different than the timeout previously set with :ref:`setSendTimeout() <doxid-class_poco_1_1_net_1_1_web_socket_impl_1afc872a7794e2a3b7e8f31d2ce9b70583>`, as the system is free to adjust the value.

.. index:: pair: function; setReceiveTimeout
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1ae0d45acf249427dee7e1130f2389d44d:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	setReceiveTimeout(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`& timeout)

Sets the send timeout for the socket.

On systems that do not support SO_RCVTIMEO, a workaround using :ref:`poll() <doxid-class_poco_1_1_net_1_1_socket_impl_1a79bb81af87335fd4a000f235af7a9ef2>` is provided.

.. index:: pair: function; getReceiveTimeout
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1abb72e8a5a5e99726bc9b405700cf3f5a:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	:ref:`Poco::Timespan<doxid-class_poco_1_1_timespan>`
	getReceiveTimeout()

Returns the receive timeout for the socket.

The returned timeout may be different than the timeout previously set with :ref:`setReceiveTimeout() <doxid-class_poco_1_1_net_1_1_web_socket_impl_1ae0d45acf249427dee7e1130f2389d44d>`, as the system is free to adjust the value.

.. index:: pair: function; frameFlags
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1a2db68986ced4331f92105d662297408c:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	int
	frameFlags() const

Returns the frame flags of the most recently received frame.

.. index:: pair: function; mustMaskPayload
.. _doxid-class_poco_1_1_net_1_1_web_socket_impl_1a2dedc61f6fcf599774c12469456bf50e:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	bool
	mustMaskPayload() const

Returns true if the payload must be masked.

