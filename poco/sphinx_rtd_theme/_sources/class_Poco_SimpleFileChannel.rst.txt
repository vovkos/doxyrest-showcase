.. index:: pair: class; Poco::SimpleFileChannel
.. _doxid-class_poco_1_1_simple_file_channel:

class Poco::SimpleFileChannel
=============================

.. toctree::
	:hidden:

Overview
~~~~~~~~

A :ref:`Channel <doxid-class_poco_1_1_channel>` that writes to a file. :ref:`More...<details-class_poco_1_1_simple_file_channel>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <SimpleFileChannel.h>
	
	class SimpleFileChannel: public :ref:`Poco::Channel<doxid-class_poco_1_1_channel>`
	{
	public:
		// fields
	
		static :ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string :target:`PROP_PATH<doxid-class_poco_1_1_simple_file_channel_1a021255eaa4acaa095007ae3f0e4c2e03>`;
		static :ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string :target:`PROP_SECONDARYPATH<doxid-class_poco_1_1_simple_file_channel_1a7069fd3a14f5362c7da8e82ea7a13b88>`;
		static :ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string :target:`PROP_ROTATION<doxid-class_poco_1_1_simple_file_channel_1a985e3e42f27b87b18fed58cf4ddca257>`;
		static :ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string :target:`PROP_FLUSH<doxid-class_poco_1_1_simple_file_channel_1ac7a8099ebc1d589f5326833d8bffb9e4>`;

		// construction
	
		:ref:`SimpleFileChannel<doxid-class_poco_1_1_simple_file_channel_1acd60b0ce80b2f84f8290a3fd1fd1137d>`();
		:ref:`SimpleFileChannel<doxid-class_poco_1_1_simple_file_channel_1af4b904e0151fea3c991f5d70604270f0>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& path);

		// methods
	
		virtual
		void
		:ref:`open<doxid-class_poco_1_1_simple_file_channel_1a2f000aa5a61dec44c38d21aa6cb39833>`();
	
		virtual
		void
		:ref:`close<doxid-class_poco_1_1_simple_file_channel_1a1f696c3bab1121f555c74e8bcf9595ca>`();
	
		virtual
		void
		:ref:`log<doxid-class_poco_1_1_simple_file_channel_1a67e7820d565adeea21395dfbde5be81f>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Message<doxid-class_poco_1_1_message>`& msg);
	
		virtual
		void
		:ref:`setProperty<doxid-class_poco_1_1_simple_file_channel_1abffa22723223589cb7fa993804c377a3>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& name,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& value
			);
	
		virtual
		std::string
		:ref:`getProperty<doxid-class_poco_1_1_simple_file_channel_1af6774b2f750aa5b966da92c1751eb334>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& name) const;
	
		:ref:`Timestamp<doxid-class_poco_1_1_timestamp>`
		:ref:`creationDate<doxid-class_poco_1_1_simple_file_channel_1a1ebf224eaf93bde3c2d4445ab949cd6f>`() const;
	
		UInt64
		:ref:`size<doxid-class_poco_1_1_simple_file_channel_1a4d90eaafefcc347245ce4d73726b03e2>`() const;
	
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string&
		:ref:`path<doxid-class_poco_1_1_simple_file_channel_1a25aa913891f32eb11136faac7ebface6>`() const;
	
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string&
		:ref:`secondaryPath<doxid-class_poco_1_1_simple_file_channel_1a1266d9169e604cd16ba0d8023462c174>`() const;

	protected:
		// methods
	
		void
		:target:`setRotation<doxid-class_poco_1_1_simple_file_channel_1a9cccf288c5e40a3e32c203ab0bb6e514>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& rotation);
	
		void
		:target:`setFlush<doxid-class_poco_1_1_simple_file_channel_1a7292d6009724a5e9e04af992793a7948>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& flush);
	
		void
		:target:`rotate<doxid-class_poco_1_1_simple_file_channel_1a9125226f3610dce7f073ff4aad1a478f>`();
	};

Inherited Members
-----------------

.. ref-code-block:: cpp
	:class: doxyrest-overview-inherited-code-block

	public:
		// methods
	
		virtual
		void
		:ref:`setProperty<doxid-class_poco_1_1_configurable_1ae31289819bd01f4a1bda0be67144d5bf>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& name,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& value
			) = 0;
	
		virtual
		std::string
		:ref:`getProperty<doxid-class_poco_1_1_configurable_1a565940a99f096c005743a68040ca5e25>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& name) const = 0;
	
		void
		:ref:`duplicate<doxid-class_poco_1_1_ref_counted_object_1a13296da57127169ed0709b3dde86bf0d>`() const;
	
		void
		:ref:`release<doxid-class_poco_1_1_ref_counted_object_1a14bf204923a6ba4b97df6f8fdb9deb72>`() const;
	
		int
		:ref:`referenceCount<doxid-class_poco_1_1_ref_counted_object_1a45b62ccd833bcb06055399c2d889eb35>`() const;
	
		virtual
		void
		:ref:`open<doxid-class_poco_1_1_channel_1aef60226200d2e287068a62d9af5a4f6e>`();
	
		virtual
		void
		:ref:`close<doxid-class_poco_1_1_channel_1a2056a173f804c51411942649bd4d6408>`();
	
		virtual
		void
		:ref:`log<doxid-class_poco_1_1_channel_1aeafdcc5ce2e0e38d96f15a60a563da4e>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Message<doxid-class_poco_1_1_message>`& msg) = 0;
	
		virtual
		void
		:ref:`setProperty<doxid-class_poco_1_1_channel_1a67c2a274e476745b902ced03fb485c6e>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& name,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& value
			);
	
		virtual
		std::string
		:ref:`getProperty<doxid-class_poco_1_1_channel_1a187321f59674dfde457599885a4f6ec0>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& name) const;

.. _details-class_poco_1_1_simple_file_channel:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

A :ref:`Channel <doxid-class_poco_1_1_channel>` that writes to a file.

This class only supports simple log file rotation.

For more features, see the :ref:`FileChannel <doxid-class_poco_1_1_file_channel>` class.

Only the message's text is written, followed by a newline.

Chain this channel to a :ref:`FormattingChannel <doxid-class_poco_1_1_formatting_channel>` with an appropriate :ref:`Formatter <doxid-class_poco_1_1_formatter>` to control what is in the text.

Log file rotation based on log file size is supported.

If rotation is enabled, the :ref:`SimpleFileChannel <doxid-class_poco_1_1_simple_file_channel>` will alternate between two log files. If the size of the primary log file exceeds a specified limit, the secondary log file will be used, and vice versa.

Log rotation is configured with the "rotation" property, which supports the following values:

.. ref-code-block:: cpp

	* never:         no log rotation
	* <n>:           the file is rotated when its size exceeds
	                 <n> bytes.
	* <n> K:         the file is rotated when its size exceeds
	                 <n> Kilobytes.
	* <n> M:         the file is rotated when its size exceeds
	                 <n> Megabytes.

The path of the (primary) log file can be specified with the "path" property. Optionally, the path of the secondary log file can be specified with the "secondaryPath" property.

If no secondary path is specified, the secondary path will default to <primaryPath>.1.

The flush property specifies whether each log message is flushed immediately to the log file (which may hurt application performance, but ensures that everything is in the log in case of a system crash), Valid values are:

.. ref-code-block:: cpp

	* true:   Every essages is immediately flushed to the log file (default).
	* false:  Messages are not immediately flushed to the log file.

Construction
------------

.. index:: pair: function; SimpleFileChannel
.. _doxid-class_poco_1_1_simple_file_channel_1acd60b0ce80b2f84f8290a3fd1fd1137d:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	SimpleFileChannel()

Creates the :ref:`FileChannel <doxid-class_poco_1_1_file_channel>`.

.. index:: pair: function; SimpleFileChannel
.. _doxid-class_poco_1_1_simple_file_channel_1af4b904e0151fea3c991f5d70604270f0:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	SimpleFileChannel(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& path)

Creates the :ref:`FileChannel <doxid-class_poco_1_1_file_channel>` for a file with the given path.

Methods
-------

.. index:: pair: function; open
.. _doxid-class_poco_1_1_simple_file_channel_1a2f000aa5a61dec44c38d21aa6cb39833:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	open()

Opens the :ref:`FileChannel <doxid-class_poco_1_1_file_channel>` and creates the log file if necessary.

.. index:: pair: function; close
.. _doxid-class_poco_1_1_simple_file_channel_1a1f696c3bab1121f555c74e8bcf9595ca:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	close()

Closes the :ref:`FileChannel <doxid-class_poco_1_1_file_channel>`.

.. index:: pair: function; log
.. _doxid-class_poco_1_1_simple_file_channel_1a67e7820d565adeea21395dfbde5be81f:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	log(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Message<doxid-class_poco_1_1_message>`& msg)

Logs the given message to the file.

.. index:: pair: function; setProperty
.. _doxid-class_poco_1_1_simple_file_channel_1abffa22723223589cb7fa993804c377a3:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	setProperty(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& name,
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& value
		)

Sets the property with the given name.

The following properties are supported:

.. ref-code-block:: cpp

	* path:          The primary log file's path.
	* secondaryPath: The secondary log file's path.
	* rotation:      The log file's rotation mode. See the 
	                 SimpleFileChannel class for details.
	* flush:         Specifies whether messages are immediately
	                 flushed to the log file. See the SimpleFileChannel
	                 class for details.

.. index:: pair: function; getProperty
.. _doxid-class_poco_1_1_simple_file_channel_1af6774b2f750aa5b966da92c1751eb334:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	std::string
	getProperty(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& name) const

Returns the value of the property with the given name.

See :ref:`setProperty() <doxid-class_poco_1_1_simple_file_channel_1abffa22723223589cb7fa993804c377a3>` for a description of the supported properties.

.. index:: pair: function; creationDate
.. _doxid-class_poco_1_1_simple_file_channel_1a1ebf224eaf93bde3c2d4445ab949cd6f:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Timestamp<doxid-class_poco_1_1_timestamp>`
	creationDate() const

Returns the log file's creation date.

.. index:: pair: function; size
.. _doxid-class_poco_1_1_simple_file_channel_1a4d90eaafefcc347245ce4d73726b03e2:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	UInt64
	size() const

Returns the log file's current size in bytes.

.. index:: pair: function; path
.. _doxid-class_poco_1_1_simple_file_channel_1a25aa913891f32eb11136faac7ebface6:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string&
	path() const

Returns the log file's primary path.

.. index:: pair: function; secondaryPath
.. _doxid-class_poco_1_1_simple_file_channel_1a1266d9169e604cd16ba0d8023462c174:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string&
	secondaryPath() const

Returns the log file's secondary path.

