.. index:: pair: class; Poco::StrategyCollection
.. _doxid-class_poco_1_1_strategy_collection:

template class Poco::StrategyCollection
=======================================

.. toctree::
	:hidden:

Overview
~~~~~~~~

An :ref:`StrategyCollection <doxid-class_poco_1_1_strategy_collection>` is a decorator masking n collections as a single one. :ref:`More...<details-class_poco_1_1_strategy_collection>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <StrategyCollection.h>
	
	template <
		class TKey,
		class TValue
		>
	class StrategyCollection: public :ref:`Poco::AbstractStrategy<doxid-class_poco_1_1_abstract_strategy>`
	{
	public:
		// typedefs
	
		typedef std::vector<:ref:`SharedPtr<doxid-class_poco_1_1_shared_ptr>`<:ref:`AbstractStrategy<doxid-class_poco_1_1_abstract_strategy>`<TKey, TValue>>> :target:`Strategies<doxid-class_poco_1_1_strategy_collection_1a9fad75cb163aeeefdb498649170d02c6>`;
		typedef Strategies::iterator :target:`Iterator<doxid-class_poco_1_1_strategy_collection_1ada69bee7861f05347c8a6acee151a8f7>`;
		typedef Strategies::const_iterator :target:`ConstIterator<doxid-class_poco_1_1_strategy_collection_1ae62e8c2b4ab547af5b20b287bcd712d7>`;

		// methods
	
		void
		:ref:`pushBack<doxid-class_poco_1_1_strategy_collection_1aa41c15f3ef04581652a3c83f17051c89>`(:ref:`AbstractStrategy<doxid-class_poco_1_1_abstract_strategy>`<TKey, TValue>* pStrat);
	
		void
		:ref:`popBack<doxid-class_poco_1_1_strategy_collection_1afb4390c1e4c6f81adfaeb1762a7b6386>`();
	
		virtual
		void
		:ref:`onAdd<doxid-class_poco_1_1_strategy_collection_1a9e2f32d1f770f5f63322bc267383a181>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`KeyValueArgs<doxid-class_poco_1_1_key_value_args>`<TKey, TValue>& key
			);
	
		virtual
		void
		:ref:`onRemove<doxid-class_poco_1_1_strategy_collection_1a0b81184c4e3a6dd616e960f8b5a6d4c0>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` TKey& key
			);
	
		virtual
		void
		:ref:`onGet<doxid-class_poco_1_1_strategy_collection_1ab504fac78d6c9058ae4c302ff1828aa1>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` TKey& key
			);
	
		virtual
		void
		:ref:`onClear<doxid-class_poco_1_1_strategy_collection_1ae8d851331a0537d929a72bf7c34f927e>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`EventArgs<doxid-class_poco_1_1_event_args>`& args
			);
	
		virtual
		void
		:ref:`onIsValid<doxid-class_poco_1_1_strategy_collection_1a0b719ba9628e9f995fec1f4dd7c0f04c>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`ValidArgs<doxid-class_poco_1_1_valid_args>`<TKey>& key
			);
	
		virtual
		void
		:ref:`onReplace<doxid-class_poco_1_1_strategy_collection_1ac07f7481c442fc3497aa07ea056e8df1>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			std::set<TKey>& elemsToRemove
			);

	protected:
		// fields
	
		:ref:`Strategies<doxid-class_poco_1_1_strategy_collection_1a9fad75cb163aeeefdb498649170d02c6>` :target:`_strategies<doxid-class_poco_1_1_strategy_collection_1a1941720eacef5fb89a3f97dc729f21be>`;
	};

Inherited Members
-----------------

.. ref-code-block:: cpp
	:class: doxyrest-overview-inherited-code-block

	public:
		// methods
	
		virtual
		void
		:ref:`onUpdate<doxid-class_poco_1_1_abstract_strategy_1ae6d1f28a5590ebd288eb644747b016a7>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`KeyValueArgs<doxid-class_poco_1_1_key_value_args>`<TKey, TValue>& args
			);
	
		virtual
		void
		:ref:`onAdd<doxid-class_poco_1_1_abstract_strategy_1a40bb84cd0085c3ff59064cd3d13a21dd>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`KeyValueArgs<doxid-class_poco_1_1_key_value_args>`<TKey, TValue>& key
			) = 0;
	
		virtual
		void
		:ref:`onRemove<doxid-class_poco_1_1_abstract_strategy_1a3c74a0e9b7469f4246ee083252d995ac>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` TKey& key
			) = 0;
	
		virtual
		void
		:ref:`onGet<doxid-class_poco_1_1_abstract_strategy_1a802663d39fa378d09ca76b37daccf8e9>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` TKey& key
			) = 0;
	
		virtual
		void
		:ref:`onClear<doxid-class_poco_1_1_abstract_strategy_1a84d1033a199ef6eea12207f7a40bca72>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`EventArgs<doxid-class_poco_1_1_event_args>`& args
			) = 0;
	
		virtual
		void
		:ref:`onIsValid<doxid-class_poco_1_1_abstract_strategy_1ade01399ff91ed48ca9ab2656c184dc7e>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`ValidArgs<doxid-class_poco_1_1_valid_args>`<TKey>& key
			) = 0;
	
		virtual
		void
		:ref:`onReplace<doxid-class_poco_1_1_abstract_strategy_1a344d2caa3f8b5ea1507a5a26c49f7eae>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			std::set<TKey>& elemsToRemove
			) = 0;

.. _details-class_poco_1_1_strategy_collection:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

An :ref:`StrategyCollection <doxid-class_poco_1_1_strategy_collection>` is a decorator masking n collections as a single one.

Methods
-------

.. index:: pair: function; pushBack
.. _doxid-class_poco_1_1_strategy_collection_1aa41c15f3ef04581652a3c83f17051c89:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	pushBack(:ref:`AbstractStrategy<doxid-class_poco_1_1_abstract_strategy>`<TKey, TValue>* pStrat)

Adds an :ref:`AbstractStrategy <doxid-class_poco_1_1_abstract_strategy>` to the collection. Class takes ownership of pointer.

.. index:: pair: function; popBack
.. _doxid-class_poco_1_1_strategy_collection_1afb4390c1e4c6f81adfaeb1762a7b6386:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	popBack()

Removes the last added :ref:`AbstractStrategy <doxid-class_poco_1_1_abstract_strategy>` from the collection.

.. index:: pair: function; onAdd
.. _doxid-class_poco_1_1_strategy_collection_1a9e2f32d1f770f5f63322bc267383a181:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	onAdd(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`KeyValueArgs<doxid-class_poco_1_1_key_value_args>`<TKey, TValue>& key
		)

Adds the key to the strategy.

If for the key already an entry exists, it will be overwritten.

.. index:: pair: function; onRemove
.. _doxid-class_poco_1_1_strategy_collection_1a0b81184c4e3a6dd616e960f8b5a6d4c0:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	onRemove(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` TKey& key
		)

Removes an entry from the strategy.

If the entry is not found the remove is ignored.

.. index:: pair: function; onGet
.. _doxid-class_poco_1_1_strategy_collection_1ab504fac78d6c9058ae4c302ff1828aa1:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	onGet(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` TKey& key
		)

Informs the strategy that a read-access happens to an element.

.. index:: pair: function; onClear
.. _doxid-class_poco_1_1_strategy_collection_1ae8d851331a0537d929a72bf7c34f927e:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	onClear(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`EventArgs<doxid-class_poco_1_1_event_args>`& args
		)

Removes all elements from the cache.

.. index:: pair: function; onIsValid
.. _doxid-class_poco_1_1_strategy_collection_1a0b719ba9628e9f995fec1f4dd7c0f04c:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	onIsValid(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
		:ref:`ValidArgs<doxid-class_poco_1_1_valid_args>`<TKey>& key
		)

Used to query if a key is still valid (i.e. cached).

.. index:: pair: function; onReplace
.. _doxid-class_poco_1_1_strategy_collection_1ac07f7481c442fc3497aa07ea056e8df1:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	onReplace(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
		std::set<TKey>& elemsToRemove
		)

Used by the Strategy to indicate which elements should be removed from the cache.

Note that onReplace does not change the current list of keys. The cache object is reponsible to remove the elements.

