.. index:: pair: class; Poco::XML::NamespaceSupport
.. _doxid-class_poco_1_1_x_m_l_1_1_namespace_support:

class Poco::XML::NamespaceSupport
=================================

.. toctree::
	:hidden:

Overview
~~~~~~~~

Encapsulate Namespace logic for use by SAX drivers. :ref:`More...<details-class_poco_1_1_x_m_l_1_1_namespace_support>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <NamespaceSupport.h>
	
	class NamespaceSupport
	{
	public:
		// typedefs
	
		typedef std::set<:ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`> :target:`PrefixSet<doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1a37dea4b34fa9968f747d638f2574f51c>`;

		// fields
	
		static :ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>` :target:`XML_NAMESPACE<doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1ad52337f4a1a927fa052e6e82a822a4ab>`;
		static :ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>` :target:`XML_NAMESPACE_PREFIX<doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1a217f77ee1f9355a11fe1face64559a4b>`;
		static :ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>` :target:`XMLNS_NAMESPACE<doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1ac08f1391da7fe504a73beb6659caea4a>`;
		static :ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>` :target:`XMLNS_NAMESPACE_PREFIX<doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1a04e470f9c5bffef7338ebf6028ece619>`;

		// methods
	
		bool
		:ref:`declarePrefix<doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1ac9e276820bc3e0d8c5f8a099bdf1d0eb>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`& prefix,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`& namespaceURI
			);
	
		bool
		:ref:`undeclarePrefix<doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1a0c163840f96e29db3d75524f90078e34>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`& prefix);
	
		void
		:ref:`getDeclaredPrefixes<doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1a13e28051b75062d057904df82096472c>`(:ref:`PrefixSet<doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1a37dea4b34fa9968f747d638f2574f51c>`& prefixes) const;
	
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`&
		:ref:`getPrefix<doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1ac9f0cd761bdadd6c4f86ecae245e4d0c>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`& namespaceURI) const;
	
		bool
		:ref:`isMapped<doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1a6833dc453fea755e765b074053d3f02f>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`& namespaceURI) const;
	
		void
		:ref:`getPrefixes<doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1ab8bc4063903e4113ef02ff30e27d6ca1>`(:ref:`PrefixSet<doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1a37dea4b34fa9968f747d638f2574f51c>`& prefixes) const;
	
		void
		:ref:`getPrefixes<doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1a3c21d0df1bb024575b681800b7ee9956>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`& namespaceURI,
			:ref:`PrefixSet<doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1a37dea4b34fa9968f747d638f2574f51c>`& prefixes
			) const;
	
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`&
		:ref:`getURI<doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1a4760f7ce83e804da610c3222ccc2d76c>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`& prefix) const;
	
		void
		:ref:`pushContext<doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1acc259135d04cf0d07f736def4cdb7ad2>`();
	
		void
		:ref:`popContext<doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1ae21b82a36feeb119fe02f6fbb38a1ff9>`();
	
		bool
		:ref:`processName<doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1aaf31a8794dd2c284b42ed72458c9d3fd>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`& qname,
			:ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`& namespaceURI,
			:ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`& localName,
			bool isAttribute
			) const;
	
		void
		:ref:`reset<doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1adde90955cffcdfb5bdcbe66cab1e23a0>`();
	};
.. _details-class_poco_1_1_x_m_l_1_1_namespace_support:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

Encapsulate Namespace logic for use by SAX drivers.

This class encapsulates the logic of Namespace processing: it tracks the declarations currently in force for each context and automatically processes qualified :ref:`XML <doxid-namespace_poco_1_1_x_m_l>` 1.0 names into their Namespace parts; it can also be used in reverse for generating :ref:`XML <doxid-namespace_poco_1_1_x_m_l>` 1.0 from Namespaces. Namespace support objects are reusable, but the reset method must be invoked between each session.

Construction
------------

.. _doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1aec30b18ca74d48c066c61e34f6f003e3:
.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	~NamespaceSupport()

Destroys a :ref:`NamespaceSupport <doxid-class_poco_1_1_x_m_l_1_1_namespace_support>` object.

Methods
-------

.. index:: pair: function; declarePrefix
.. _doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1ac9e276820bc3e0d8c5f8a099bdf1d0eb:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	bool
	declarePrefix(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`& prefix,
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`& namespaceURI
		)

Declare a Namespace prefix.

All prefixes must be declared before they are referenced. For example, a SAX driver (parser) would scan an element's attributes in two passes: first for namespace declarations, then a second pass using :ref:`processName() <doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1aaf31a8794dd2c284b42ed72458c9d3fd>` to interpret prefixes against (potentially redefined) prefixes.

This method declares a prefix in the current Namespace context; the prefix will remain in force until this context is popped, unless it is shadowed in a descendant context.

To declare the default element Namespace, use the empty string as the prefix.

Note that you must not declare a prefix after you've pushed and popped another Namespace context, or treated the declarations phase as complete by processing a prefixed name.

Returns true if the prefix was legal, false otherwise.

.. index:: pair: function; undeclarePrefix
.. _doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1a0c163840f96e29db3d75524f90078e34:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	bool
	undeclarePrefix(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`& prefix)

Remove the given namespace prefix.

.. index:: pair: function; getDeclaredPrefixes
.. _doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1a13e28051b75062d057904df82096472c:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	getDeclaredPrefixes(:ref:`PrefixSet<doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1a37dea4b34fa9968f747d638f2574f51c>`& prefixes) const

Return an enumeration of all prefixes declared in this context.

The empty (default) prefix will be included in this enumeration; note that this behaviour differs from that of :ref:`getPrefix() <doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1ac9f0cd761bdadd6c4f86ecae245e4d0c>` and :ref:`getPrefixes() <doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1ab8bc4063903e4113ef02ff30e27d6ca1>`.

.. index:: pair: function; getPrefix
.. _doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1ac9f0cd761bdadd6c4f86ecae245e4d0c:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`&
	getPrefix(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`& namespaceURI) const

Return one of the prefixes mapped to a Namespace :ref:`URI <doxid-class_poco_1_1_u_r_i>`.

If more than one prefix is currently mapped to the same :ref:`URI <doxid-class_poco_1_1_u_r_i>`, this method will make an arbitrary selection; if you want all of the prefixes, use the :ref:`getPrefixes() <doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1ab8bc4063903e4113ef02ff30e27d6ca1>` method instead.

.. index:: pair: function; isMapped
.. _doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1a6833dc453fea755e765b074053d3f02f:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	bool
	isMapped(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`& namespaceURI) const

Returns true if the given namespaceURI has been mapped to a prefix, false otherwise.

.. index:: pair: function; getPrefixes
.. _doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1ab8bc4063903e4113ef02ff30e27d6ca1:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	getPrefixes(:ref:`PrefixSet<doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1a37dea4b34fa9968f747d638f2574f51c>`& prefixes) const

Return an enumeration of all prefixes whose declarations are active in the current context.

This includes declarations from parent contexts that have not been overridden.

Note: if there is a default prefix, it will not be returned in this enumeration; check for the default prefix using the getURI with an argument of "".

.. index:: pair: function; getPrefixes
.. _doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1a3c21d0df1bb024575b681800b7ee9956:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	getPrefixes(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`& namespaceURI,
		:ref:`PrefixSet<doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1a37dea4b34fa9968f747d638f2574f51c>`& prefixes
		) const

Return an enumeration of all prefixes for a given :ref:`URI <doxid-class_poco_1_1_u_r_i>` whose declarations are active in the current context.

This includes declarations from parent contexts that have not been overridden.

This method returns prefixes mapped to a specific Namespace :ref:`URI <doxid-class_poco_1_1_u_r_i>`. The xml: prefix will be included. If you want only one prefix that's mapped to the Namespace :ref:`URI <doxid-class_poco_1_1_u_r_i>`, and you don't care which one you get, use the :ref:`getPrefix() <doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1ac9f0cd761bdadd6c4f86ecae245e4d0c>` method instead.

Note: the empty (default) prefix is never included in this enumeration; to check for the presence of a default Namespace, use the :ref:`getURI() <doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1a4760f7ce83e804da610c3222ccc2d76c>` method with an argument of "".

.. index:: pair: function; getURI
.. _doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1a4760f7ce83e804da610c3222ccc2d76c:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`&
	getURI(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`& prefix) const

Look up a prefix and get the currently-mapped Namespace :ref:`URI <doxid-class_poco_1_1_u_r_i>`.

This method looks up the prefix in the current context. Use the empty string ("") for the default Namespace.

.. index:: pair: function; pushContext
.. _doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1acc259135d04cf0d07f736def4cdb7ad2:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	pushContext()

Start a new Namespace context.

The new context will automatically inherit the declarations of its parent context, but it will also keep track of which declarations were made within this context.

:ref:`Event <doxid-class_poco_1_1_x_m_l_1_1_event>` callback code should start a new context once per element. This means being ready to call this in either of two places. For elements that don't include namespace declarations, the :ref:`ContentHandler::startElement() <doxid-class_poco_1_1_x_m_l_1_1_content_handler_1a31db33d83aab95b4331b8e0fc7ba4093>` callback is the right place. For elements with such a declaration, it'd done in the first :ref:`ContentHandler::startPrefixMapping() <doxid-class_poco_1_1_x_m_l_1_1_content_handler_1ae1d4f1d6c18ef1cee22f21f0e2f2421c>` callback. A boolean flag can be used to track whether a context has been started yet. When either of those methods is called, it checks the flag to see if a new context needs to be started. If so, it starts the context and sets the flag. After :ref:`ContentHandler::startElement() <doxid-class_poco_1_1_x_m_l_1_1_content_handler_1a31db33d83aab95b4331b8e0fc7ba4093>` does that, it always clears the flag.

Normally, SAX drivers would push a new context at the beginning of each :ref:`XML <doxid-namespace_poco_1_1_x_m_l>` element. Then they perform a first pass over the attributes to process all namespace declarations, making :ref:`ContentHandler::startPrefixMapping() <doxid-class_poco_1_1_x_m_l_1_1_content_handler_1ae1d4f1d6c18ef1cee22f21f0e2f2421c>` callbacks. Then a second pass is made, to determine the namespace-qualified names for all attributes and for the element name. Finally all the information for the :ref:`ContentHandler::startElement() <doxid-class_poco_1_1_x_m_l_1_1_content_handler_1a31db33d83aab95b4331b8e0fc7ba4093>` callback is available, so it can then be made.

The Namespace support object always starts with a base context already in force: in this context, only the "xml" prefix is declared.

.. index:: pair: function; popContext
.. _doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1ae21b82a36feeb119fe02f6fbb38a1ff9:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	popContext()

Revert to the previous Namespace context.

Normally, you should pop the context at the end of each :ref:`XML <doxid-namespace_poco_1_1_x_m_l>` element. After popping the context, all Namespace prefix mappings that were previously in force are restored.

You must not attempt to declare additional Namespace prefixes after popping a context, unless you push another context first.

.. index:: pair: function; processName
.. _doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1aaf31a8794dd2c284b42ed72458c9d3fd:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	bool
	processName(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`& qname,
		:ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`& namespaceURI,
		:ref:`XMLString<doxid-namespace_poco_1_1_x_m_l_1a288dd5005eea5f995c0169e0688593ae>`& localName,
		bool isAttribute
		) const

:ref:`Process <doxid-class_poco_1_1_process>` a raw :ref:`XML <doxid-namespace_poco_1_1_x_m_l>` 1.0 name.

This method processes a raw :ref:`XML <doxid-namespace_poco_1_1_x_m_l>` 1.0 name in the current context by removing the prefix and looking it up among the prefixes currently declared. The result will be returned in namespaceURI and localName. If the raw name has a prefix that has not been declared, then the return value will be false, otherwise true.

Note that attribute names are processed differently than element names: an unprefixed element name will receive the default Namespace (if any), while an unprefixed attribute name will not.

.. index:: pair: function; reset
.. _doxid-class_poco_1_1_x_m_l_1_1_namespace_support_1adde90955cffcdfb5bdcbe66cab1e23a0:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	reset()

Reset this Namespace support object for reuse.

It is necessary to invoke this method before reusing the Namespace support object for a new session. If namespace declaration URIs are to be supported, that flag must also be set to a non-default value. Reset this Namespace support object for reuse.

