.. index:: pair: class; Poco::AccessExpireStrategy
.. _doxid-class_poco_1_1_access_expire_strategy:

template class Poco::AccessExpireStrategy
=========================================

.. toctree::
	:hidden:

Overview
~~~~~~~~

An :ref:`AccessExpireStrategy <doxid-class_poco_1_1_access_expire_strategy>` implements time and access based expiration of cache entries. :ref:`More...<details-class_poco_1_1_access_expire_strategy>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <AccessExpireStrategy.h>
	
	template <
		class TKey,
		class TValue
		>
	class AccessExpireStrategy: public :ref:`Poco::ExpireStrategy<doxid-class_poco_1_1_expire_strategy>`
	{
	public:
		// construction
	
		:ref:`AccessExpireStrategy<doxid-class_poco_1_1_access_expire_strategy_1a746313dbf917b93d92ef410949efe4df>`(:ref:`Timestamp::TimeDiff<doxid-class_poco_1_1_timestamp_1a23501cdddede36b1551ce48525777b31>` expireTimeInMilliSec);

		// methods
	
		virtual
		void
		:ref:`onGet<doxid-class_poco_1_1_access_expire_strategy_1ac2779ee2a81153be91e57ad6929eddcf>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` TKey& key
			);
	};

Inherited Members
-----------------

.. ref-code-block:: cpp
	:class: doxyrest-overview-inherited-code-block

	public:
		// typedefs
	
		typedef std::multimap<:ref:`Timestamp<doxid-class_poco_1_1_timestamp>`, TKey> :ref:`TimeIndex<doxid-class_poco_1_1_expire_strategy_1ab87e015dd76fc653be9ad249c6e67dfc>`;
		typedef TimeIndex::iterator :ref:`IndexIterator<doxid-class_poco_1_1_expire_strategy_1a5ece691cb80feb68d59f517ef395bb6a>`;
		typedef TimeIndex::const_iterator :ref:`ConstIndexIterator<doxid-class_poco_1_1_expire_strategy_1acb6146952384387df8a020cd308dfa0c>`;
		typedef std::map<TKey, :ref:`IndexIterator<doxid-class_poco_1_1_expire_strategy_1a5ece691cb80feb68d59f517ef395bb6a>`> :ref:`Keys<doxid-class_poco_1_1_expire_strategy_1a31d71436b141762f4a848bce722215b1>`;
		typedef Keys::iterator :ref:`Iterator<doxid-class_poco_1_1_expire_strategy_1a154a23a1ec14d25471ba4ac457f9944c>`;

		// methods
	
		virtual
		void
		:ref:`onUpdate<doxid-class_poco_1_1_abstract_strategy_1ae6d1f28a5590ebd288eb644747b016a7>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`KeyValueArgs<doxid-class_poco_1_1_key_value_args>`<TKey, TValue>& args
			);
	
		virtual
		void
		:ref:`onAdd<doxid-class_poco_1_1_abstract_strategy_1a40bb84cd0085c3ff59064cd3d13a21dd>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`KeyValueArgs<doxid-class_poco_1_1_key_value_args>`<TKey, TValue>& key
			) = 0;
	
		virtual
		void
		:ref:`onRemove<doxid-class_poco_1_1_abstract_strategy_1a3c74a0e9b7469f4246ee083252d995ac>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` TKey& key
			) = 0;
	
		virtual
		void
		:ref:`onGet<doxid-class_poco_1_1_abstract_strategy_1a802663d39fa378d09ca76b37daccf8e9>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` TKey& key
			) = 0;
	
		virtual
		void
		:ref:`onClear<doxid-class_poco_1_1_abstract_strategy_1a84d1033a199ef6eea12207f7a40bca72>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`EventArgs<doxid-class_poco_1_1_event_args>`& args
			) = 0;
	
		virtual
		void
		:ref:`onIsValid<doxid-class_poco_1_1_abstract_strategy_1ade01399ff91ed48ca9ab2656c184dc7e>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`ValidArgs<doxid-class_poco_1_1_valid_args>`<TKey>& key
			) = 0;
	
		virtual
		void
		:ref:`onReplace<doxid-class_poco_1_1_abstract_strategy_1a344d2caa3f8b5ea1507a5a26c49f7eae>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			std::set<TKey>& elemsToRemove
			) = 0;
	
		virtual
		void
		:ref:`onAdd<doxid-class_poco_1_1_expire_strategy_1a96c57c841210411ad0115902dc9fd9ce>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`KeyValueArgs<doxid-class_poco_1_1_key_value_args>`<TKey, TValue>& key
			);
	
		virtual
		void
		:ref:`onRemove<doxid-class_poco_1_1_expire_strategy_1a042307a81e5ca09b9dc270ef3b84dc6f>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` TKey& key
			);
	
		virtual
		void
		:ref:`onGet<doxid-class_poco_1_1_expire_strategy_1a15ca99f7e3e187882df654e1da285c07>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` TKey& key
			);
	
		virtual
		void
		:ref:`onClear<doxid-class_poco_1_1_expire_strategy_1ab7abcc01f311831f6e556910fb904ea1>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`EventArgs<doxid-class_poco_1_1_event_args>`& args
			);
	
		virtual
		void
		:ref:`onIsValid<doxid-class_poco_1_1_expire_strategy_1aebee1be484bc5c9f9fa4e931526a3fe4>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			:ref:`ValidArgs<doxid-class_poco_1_1_valid_args>`<TKey>& key
			);
	
		virtual
		void
		:ref:`onReplace<doxid-class_poco_1_1_expire_strategy_1a92edd15c044d548e62f1d77d0314efd6>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
			std::set<TKey>& elemsToRemove
			);

	protected:
		// fields
	
		:ref:`Timestamp::TimeDiff<doxid-class_poco_1_1_timestamp_1a23501cdddede36b1551ce48525777b31>` :ref:`_expireTime<doxid-class_poco_1_1_expire_strategy_1a92fc41447058eb99304ca5019cf147d2>`;
		:ref:`Keys<doxid-class_poco_1_1_expire_strategy_1a31d71436b141762f4a848bce722215b1>` :ref:`_keys<doxid-class_poco_1_1_expire_strategy_1aedb5a1e4e9b87c99cea1a87ef14906ac>`;
		:ref:`TimeIndex<doxid-class_poco_1_1_expire_strategy_1ab87e015dd76fc653be9ad249c6e67dfc>` :ref:`_keyIndex<doxid-class_poco_1_1_expire_strategy_1a86682488b32952b372af5743c1d36991>`;

.. _details-class_poco_1_1_access_expire_strategy:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

An :ref:`AccessExpireStrategy <doxid-class_poco_1_1_access_expire_strategy>` implements time and access based expiration of cache entries.

Construction
------------

.. index:: pair: function; AccessExpireStrategy
.. _doxid-class_poco_1_1_access_expire_strategy_1a746313dbf917b93d92ef410949efe4df:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	AccessExpireStrategy(:ref:`Timestamp::TimeDiff<doxid-class_poco_1_1_timestamp_1a23501cdddede36b1551ce48525777b31>` expireTimeInMilliSec)

Create an expire strategy.

Note that the smallest allowed caching time is 25ms. Anything lower than that is not useful with current operating systems.

Methods
-------

.. index:: pair: function; onGet
.. _doxid-class_poco_1_1_access_expire_strategy_1ac2779ee2a81153be91e57ad6929eddcf:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	void
	onGet(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` void* pSender,
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` TKey& key
		)

Informs the strategy that a read-access happens to an element.

