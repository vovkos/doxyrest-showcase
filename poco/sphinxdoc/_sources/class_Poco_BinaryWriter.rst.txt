.. index:: pair: class; Poco::BinaryWriter
.. _doxid-class_poco_1_1_binary_writer:

class Poco::BinaryWriter
========================

.. toctree::
	:hidden:

	enum_Poco_BinaryWriter_StreamByteOrder.rst

Overview
~~~~~~~~

This class writes basic types (and std::vectors of these) in binary form into an output stream. :ref:`More...<details-class_poco_1_1_binary_writer>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <BinaryWriter.h>
	
	class BinaryWriter
	{
	public:
		// enums
	
		enum :ref:`StreamByteOrder<doxid-class_poco_1_1_binary_writer_1af52a491bf58413b0f54a79c843e5c4ec>`;

		// construction
	
		:ref:`BinaryWriter<doxid-class_poco_1_1_binary_writer_1a0b5aa53d1d66cff1198e9f69bb7c1dc2>`(
			std::ostream& ostr,
			:ref:`StreamByteOrder<doxid-class_poco_1_1_binary_writer_1af52a491bf58413b0f54a79c843e5c4ec>` byteOrder = :ref:`NATIVE_BYTE_ORDER<doxid-class_poco_1_1_binary_writer_1af52a491bf58413b0f54a79c843e5c4eca6471072c1954b25ec5559dac46d5eaae>`
			);
	
		:ref:`BinaryWriter<doxid-class_poco_1_1_binary_writer_1a936e06ef1b427d972584637ccb4a1a88>`(
			std::ostream& ostr,
			:ref:`TextEncoding<doxid-class_poco_1_1_text_encoding>`& encoding,
			:ref:`StreamByteOrder<doxid-class_poco_1_1_binary_writer_1af52a491bf58413b0f54a79c843e5c4ec>` byteOrder = :ref:`NATIVE_BYTE_ORDER<doxid-class_poco_1_1_binary_writer_1af52a491bf58413b0f54a79c843e5c4eca6471072c1954b25ec5559dac46d5eaae>`
			);

		// methods
	
		BinaryWriter&
		:target:`operator<<<doxid-class_poco_1_1_binary_writer_1a8f6add8bc2553a77e939b47bdafc31f7>`(bool value);
	
		BinaryWriter&
		:target:`operator<<<doxid-class_poco_1_1_binary_writer_1ae91fddb7b2dbb128103d02faeaa5554a>`(char value);
	
		BinaryWriter&
		:target:`operator<<<doxid-class_poco_1_1_binary_writer_1a50e908f71db9e1dba06f39869deac404>`(unsigned char value);
	
		BinaryWriter&
		:target:`operator<<<doxid-class_poco_1_1_binary_writer_1a8ef864278093a0d3a857dbc3df1e8fd0>`(signed char value);
	
		BinaryWriter&
		:target:`operator<<<doxid-class_poco_1_1_binary_writer_1a4a6610aa4b6a45f4296d6ac414578bb0>`(short value);
	
		BinaryWriter&
		:target:`operator<<<doxid-class_poco_1_1_binary_writer_1ab9e578ae82dd57ea04ac0312a6e3844d>`(unsigned short value);
	
		BinaryWriter&
		:target:`operator<<<doxid-class_poco_1_1_binary_writer_1a4227aa2437899daf7d69da29458ccc32>`(int value);
	
		BinaryWriter&
		:target:`operator<<<doxid-class_poco_1_1_binary_writer_1aee9893939bcc91733816f98930ae41da>`(unsigned int value);
	
		BinaryWriter&
		:target:`operator<<<doxid-class_poco_1_1_binary_writer_1aff869aba9f2474cc4cf37abc272e714b>`(long value);
	
		BinaryWriter&
		:target:`operator<<<doxid-class_poco_1_1_binary_writer_1aa0a96f030186ac04095357f5bea59b26>`(unsigned long value);
	
		BinaryWriter&
		:target:`operator<<<doxid-class_poco_1_1_binary_writer_1a6f416254308d6b0970002f89a7057c5d>`(float value);
	
		BinaryWriter&
		:target:`operator<<<doxid-class_poco_1_1_binary_writer_1a8a2e15d47123e1a466d1acb6b1b73fb8>`(double value);
	
		BinaryWriter&
		:target:`operator<<<doxid-class_poco_1_1_binary_writer_1aad328cd76a22dee2efce926db826201b>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& value);
	
		BinaryWriter&
		:target:`operator<<<doxid-class_poco_1_1_binary_writer_1a2cbc491783bddb7b8f6819cc019267d9>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` char* value);
	
		template <typename T>
		BinaryWriter&
		:target:`operator<<<doxid-class_poco_1_1_binary_writer_1aedad8aa67fac1d0f0fb0a623ceef4bb9>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::vector<T>& value);
	
		void
		:ref:`write7BitEncoded<doxid-class_poco_1_1_binary_writer_1a3bcf9947c1a13576daf52ba39b4d8dc7>`(UInt32 value);
	
		void
		:ref:`writeRaw<doxid-class_poco_1_1_binary_writer_1a3312dcc3a35a056eb3a5b53a9a0f0fbd>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& rawData);
	
		void
		:ref:`writeRaw<doxid-class_poco_1_1_binary_writer_1a351d60d2168b962c14e9b6aadf82c287>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` char* buffer,
			std::streamsize length
			);
	
		void
		:ref:`writeBOM<doxid-class_poco_1_1_binary_writer_1a776540c4a675217df96dfced0c5907a1>`();
	
		void
		:ref:`flush<doxid-class_poco_1_1_binary_writer_1a54b7ef2b174c76adcc396887453bcf8c>`();
	
		bool
		:ref:`good<doxid-class_poco_1_1_binary_writer_1ad4df6b0e5086698cc13738c8f8241e1d>`();
	
		bool
		:ref:`fail<doxid-class_poco_1_1_binary_writer_1a33574537b19fed8fcbbb0ce753e7d60e>`();
	
		bool
		:ref:`bad<doxid-class_poco_1_1_binary_writer_1a190367154761bd32b286559b1f861863>`();
	
		std::ostream&
		:ref:`stream<doxid-class_poco_1_1_binary_writer_1a9f00cbf4d33652c1d6320efcc772d507>`() const;
	
		:ref:`StreamByteOrder<doxid-class_poco_1_1_binary_writer_1af52a491bf58413b0f54a79c843e5c4ec>`
		:ref:`byteOrder<doxid-class_poco_1_1_binary_writer_1a4c23f1e4b020bd6047e0b54a5c5eae10>`() const;
	};

	// direct descendants

	template <typename T>
	class :ref:`BasicMemoryBinaryWriter<doxid-class_poco_1_1_basic_memory_binary_writer>`;
.. _details-class_poco_1_1_binary_writer:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

This class writes basic types (and std::vectors of these) in binary form into an output stream.

It provides an inserter-based interface similar to ostream. The writer also supports automatic conversion from big-endian (network byte order) to little-endian and vice-versa. Use a :ref:`BinaryReader <doxid-class_poco_1_1_binary_reader>` to read from a stream created by a :ref:`BinaryWriter <doxid-class_poco_1_1_binary_writer>`. Be careful when exchanging data between systems with different data type sizes (e.g., 32-bit and 64-bit architectures), as the sizes of some of the basic types may be different. For example, writing a long integer on a 64-bit system and reading it on a 32-bit system may yield an incorrent result. Use fixed-size types (Int32, Int64, etc.) in such a case.

Construction
------------

.. index:: pair: function; BinaryWriter
.. _doxid-class_poco_1_1_binary_writer_1a0b5aa53d1d66cff1198e9f69bb7c1dc2:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	BinaryWriter(
		std::ostream& ostr,
		:ref:`StreamByteOrder<doxid-class_poco_1_1_binary_writer_1af52a491bf58413b0f54a79c843e5c4ec>` byteOrder = :ref:`NATIVE_BYTE_ORDER<doxid-class_poco_1_1_binary_writer_1af52a491bf58413b0f54a79c843e5c4eca6471072c1954b25ec5559dac46d5eaae>`
		)

Creates the :ref:`BinaryWriter <doxid-class_poco_1_1_binary_writer>`.

.. index:: pair: function; BinaryWriter
.. _doxid-class_poco_1_1_binary_writer_1a936e06ef1b427d972584637ccb4a1a88:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	BinaryWriter(
		std::ostream& ostr,
		:ref:`TextEncoding<doxid-class_poco_1_1_text_encoding>`& encoding,
		:ref:`StreamByteOrder<doxid-class_poco_1_1_binary_writer_1af52a491bf58413b0f54a79c843e5c4ec>` byteOrder = :ref:`NATIVE_BYTE_ORDER<doxid-class_poco_1_1_binary_writer_1af52a491bf58413b0f54a79c843e5c4eca6471072c1954b25ec5559dac46d5eaae>`
		)

Creates the :ref:`BinaryWriter <doxid-class_poco_1_1_binary_writer>` using the given :ref:`TextEncoding <doxid-class_poco_1_1_text_encoding>`.

Strings will be converted from the currently set global encoding (see :ref:`Poco::TextEncoding::global() <doxid-class_poco_1_1_text_encoding_1a3c13a27371bddf520833a119cd902fd7>`) to the specified encoding.

Methods
-------

.. index:: pair: function; write7BitEncoded
.. _doxid-class_poco_1_1_binary_writer_1a3bcf9947c1a13576daf52ba39b4d8dc7:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	write7BitEncoded(UInt32 value)

Writes a 32-bit unsigned integer in a compressed format.

The value is written out seven bits at a time, starting with the seven least-significant bits. The high bit of a byte indicates whether there are more bytes to be written after this one. If value will fit in seven bits, it takes only one byte of space. If value will not fit in seven bits, the high bit is set on the first byte and written out. value is then shifted by seven bits and the next byte is written. This process is repeated until the entire integer has been written.

.. index:: pair: function; writeRaw
.. _doxid-class_poco_1_1_binary_writer_1a3312dcc3a35a056eb3a5b53a9a0f0fbd:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	writeRaw(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& rawData)

Writes the string as-is to the stream.

.. index:: pair: function; writeRaw
.. _doxid-class_poco_1_1_binary_writer_1a351d60d2168b962c14e9b6aadf82c287:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	writeRaw(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` char* buffer,
		std::streamsize length
		)

Writes length raw bytes from the given buffer to the stream.

.. index:: pair: function; writeBOM
.. _doxid-class_poco_1_1_binary_writer_1a776540c4a675217df96dfced0c5907a1:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	writeBOM()

Writes a byte-order mark to the stream.

A byte order mark is a 16-bit integer with a value of 0xFEFF, written in host byte-order. A :ref:`BinaryReader <doxid-class_poco_1_1_binary_reader>` uses the byte-order mark to determine the byte-order of the stream.

.. index:: pair: function; flush
.. _doxid-class_poco_1_1_binary_writer_1a54b7ef2b174c76adcc396887453bcf8c:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	flush()

Flushes the underlying stream.

.. index:: pair: function; good
.. _doxid-class_poco_1_1_binary_writer_1ad4df6b0e5086698cc13738c8f8241e1d:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	bool
	good()

Returns _ostr.good();.

.. index:: pair: function; fail
.. _doxid-class_poco_1_1_binary_writer_1a33574537b19fed8fcbbb0ce753e7d60e:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	bool
	fail()

Returns _ostr.fail();.

.. index:: pair: function; bad
.. _doxid-class_poco_1_1_binary_writer_1a190367154761bd32b286559b1f861863:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	bool
	bad()

Returns _ostr.bad();.

.. index:: pair: function; stream
.. _doxid-class_poco_1_1_binary_writer_1a9f00cbf4d33652c1d6320efcc772d507:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	std::ostream&
	stream() const

Returns the underlying stream.

.. index:: pair: function; byteOrder
.. _doxid-class_poco_1_1_binary_writer_1a4c23f1e4b020bd6047e0b54a5c5eae10:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`StreamByteOrder<doxid-class_poco_1_1_binary_writer_1af52a491bf58413b0f54a79c843e5c4ec>`
	byteOrder() const

Returns the byte ordering used by the writer, which is either BIG_ENDIAN_BYTE_ORDER or LITTLE_ENDIAN_BYTE_ORDER.

