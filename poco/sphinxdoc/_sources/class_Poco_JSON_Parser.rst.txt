.. index:: pair: class; Poco::JSON::Parser
.. _doxid-class_poco_1_1_j_s_o_n_1_1_parser:

class Poco::JSON::Parser
========================

.. toctree::
	:hidden:

	enum_Poco_JSON_Parser_Actions.rst
	enum_Poco_JSON_Parser_Classes.rst
	enum_Poco_JSON_Parser_JSONType.rst
	enum_Poco_JSON_Parser_Modes.rst
	enum_Poco_JSON_Parser_States.rst
	class_Poco_JSON_Parser_Source.rst

Overview
~~~~~~~~

A parser for reading RFC 4627 compliant :ref:`JSON <doxid-namespace_poco_1_1_j_s_o_n>` from strings or streams. :ref:`More...<details-class_poco_1_1_j_s_o_n_1_1_parser>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <Parser.h>
	
	class Parser
	{
	public:
		// typedefs
	
		typedef std::char_traits<char> :target:`CharTraits<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1ada997def693cb931762d263596ab704c>`;
		typedef CharTraits::int_type :target:`CharIntType<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1afe4c7d48d81a60a4d9802d0a9a1f033e>`;

		// enums
	
		enum :ref:`Actions<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a05dfedbf3e78fed856be02c98a292c37>`;
		enum :ref:`Classes<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a9a8ab638e779dd4859d31761bf667ef9>`;
		enum :ref:`JSONType<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a17868d99a6eca2b9f8e85e539a3ad78d>`;
		enum :ref:`Modes<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a5b72e7b699150e32cbd4ce2714d9d8e5>`;
		enum :ref:`States<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1ae5e337f6db978d6b0bb9a1e52cb0ba3d>`;

		// classes
	
		template <typename IT>
		class :ref:`Source<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1_1_source>`;

		// fields
	
		static :ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::size_t :target:`JSON_PARSE_BUFFER_SIZE<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a00c769cb5afd1813396a4fd88543474a>`;
		static :ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::size_t :target:`JSON_PARSER_STACK_SIZE<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a61066ae2f76a7047a19f38e63bc49166>`;
		static :ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` int :target:`JSON_UNLIMITED_DEPTH<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a0a2686e12da2580178635a25b6ba3c6f>`;

		// construction
	
		:ref:`Parser<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a34b517d058961a83fb91fa87c635d092>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Handler::Ptr<doxid-class_poco_1_1_j_s_o_n_1_1_handler_1aeea59a4bec99e84dcdae8f7675415888>`& pHandler = new :ref:`ParseHandler<doxid-class_poco_1_1_j_s_o_n_1_1_parse_handler>`,
			std::size_t bufSize = :ref:`JSON_PARSE_BUFFER_SIZE<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a00c769cb5afd1813396a4fd88543474a>`
			);

		// methods
	
		void
		:ref:`reset<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1aaa812662dc286a6974d2dc383a5b874e>`();
	
		void
		:ref:`setAllowComments<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a852c390bcc30a25459ed32c001fc1c47>`(bool comments);
	
		bool
		:ref:`getAllowComments<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a3d63b05ab2b3d6a5b84fe1e1c94f10f3>`() const;
	
		void
		:ref:`setAllowNullByte<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1aeb8b55947886dc1422ac99f8c9e47d34>`(bool nullByte);
	
		bool
		:ref:`getAllowNullByte<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a956869a442decffda471ca8ef9a137e0>`() const;
	
		void
		:ref:`setDepth<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a65e6790070aa11a2c3a71e800f8135bb>`(std::size_t depth);
	
		std::size_t
		:ref:`getDepth<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1aa6c6092e1767b08e89de291ab437377c>`() const;
	
		:ref:`Dynamic::Var<doxid-class_poco_1_1_dynamic_1_1_var>`
		:ref:`parse<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a1a50eb86b075d269b225b9852e7f6485>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& json);
	
		:ref:`Dynamic::Var<doxid-class_poco_1_1_dynamic_1_1_var>`
		:ref:`parse<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a740f64a75d3dcc4b86d30fe0abeccc86>`(std::istream& in);
	
		void
		:ref:`setHandler<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a88ae78be8b5affedda0adcc6d93622db>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Handler::Ptr<doxid-class_poco_1_1_j_s_o_n_1_1_handler_1aeea59a4bec99e84dcdae8f7675415888>`& pHandler);
	
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Handler::Ptr<doxid-class_poco_1_1_j_s_o_n_1_1_handler_1aeea59a4bec99e84dcdae8f7675415888>`&
		:ref:`getHandler<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a6691004361a9808e03a6cac34d90e2b3>`();
	
		:ref:`Dynamic::Var<doxid-class_poco_1_1_dynamic_1_1_var>`
		:ref:`asVar<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a630dddf6ad1fe0baea6f8d6effaef265>`() const;
	
		:ref:`Dynamic::Var<doxid-class_poco_1_1_dynamic_1_1_var>`
		:ref:`result<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a2734e74d3c2e01ee99d8b568887d6576>`() const;
	};
.. _details-class_poco_1_1_j_s_o_n_1_1_parser:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

A parser for reading RFC 4627 compliant :ref:`JSON <doxid-namespace_poco_1_1_j_s_o_n>` from strings or streams.

Simple usage example:

.. ref-code-block:: cpp

	std::string json = "{ \"name\" : \"Franky\", \"children\" : [ \"Jonas\", \"Ellen\" ] }";
	Parser parser;
	Var result = parser.parse(json);
	// ... use result (see next example)
	parser.reset();
	std::ostringstream ostr;
	PrintHandler::Ptr pHandler = new PrintHandler(ostr);
	parser.setHandler(pHandler);
	parser.parse(json); // ostr.str() == json

The result of parsing a valid :ref:`JSON <doxid-namespace_poco_1_1_j_s_o_n>` document will be either an :ref:`Object <doxid-class_poco_1_1_j_s_o_n_1_1_object>` or an :ref:`Array <doxid-class_poco_1_1_j_s_o_n_1_1_array>`. Therefore the result of :ref:`parse() <doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a1a50eb86b075d269b225b9852e7f6485>` is a :ref:`Poco::Dynamic::Var <doxid-class_poco_1_1_dynamic_1_1_var>` containing a :ref:`Poco::SharedPtr <doxid-class_poco_1_1_shared_ptr>` to an :ref:`Object <doxid-class_poco_1_1_j_s_o_n_1_1_object>` or :ref:`Array <doxid-class_poco_1_1_j_s_o_n_1_1_array>` instance.

Example:

.. ref-code-block:: cpp

	std::string json = "{ \"name\" : \"Franky\", \"children\" : [ \"Jonas\", \"Ellen\" ] }";
	Parser parser;
	Var result = parser.parse(json);
	Object::Ptr object = result.extract<Object::Ptr>();
	std::string name = object.getValue<std::string>("name");
	Array::Ptr children = object.getArray("children");

Construction
------------

.. index:: pair: function; Parser
.. _doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a34b517d058961a83fb91fa87c635d092:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	Parser(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Handler::Ptr<doxid-class_poco_1_1_j_s_o_n_1_1_handler_1aeea59a4bec99e84dcdae8f7675415888>`& pHandler = new :ref:`ParseHandler<doxid-class_poco_1_1_j_s_o_n_1_1_parse_handler>`,
		std::size_t bufSize = :ref:`JSON_PARSE_BUFFER_SIZE<doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a00c769cb5afd1813396a4fd88543474a>`
		)

Creates :ref:`JSON <doxid-namespace_poco_1_1_j_s_o_n>` :ref:`Parser <doxid-class_poco_1_1_j_s_o_n_1_1_parser>`, using the given :ref:`Handler <doxid-class_poco_1_1_j_s_o_n_1_1_handler>` and buffer size.

Methods
-------

.. index:: pair: function; reset
.. _doxid-class_poco_1_1_j_s_o_n_1_1_parser_1aaa812662dc286a6974d2dc383a5b874e:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	reset()

Resets the parser.

.. index:: pair: function; setAllowComments
.. _doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a852c390bcc30a25459ed32c001fc1c47:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	setAllowComments(bool comments)

Allow or disallow comments. By default, comments are not allowed.

.. index:: pair: function; getAllowComments
.. _doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a3d63b05ab2b3d6a5b84fe1e1c94f10f3:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	bool
	getAllowComments() const

Returns true if comments are allowed, false otherwise.

By default, comments are not allowed.

.. index:: pair: function; setAllowNullByte
.. _doxid-class_poco_1_1_j_s_o_n_1_1_parser_1aeb8b55947886dc1422ac99f8c9e47d34:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	setAllowNullByte(bool nullByte)

Allow or disallow null byte in strings.

By default, null byte is allowed.

.. index:: pair: function; getAllowNullByte
.. _doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a956869a442decffda471ca8ef9a137e0:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	bool
	getAllowNullByte() const

Returns true if null byte is allowed, false otherwise.

By default, null bytes are allowed.

.. index:: pair: function; setDepth
.. _doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a65e6790070aa11a2c3a71e800f8135bb:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	setDepth(std::size_t depth)

Sets the allowed :ref:`JSON <doxid-namespace_poco_1_1_j_s_o_n>` depth.

.. index:: pair: function; getDepth
.. _doxid-class_poco_1_1_j_s_o_n_1_1_parser_1aa6c6092e1767b08e89de291ab437377c:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	std::size_t
	getDepth() const

Returns the allowed :ref:`JSON <doxid-namespace_poco_1_1_j_s_o_n>` depth.

.. index:: pair: function; parse
.. _doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a1a50eb86b075d269b225b9852e7f6485:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Dynamic::Var<doxid-class_poco_1_1_dynamic_1_1_var>`
	parse(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& json)

Parses :ref:`JSON <doxid-namespace_poco_1_1_j_s_o_n>` from a string.

.. index:: pair: function; parse
.. _doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a740f64a75d3dcc4b86d30fe0abeccc86:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Dynamic::Var<doxid-class_poco_1_1_dynamic_1_1_var>`
	parse(std::istream& in)

Parses :ref:`JSON <doxid-namespace_poco_1_1_j_s_o_n>` from an input stream.

.. index:: pair: function; setHandler
.. _doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a88ae78be8b5affedda0adcc6d93622db:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	setHandler(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Handler::Ptr<doxid-class_poco_1_1_j_s_o_n_1_1_handler_1aeea59a4bec99e84dcdae8f7675415888>`& pHandler)

Set the :ref:`Handler <doxid-class_poco_1_1_j_s_o_n_1_1_handler>`.

.. index:: pair: function; getHandler
.. _doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a6691004361a9808e03a6cac34d90e2b3:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Handler::Ptr<doxid-class_poco_1_1_j_s_o_n_1_1_handler_1aeea59a4bec99e84dcdae8f7675415888>`&
	getHandler()

Returns the :ref:`Handler <doxid-class_poco_1_1_j_s_o_n_1_1_handler>`.

.. index:: pair: function; asVar
.. _doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a630dddf6ad1fe0baea6f8d6effaef265:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Dynamic::Var<doxid-class_poco_1_1_dynamic_1_1_var>`
	asVar() const

Returns the result of parsing;.

.. index:: pair: function; result
.. _doxid-class_poco_1_1_j_s_o_n_1_1_parser_1a2734e74d3c2e01ee99d8b568887d6576:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`Dynamic::Var<doxid-class_poco_1_1_dynamic_1_1_var>`
	result() const

Returns the result of parsing as :ref:`Dynamic::Var <doxid-class_poco_1_1_dynamic_1_1_var>`;.

