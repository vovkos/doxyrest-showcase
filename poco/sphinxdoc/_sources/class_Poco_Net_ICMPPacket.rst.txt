.. index:: pair: class; Poco::Net::ICMPPacket
.. _doxid-class_poco_1_1_net_1_1_i_c_m_p_packet:

class Poco::Net::ICMPPacket
===========================

.. toctree::
	:hidden:

Overview
~~~~~~~~

This class is the ICMP packet abstraction. :ref:`More...<details-class_poco_1_1_net_1_1_i_c_m_p_packet>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <ICMPPacket.h>
	
	class ICMPPacket
	{
	public:
		// construction
	
		:ref:`ICMPPacket<doxid-class_poco_1_1_net_1_1_i_c_m_p_packet_1a00f6401686bfa281c19904e00a25da17>`(
			:ref:`IPAddress::Family<doxid-class_poco_1_1_net_1_1_i_p_address_1a048c8fc29019f4722f2cdb5ba752d9b6>` family,
			int dataSize = 48
			);

		// methods
	
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` Poco::UInt8*
		:ref:`packet<doxid-class_poco_1_1_net_1_1_i_c_m_p_packet_1a946d5789671c51b517e52b6c2e40ce38>`();
	
		int
		:ref:`packetSize<doxid-class_poco_1_1_net_1_1_i_c_m_p_packet_1abadca2eb25652ef689ad3bccb32b9225>`() const;
	
		Poco::UInt16
		:ref:`sequence<doxid-class_poco_1_1_net_1_1_i_c_m_p_packet_1aed4b16a4aef052a64335918f98b56b3e>`() const;
	
		void
		:ref:`setDataSize<doxid-class_poco_1_1_net_1_1_i_c_m_p_packet_1a12cfff3ce332d87a5641f604e59bf17f>`(int dataSize);
	
		int
		:ref:`getDataSize<doxid-class_poco_1_1_net_1_1_i_c_m_p_packet_1a466675b3b8d1854d8d30eb5edc38a510>`() const;
	
		int
		:ref:`maxPacketSize<doxid-class_poco_1_1_net_1_1_i_c_m_p_packet_1ab444d1c8f2cdd441bfcdaeec0b2582c4>`() const;
	
		struct timeval
		:ref:`time<doxid-class_poco_1_1_net_1_1_i_c_m_p_packet_1abd40417e8b2af92265ecec8cd4837c59>`(
			Poco::UInt8* buffer = 0,
			int length = 0
			) const;
	
		bool
		:ref:`validReplyID<doxid-class_poco_1_1_net_1_1_i_c_m_p_packet_1a8dc41d26c10ec924d00f289e69259f2e>`(
			Poco::UInt8* buffer,
			int length
			) const;
	
		std::string
		:ref:`errorDescription<doxid-class_poco_1_1_net_1_1_i_c_m_p_packet_1a4ce3025e7bca9deb6d720a6347d2214d>`(
			Poco::UInt8* buffer,
			int length
			);
	
		std::string
		:ref:`typeDescription<doxid-class_poco_1_1_net_1_1_i_c_m_p_packet_1a86103cd8c07218fc8920686ceb9c5092>`(int typeId);
	};
.. _details-class_poco_1_1_net_1_1_i_c_m_p_packet:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

This class is the ICMP packet abstraction.

Construction
------------

.. index:: pair: function; ICMPPacket
.. _doxid-class_poco_1_1_net_1_1_i_c_m_p_packet_1a00f6401686bfa281c19904e00a25da17:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	ICMPPacket(
		:ref:`IPAddress::Family<doxid-class_poco_1_1_net_1_1_i_p_address_1a048c8fc29019f4722f2cdb5ba752d9b6>` family,
		int dataSize = 48
		)

Creates an :ref:`ICMPPacket <doxid-class_poco_1_1_net_1_1_i_c_m_p_packet>` of specified family.

Methods
-------

.. index:: pair: function; packet
.. _doxid-class_poco_1_1_net_1_1_i_c_m_p_packet_1a946d5789671c51b517e52b6c2e40ce38:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` Poco::UInt8*
	packet()

Returns raw ICMP packet. ICMP header and data are included in the returned packet.

.. index:: pair: function; packetSize
.. _doxid-class_poco_1_1_net_1_1_i_c_m_p_packet_1abadca2eb25652ef689ad3bccb32b9225:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	int
	packetSize() const

Returns the total length of packet (header + data);.

.. index:: pair: function; sequence
.. _doxid-class_poco_1_1_net_1_1_i_c_m_p_packet_1aed4b16a4aef052a64335918f98b56b3e:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	Poco::UInt16
	sequence() const

Returns the most recent sequence number generated.

.. index:: pair: function; setDataSize
.. _doxid-class_poco_1_1_net_1_1_i_c_m_p_packet_1a12cfff3ce332d87a5641f604e59bf17f:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	setDataSize(int dataSize)

Sets data size.

.. index:: pair: function; getDataSize
.. _doxid-class_poco_1_1_net_1_1_i_c_m_p_packet_1a466675b3b8d1854d8d30eb5edc38a510:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	int
	getDataSize() const

Returns data size.

.. index:: pair: function; maxPacketSize
.. _doxid-class_poco_1_1_net_1_1_i_c_m_p_packet_1ab444d1c8f2cdd441bfcdaeec0b2582c4:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	int
	maxPacketSize() const

Returns the total length of packet (header + data);.

.. index:: pair: function; time
.. _doxid-class_poco_1_1_net_1_1_i_c_m_p_packet_1abd40417e8b2af92265ecec8cd4837c59:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	struct timeval
	time(
		Poco::UInt8* buffer = 0,
		int length = 0
		) const

Returns current epoch time if either buffer or length are equal to zero.

Otherwise, it extracts the time value from the supplied buffer and returns the extracted value.

Supplied buffer includes IP header, ICMP header and data.

.. index:: pair: function; validReplyID
.. _doxid-class_poco_1_1_net_1_1_i_c_m_p_packet_1a8dc41d26c10ec924d00f289e69259f2e:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	bool
	validReplyID(
		Poco::UInt8* buffer,
		int length
		) const

Returns true if the extracted id is recognized (equals the process id).

Supplied buffer includes IP header, ICMP header and data.

.. index:: pair: function; errorDescription
.. _doxid-class_poco_1_1_net_1_1_i_c_m_p_packet_1a4ce3025e7bca9deb6d720a6347d2214d:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	std::string
	errorDescription(
		Poco::UInt8* buffer,
		int length
		)

Returns error description string.

If supplied buffer contains an ICMP echo reply packet, an empty string is returned indicating the absence of error.

Supplied buffer includes IP header, ICMP header and data.

.. index:: pair: function; typeDescription
.. _doxid-class_poco_1_1_net_1_1_i_c_m_p_packet_1a86103cd8c07218fc8920686ceb9c5092:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	std::string
	typeDescription(int typeId)

Returns the description of the packet type.

