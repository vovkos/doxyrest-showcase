.. index:: pair: class; Poco::URIStreamOpener
.. _doxid-class_poco_1_1_u_r_i_stream_opener:

class Poco::URIStreamOpener
===========================

.. toctree::
	:hidden:

Overview
~~~~~~~~

The :ref:`URIStreamOpener <doxid-class_poco_1_1_u_r_i_stream_opener>` class is used to create and open input streams for resourced identified by Uniform Resource Identifiers. :ref:`More...<details-class_poco_1_1_u_r_i_stream_opener>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <URIStreamOpener.h>
	
	class URIStreamOpener
	{
	public:
		// enums
	
		enum
		{
		    :target:`MAX_REDIRECTS<doxid-class_poco_1_1_u_r_i_stream_opener_1a04500a422a7e14ac68322ba4f2db5985a1f6772ad38902f23e959629ab33ef082>` = 10,
		};

		// methods
	
		std::istream*
		:ref:`open<doxid-class_poco_1_1_u_r_i_stream_opener_1afd57c5568129928eee2c3ed93e9269a4>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`URI<doxid-class_poco_1_1_u_r_i>`& uri) const;
	
		std::istream*
		:ref:`open<doxid-class_poco_1_1_u_r_i_stream_opener_1a166d57fd2eebed5e7fae23905b02c58c>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& pathOrURI) const;
	
		std::istream*
		:ref:`open<doxid-class_poco_1_1_u_r_i_stream_opener_1acd380f43bd292f8b4b8209ba3d37a67b>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& basePathOrURI,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& pathOrURI
			) const;
	
		void
		:ref:`registerStreamFactory<doxid-class_poco_1_1_u_r_i_stream_opener_1a106ae2b189cf73fd72b99469722f18ab>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& scheme,
			:ref:`URIStreamFactory<doxid-class_poco_1_1_u_r_i_stream_factory>`* pFactory
			);
	
		void
		:ref:`unregisterStreamFactory<doxid-class_poco_1_1_u_r_i_stream_opener_1a087fd5a435c22a3674cccf02936bd87e>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& scheme);
	
		bool
		:ref:`supportsScheme<doxid-class_poco_1_1_u_r_i_stream_opener_1a23b2db25aca78a98f1d26a0d37ac0cc8>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& scheme);
	
		static
		URIStreamOpener&
		:ref:`defaultOpener<doxid-class_poco_1_1_u_r_i_stream_opener_1a984a989fe7dc72fcdd7acec494022c73>`();

	protected:
		// methods
	
		std::istream*
		:target:`openFile<doxid-class_poco_1_1_u_r_i_stream_opener_1a7b39d8b9bcd5c684c7315c738256444a>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`Path<doxid-class_poco_1_1_path>`& path) const;
	
		std::istream*
		:target:`openURI<doxid-class_poco_1_1_u_r_i_stream_opener_1a853267566fae730a38bf7aabcf8dc0a8>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& scheme,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`URI<doxid-class_poco_1_1_u_r_i>`& uri
			) const;
	};
.. _details-class_poco_1_1_u_r_i_stream_opener:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

The :ref:`URIStreamOpener <doxid-class_poco_1_1_u_r_i_stream_opener>` class is used to create and open input streams for resourced identified by Uniform Resource Identifiers.

For every :ref:`URI <doxid-class_poco_1_1_u_r_i>` scheme used, a :ref:`URIStreamFactory <doxid-class_poco_1_1_u_r_i_stream_factory>` must be registered. A :ref:`FileStreamFactory <doxid-class_poco_1_1_file_stream_factory>` is automatically registered for file URIs.

Construction
------------

.. _doxid-class_poco_1_1_u_r_i_stream_opener_1a978c8c1addb7aece014987f8ce14385c:
.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	~URIStreamOpener()

Destroys the :ref:`URIStreamOpener <doxid-class_poco_1_1_u_r_i_stream_opener>` and deletes all registered :ref:`URI <doxid-class_poco_1_1_u_r_i>` stream factories.

Methods
-------

.. index:: pair: function; open
.. _doxid-class_poco_1_1_u_r_i_stream_opener_1afd57c5568129928eee2c3ed93e9269a4:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	std::istream*
	open(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`URI<doxid-class_poco_1_1_u_r_i>`& uri) const

Tries to create and open an input stream for the resource specified by the given uniform resource identifier.

If no :ref:`URIStreamFactory <doxid-class_poco_1_1_u_r_i_stream_factory>` has been registered for the :ref:`URI <doxid-class_poco_1_1_u_r_i>` 's scheme, a UnknownURIScheme exception is thrown. If the stream cannot be opened for any reason, an IOException is thrown.

The given :ref:`URI <doxid-class_poco_1_1_u_r_i>` must be a valid one. This excludes file system paths.

Whoever calls the method is responsible for deleting the returned stream.

.. index:: pair: function; open
.. _doxid-class_poco_1_1_u_r_i_stream_opener_1a166d57fd2eebed5e7fae23905b02c58c:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	std::istream*
	open(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& pathOrURI) const

Tries to create and open an input stream for the resource specified by the given path or uniform resource identifier.

If the stream cannot be opened for any reason, an :ref:`Exception <doxid-class_poco_1_1_exception>` is thrown.

The method first tries to interpret the given pathOrURI as an :ref:`URI <doxid-class_poco_1_1_u_r_i>`. If this fails, the pathOrURI is treated as local filesystem path. If this also fails, an exception is thrown.

Whoever calls the method is responsible for deleting the returned stream.

.. index:: pair: function; open
.. _doxid-class_poco_1_1_u_r_i_stream_opener_1acd380f43bd292f8b4b8209ba3d37a67b:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	std::istream*
	open(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& basePathOrURI,
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& pathOrURI
		) const

Tries to create and open an input stream for the resource specified by the given path or uniform resource identifier.

pathOrURI is resolved against basePathOrURI (see :ref:`URI::resolve() <doxid-class_poco_1_1_u_r_i_1af90b3af1aa4ffd404478ccaf781c1f6c>` and :ref:`Path::resolve() <doxid-class_poco_1_1_path_1a189c6fdf0f9ef9c1e47b34573be4c1c8>` for more information).

If the stream cannot be opened for any reason, an :ref:`Exception <doxid-class_poco_1_1_exception>` is thrown.

Whoever calls the method is responsible for deleting the returned stream.

.. index:: pair: function; registerStreamFactory
.. _doxid-class_poco_1_1_u_r_i_stream_opener_1a106ae2b189cf73fd72b99469722f18ab:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	registerStreamFactory(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& scheme,
		:ref:`URIStreamFactory<doxid-class_poco_1_1_u_r_i_stream_factory>`* pFactory
		)

Registers a :ref:`URIStreamFactory <doxid-class_poco_1_1_u_r_i_stream_factory>` for the given scheme.

If another factory has already been registered for the scheme, an ExistsException is thrown.

The :ref:`URIStreamOpener <doxid-class_poco_1_1_u_r_i_stream_opener>` takes ownership of the factory and deletes it when it is no longer needed (in other words, when the :ref:`URIStreamOpener <doxid-class_poco_1_1_u_r_i_stream_opener>` is deleted).

.. index:: pair: function; unregisterStreamFactory
.. _doxid-class_poco_1_1_u_r_i_stream_opener_1a087fd5a435c22a3674cccf02936bd87e:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	unregisterStreamFactory(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& scheme)

Unregisters and deletes the :ref:`URIStreamFactory <doxid-class_poco_1_1_u_r_i_stream_factory>` for the given scheme.

Throws a NotFoundException if no :ref:`URIStreamFactory <doxid-class_poco_1_1_u_r_i_stream_factory>` has been registered for the given scheme.

.. index:: pair: function; supportsScheme
.. _doxid-class_poco_1_1_u_r_i_stream_opener_1a23b2db25aca78a98f1d26a0d37ac0cc8:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	bool
	supportsScheme(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& scheme)

Returns true iff a :ref:`URIStreamFactory <doxid-class_poco_1_1_u_r_i_stream_factory>` for the given scheme has been registered.

.. index:: pair: function; defaultOpener
.. _doxid-class_poco_1_1_u_r_i_stream_opener_1a984a989fe7dc72fcdd7acec494022c73:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	static
	URIStreamOpener&
	defaultOpener()

Returns a reference to the default :ref:`URIStreamOpener <doxid-class_poco_1_1_u_r_i_stream_opener>`.

