.. index:: pair: class; Poco::UTF16Encoding
.. _doxid-class_poco_1_1_u_t_f16_encoding:

class Poco::UTF16Encoding
=========================

.. toctree::
	:hidden:

	enum_Poco_UTF16Encoding_ByteOrderType.rst

Overview
~~~~~~~~

UTF-16 text encoding, as defined in RFC 2781. :ref:`More...<details-class_poco_1_1_u_t_f16_encoding>`


.. ref-code-block:: cpp
	:class: doxyrest-overview-code-block

	#include <UTF16Encoding.h>
	
	class UTF16Encoding: public :ref:`Poco::TextEncoding<doxid-class_poco_1_1_text_encoding>`
	{
	public:
		// enums
	
		enum :ref:`ByteOrderType<doxid-class_poco_1_1_u_t_f16_encoding_1a994e107c077a6f865322952ae5a5f6e3>`;

		// construction
	
		:ref:`UTF16Encoding<doxid-class_poco_1_1_u_t_f16_encoding_1ad834c5ee792bdb480e4cd26b81c10d29>`(:ref:`ByteOrderType<doxid-class_poco_1_1_u_t_f16_encoding_1a994e107c077a6f865322952ae5a5f6e3>` byteOrder = :ref:`NATIVE_BYTE_ORDER<doxid-class_poco_1_1_u_t_f16_encoding_1a994e107c077a6f865322952ae5a5f6e3ab651c8e8a7ec03c73920c7c19ef878e9>`);
		:ref:`UTF16Encoding<doxid-class_poco_1_1_u_t_f16_encoding_1a94e301a49bed8b70467dda84314ae2ee>`(int byteOrderMark);

		// methods
	
		:ref:`ByteOrderType<doxid-class_poco_1_1_u_t_f16_encoding_1a994e107c077a6f865322952ae5a5f6e3>`
		:ref:`getByteOrder<doxid-class_poco_1_1_u_t_f16_encoding_1a2a51d772bc7bb6b248cb156e9d0bf813>`() const;
	
		void
		:ref:`setByteOrder<doxid-class_poco_1_1_u_t_f16_encoding_1a2a028718520446c9364c42480d66da3e>`(:ref:`ByteOrderType<doxid-class_poco_1_1_u_t_f16_encoding_1a994e107c077a6f865322952ae5a5f6e3>` byteOrder);
	
		void
		:ref:`setByteOrder<doxid-class_poco_1_1_u_t_f16_encoding_1ad6ae2a5b96b5ce910a65033a77587920>`(int byteOrderMark);
	
		virtual
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` char*
		:ref:`canonicalName<doxid-class_poco_1_1_u_t_f16_encoding_1a4ae946bca594efb9b3d04cffaedd556b>`() const;
	
		virtual
		bool
		:ref:`isA<doxid-class_poco_1_1_u_t_f16_encoding_1a81b7aad2d6db3b7d097fa50fb66eed4f>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& encodingName) const;
	
		virtual
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`CharacterMap<doxid-class_poco_1_1_text_encoding_1ac61121651a57a139cd625b1d23a42d09>`&
		:ref:`characterMap<doxid-class_poco_1_1_u_t_f16_encoding_1ac5b801122daf79dbe7ecaef0c2ba8d37>`() const;
	
		virtual
		int
		:ref:`convert<doxid-class_poco_1_1_u_t_f16_encoding_1aeea1e524b492f03c7078dc97c8165405>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` unsigned char* bytes) const;
	
		virtual
		int
		:ref:`convert<doxid-class_poco_1_1_u_t_f16_encoding_1aab2b720f8c5e151b5296093f8a226fee>`(
			int ch,
			unsigned char* bytes,
			int length
			) const;
	
		virtual
		int
		:ref:`queryConvert<doxid-class_poco_1_1_u_t_f16_encoding_1a7e0e0b47450c40a23ef5ee7a7574f1cd>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` unsigned char* bytes,
			int length
			) const;
	
		virtual
		int
		:ref:`sequenceLength<doxid-class_poco_1_1_u_t_f16_encoding_1ad25fa5a3759dce1b4d03c24d9748da71>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` unsigned char* bytes,
			int length
			) const;
	};

Inherited Members
-----------------

.. ref-code-block:: cpp
	:class: doxyrest-overview-inherited-code-block

	public:
		// typedefs
	
		typedef :ref:`SharedPtr<doxid-class_poco_1_1_shared_ptr>`<:ref:`TextEncoding<doxid-class_poco_1_1_text_encoding>`> :ref:`Ptr<doxid-class_poco_1_1_text_encoding_1ac3f8a98d778ac1dc2e6e6020f303d229>`;
		typedef int :ref:`CharacterMap<doxid-class_poco_1_1_text_encoding_1ac61121651a57a139cd625b1d23a42d09>`[256];

		// enums
	
		enum
		{
		    :ref:`MAX_SEQUENCE_LENGTH<doxid-class_poco_1_1_text_encoding_1a259c6e05e7c9869050f8fd4967d50e53a2add20503785de3c42ea25b166397b99>` = 6,
		};

		// fields
	
		static :ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string :ref:`GLOBAL<doxid-class_poco_1_1_text_encoding_1a61e68007a0df4782f2984b6fe43c4015>`;

		// methods
	
		virtual
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` char*
		:ref:`canonicalName<doxid-class_poco_1_1_text_encoding_1a128efbeb06e5b102704633d3d8565ea3>`() const = 0;
	
		virtual
		bool
		:ref:`isA<doxid-class_poco_1_1_text_encoding_1aa199506fe71af0bb8bef4b735880ba48>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& encodingName) const = 0;
	
		virtual
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`CharacterMap<doxid-class_poco_1_1_text_encoding_1ac61121651a57a139cd625b1d23a42d09>`&
		:ref:`characterMap<doxid-class_poco_1_1_text_encoding_1a7c3e03c076147725384737ec0a4471ae>`() const = 0;
	
		virtual
		int
		:ref:`convert<doxid-class_poco_1_1_text_encoding_1a318ff7d0d0dfc8419d2358bc68145531>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` unsigned char* bytes) const;
	
		virtual
		int
		:ref:`queryConvert<doxid-class_poco_1_1_text_encoding_1a4bc2b918f47f5f705b827418ab6d222f>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` unsigned char* bytes,
			int length
			) const;
	
		virtual
		int
		:ref:`sequenceLength<doxid-class_poco_1_1_text_encoding_1abed5d214bf61c2596ccd5bf4dc80f89e>`(
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` unsigned char* bytes,
			int length
			) const;
	
		virtual
		int
		:ref:`convert<doxid-class_poco_1_1_text_encoding_1afd06a207525c358bd8e3ade92393acf5>`(
			int ch,
			unsigned char* bytes,
			int length
			) const;
	
		static
		:ref:`TextEncoding<doxid-class_poco_1_1_text_encoding>`&
		:ref:`byName<doxid-class_poco_1_1_text_encoding_1a692cfa762f2ffe37998126dfb0ea4e3b>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& encodingName);
	
		static
		:ref:`TextEncoding::Ptr<doxid-class_poco_1_1_text_encoding_1ac3f8a98d778ac1dc2e6e6020f303d229>`
		:ref:`find<doxid-class_poco_1_1_text_encoding_1aa7bfe79c429b4db12209ce43511c25e8>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& encodingName);
	
		static
		void
		:ref:`add<doxid-class_poco_1_1_text_encoding_1ac9f264cd9b8408f8f424559aac564969>`(:ref:`TextEncoding::Ptr<doxid-class_poco_1_1_text_encoding_1ac3f8a98d778ac1dc2e6e6020f303d229>` encoding);
	
		static
		void
		:ref:`add<doxid-class_poco_1_1_text_encoding_1a7b6fa47ee7d0db456a77ed7c30f97216>`(
			:ref:`TextEncoding::Ptr<doxid-class_poco_1_1_text_encoding_1ac3f8a98d778ac1dc2e6e6020f303d229>` encoding,
			:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& name
			);
	
		static
		void
		:ref:`remove<doxid-class_poco_1_1_text_encoding_1a14ffc4ec7564c0387e3835aa6fa07c25>`(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& encodingName);
	
		static
		:ref:`TextEncoding::Ptr<doxid-class_poco_1_1_text_encoding_1ac3f8a98d778ac1dc2e6e6020f303d229>`
		:ref:`global<doxid-class_poco_1_1_text_encoding_1aa63fca18ba67b616ce17cf9448d497b4>`(:ref:`TextEncoding::Ptr<doxid-class_poco_1_1_text_encoding_1ac3f8a98d778ac1dc2e6e6020f303d229>` encoding);
	
		static
		:ref:`TextEncoding<doxid-class_poco_1_1_text_encoding>`&
		:ref:`global<doxid-class_poco_1_1_text_encoding_1a3c13a27371bddf520833a119cd902fd7>`();

	protected:
		// methods
	
		static
		TextEncodingManager&
		:ref:`manager<doxid-class_poco_1_1_text_encoding_1abc5ef93c0fe78d3a9dba02a542b1f620>`();

.. _details-class_poco_1_1_u_t_f16_encoding:

Detailed Documentation
~~~~~~~~~~~~~~~~~~~~~~

UTF-16 text encoding, as defined in RFC 2781.

When converting from UTF-16 to :ref:`Unicode <doxid-class_poco_1_1_unicode>`, surrogates are reported as they are - in other words, surrogate pairs are not combined into one :ref:`Unicode <doxid-class_poco_1_1_unicode>` character. When converting from :ref:`Unicode <doxid-class_poco_1_1_unicode>` to UTF-16, however, characters outside the 16-bit range are converted into a low and high surrogate.

Construction
------------

.. index:: pair: function; UTF16Encoding
.. _doxid-class_poco_1_1_u_t_f16_encoding_1ad834c5ee792bdb480e4cd26b81c10d29:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	UTF16Encoding(:ref:`ByteOrderType<doxid-class_poco_1_1_u_t_f16_encoding_1a994e107c077a6f865322952ae5a5f6e3>` byteOrder = :ref:`NATIVE_BYTE_ORDER<doxid-class_poco_1_1_u_t_f16_encoding_1a994e107c077a6f865322952ae5a5f6e3ab651c8e8a7ec03c73920c7c19ef878e9>`)

Creates and initializes the encoding for the given byte order.

.. index:: pair: function; UTF16Encoding
.. _doxid-class_poco_1_1_u_t_f16_encoding_1a94e301a49bed8b70467dda84314ae2ee:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	UTF16Encoding(int byteOrderMark)

Creates and initializes the encoding for the byte-order indicated by the given byte-order mark, which is the :ref:`Unicode <doxid-class_poco_1_1_unicode>` character 0xFEFF.

Methods
-------

.. index:: pair: function; getByteOrder
.. _doxid-class_poco_1_1_u_t_f16_encoding_1a2a51d772bc7bb6b248cb156e9d0bf813:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	:ref:`ByteOrderType<doxid-class_poco_1_1_u_t_f16_encoding_1a994e107c077a6f865322952ae5a5f6e3>`
	getByteOrder() const

Returns the byte-order currently in use.

.. index:: pair: function; setByteOrder
.. _doxid-class_poco_1_1_u_t_f16_encoding_1a2a028718520446c9364c42480d66da3e:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	setByteOrder(:ref:`ByteOrderType<doxid-class_poco_1_1_u_t_f16_encoding_1a994e107c077a6f865322952ae5a5f6e3>` byteOrder)

Sets the byte order.

.. index:: pair: function; setByteOrder
.. _doxid-class_poco_1_1_u_t_f16_encoding_1ad6ae2a5b96b5ce910a65033a77587920:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	void
	setByteOrder(int byteOrderMark)

Sets the byte order according to the given byte order mark, which is the :ref:`Unicode <doxid-class_poco_1_1_unicode>` character 0xFEFF.

.. index:: pair: function; canonicalName
.. _doxid-class_poco_1_1_u_t_f16_encoding_1a4ae946bca594efb9b3d04cffaedd556b:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` char*
	canonicalName() const

Returns the canonical name of this encoding, e.g.

"ISO-8859-1". Encoding name comparisons are case insensitive.

.. index:: pair: function; isA
.. _doxid-class_poco_1_1_u_t_f16_encoding_1a81b7aad2d6db3b7d097fa50fb66eed4f:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	bool
	isA(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` std::string& encodingName) const

Returns true if the given name is one of the names of this encoding.

For example, the "ISO-8859-1" encoding is also known as "Latin-1".

Encoding name comparision are be case insensitive.

.. index:: pair: function; characterMap
.. _doxid-class_poco_1_1_u_t_f16_encoding_1ac5b801122daf79dbe7ecaef0c2ba8d37:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` :ref:`CharacterMap<doxid-class_poco_1_1_text_encoding_1ac61121651a57a139cd625b1d23a42d09>`&
	characterMap() const

Returns the CharacterMap for the encoding.

The CharacterMap should be kept in a static member. As :ref:`characterMap() <doxid-class_poco_1_1_u_t_f16_encoding_1ac5b801122daf79dbe7ecaef0c2ba8d37>` can be called frequently, it should be implemented in such a way that it just returns a static map. If the map is built at runtime, this should be done in the constructor.

.. index:: pair: function; convert
.. _doxid-class_poco_1_1_u_t_f16_encoding_1aeea1e524b492f03c7078dc97c8165405:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	int
	convert(:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` unsigned char* bytes) const

The convert function is used to convert multibyte sequences; bytes will point to a byte sequence of n bytes where sequenceLength(bytes, length) == -n, with length >= n.

The convert function must return the :ref:`Unicode <doxid-class_poco_1_1_unicode>` scalar value represented by this byte sequence or -1 if the byte sequence is malformed. The default implementation returns (int) bytes[0].

.. index:: pair: function; convert
.. _doxid-class_poco_1_1_u_t_f16_encoding_1aab2b720f8c5e151b5296093f8a226fee:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	int
	convert(
		int ch,
		unsigned char* bytes,
		int length
		) const

Transform the :ref:`Unicode <doxid-class_poco_1_1_unicode>` character ch into the encoding's byte sequence.

The method returns the number of bytes used. The method must not use more than length characters. Bytes and length can also be null - in this case only the number of bytes required to represent ch is returned. If the character cannot be converted, 0 is returned and the byte sequence remains unchanged. The default implementation simply returns 0.

.. index:: pair: function; queryConvert
.. _doxid-class_poco_1_1_u_t_f16_encoding_1a7e0e0b47450c40a23ef5ee7a7574f1cd:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	int
	queryConvert(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` unsigned char* bytes,
		int length
		) const

The queryConvert function is used to convert single byte characters or multibyte sequences; bytes will point to a byte sequence of length bytes.

The queryConvert function must return the :ref:`Unicode <doxid-class_poco_1_1_unicode>` scalar value represented by this byte sequence or -1 if the byte sequence is malformed or -n where n is number of bytes requested for the sequence, if lenght is shorter than the sequence. The length of the sequence might not be determined by the first byte, in which case the conversion becomes an iterative process: First call with length == 1 might return -2, Then a second call with lenght == 2 might return -4 Eventually, the third call with length == 4 should return either a :ref:`Unicode <doxid-class_poco_1_1_unicode>` scalar value, or -1 if the byte sequence is malformed. The default implementation returns (int) bytes[0].

.. index:: pair: function; sequenceLength
.. _doxid-class_poco_1_1_u_t_f16_encoding_1ad25fa5a3759dce1b4d03c24d9748da71:

.. ref-code-block:: cpp
	:class: doxyrest-title-code-block

	virtual
	int
	sequenceLength(
		:ref:`const<doxid-zconf_8h_1a2c212835823e3c54a8ab6d95c652660e>` unsigned char* bytes,
		int length
		) const

The sequenceLength function is used to get the lenth of the sequence pointed by bytes.

The length paramater should be greater or equal to the length of the sequence.

The sequenceLength function must return the lenght of the sequence represented by this byte sequence or a negative value -n if length is shorter than the sequence, where n is the number of byte requested to determine the length of the sequence. The length of the sequence might not be determined by the first byte, in which case the conversion becomes an iterative process as long as the result is negative: First call with length == 1 might return -2, Then a second call with lenght == 2 might return -4 Eventually, the third call with length == 4 should return 4. The default implementation returns 1.

