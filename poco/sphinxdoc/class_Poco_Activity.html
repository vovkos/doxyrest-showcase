
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>template class Poco::Activity &#8212; POCO C++ Libraries Documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/doxyrest-pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/doxyrest-sphinxdoc.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="_static/target-highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="class Poco::Any" href="class_Poco_Any.html" />
    <link rel="prev" title="template class Poco::ActiveStarter" href="class_Poco_ActiveStarter-2.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="class_Poco_Any.html" title="class Poco::Any"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="class_Poco_ActiveStarter-2.html" title="template class Poco::ActiveStarter"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">POCO C++ Libraries Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="global.html" >Global Namespace</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="namespace_Poco.html" accesskey="U">namespace Poco</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">template class Poco::Activity</a><ul>
<li><a class="reference internal" href="#overview">Overview</a><ul>
<li><a class="reference internal" href="#inherited-members">Inherited Members</a></li>
</ul>
</li>
<li><a class="reference internal" href="#detailed-documentation">Detailed Documentation</a><ul>
<li><a class="reference internal" href="#construction">Construction</a></li>
<li><a class="reference internal" href="#methods">Methods</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="class_Poco_ActiveStarter-2.html"
                        title="previous chapter">template class Poco::ActiveStarter</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="class_Poco_Any.html"
                        title="next chapter">class Poco::Any</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="template-class-poco-activity">
<span id="doxid-class-poco-1-1-activity"></span><span id="index-0"></span><h1>template class Poco::Activity</h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="overview">
<h2>Overview</h2>
<p>This template class helps to implement active objects. <a class="reference internal" href="#details-class-poco-1-1-activity"><span class="std std-ref">Moreâ€¦</span></a></p>
<pre class="highlight doxyrest-overview-code-block literal-block">
<span></span><span class="cp">#include</span> <span class="cpf">&lt;Activity.h&gt;</span><span class="cp"></span>

<span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="n">C</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nl">Activity</span><span class="p">:</span> <span class="k">public</span> <a class="reference internal" href="class_Poco_Runnable.html#doxid-class-poco-1-1-runnable"><span class="std std-ref">Poco::Runnable</span></a><span></span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="c1">// typedefs</span>

    <span class="k">typedef</span> <a class="reference internal" href="class_Poco_RunnableAdapter.html#doxid-class-poco-1-1-runnable-adapter"><span class="std std-ref">RunnableAdapter</span></a><span></span><span class="o">&lt;</span><span class="n">C</span><span class="o">&gt;</span> <span class="doxyrest-code-target target" id="doxid-class-poco-1-1-activity-1aaad19414c556bb73328a7e3541342ffc">RunnableAdapterType</span><span></span><span class="p">;</span>
    <span class="k">typedef</span> <span class="n">RunnableAdapterType</span><span class="o">::</span><span class="n">Callback</span> <span class="doxyrest-code-target target" id="doxid-class-poco-1-1-activity-1a07e5f781240253023fea7a02f730d213">Callback</span><span></span><span class="p">;</span>

    <span class="c1">// construction</span>

    <a class="reference internal" href="#doxid-class-poco-1-1-activity-1a42e3d306d56e3432204fdfb755ebf836"><span class="std std-ref">Activity</span></a><span></span><span class="p">(</span>
        <span class="n">C</span><span class="o">*</span> <span class="n">pOwner</span><span class="p">,</span>
        <a class="reference internal" href="#doxid-class-poco-1-1-activity-1a07e5f781240253023fea7a02f730d213"><span class="std std-ref">Callback</span></a><span></span> <span class="n">method</span>
        <span class="p">);</span>

    <span class="c1">// methods</span>

    <span class="kt">void</span>
    <a class="reference internal" href="#doxid-class-poco-1-1-activity-1aeb95d190e39653462b3b35cb3c36bab6"><span class="std std-ref">start</span></a><span></span><span class="p">();</span>

    <span class="kt">void</span>
    <span class="doxyrest-code-target target" id="doxid-class-poco-1-1-activity-1a1624f1f3f3372602627e109cbc948ba9">start</span><span></span><span class="p">(</span><a class="reference internal" href="class_Poco_ThreadPool.html#doxid-class-poco-1-1-thread-pool"><span class="std std-ref">ThreadPool</span></a><span></span><span class="o">&amp;</span> <span class="n">pool</span><span class="p">);</span>

    <span class="kt">void</span>
    <a class="reference internal" href="#doxid-class-poco-1-1-activity-1ab3ebbec884bedeb87d6a5e83ea050912"><span class="std std-ref">stop</span></a><span></span><span class="p">();</span>

    <span class="kt">void</span>
    <a class="reference internal" href="#doxid-class-poco-1-1-activity-1a7ac1dcc3ebaf0c74993291a7fa143b32"><span class="std std-ref">wait</span></a><span></span><span class="p">();</span>

    <span class="kt">void</span>
    <a class="reference internal" href="#doxid-class-poco-1-1-activity-1a203d47ab11d1b78313069318ddd1fbb2"><span class="std std-ref">wait</span></a><span></span><span class="p">(</span><span class="kt">long</span> <span class="n">milliseconds</span><span class="p">);</span>

    <span class="kt">bool</span>
    <a class="reference internal" href="#doxid-class-poco-1-1-activity-1a7ab614e94138541cf34fde0ec058bcd4"><span class="std std-ref">isStopped</span></a><span></span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

    <span class="kt">bool</span>
    <a class="reference internal" href="#doxid-class-poco-1-1-activity-1acf920215a00ee8c68a6ebbfc0cba86bc"><span class="std std-ref">isRunning</span></a><span></span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

<span class="k">protected</span><span class="o">:</span>
    <span class="c1">// methods</span>

    <span class="k">virtual</span>
    <span class="kt">void</span>
    <a class="reference internal" href="#doxid-class-poco-1-1-activity-1a892d0678d0100ae0efbea64c1732efb8"><span class="std std-ref">run</span></a><span></span><span class="p">();</span>
<span class="p">};</span>
</pre>
<div class="section" id="inherited-members">
<h3>Inherited Members</h3>
<pre class="highlight doxyrest-overview-inherited-code-block literal-block">
<span></span><span class="k">public</span><span class="o">:</span>
    <span class="c1">// methods</span>

    <span class="k">virtual</span>
    <span class="kt">void</span>
    <a class="reference internal" href="class_Poco_Runnable.html#doxid-class-poco-1-1-runnable-1ad89816e81207bf5f1e52d5df860d11d4"><span class="std std-ref">run</span></a><span></span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</pre>
</div>
</div>
<div class="section" id="detailed-documentation">
<span id="details-class-poco-1-1-activity"></span><h2>Detailed Documentation</h2>
<p>This template class helps to implement active objects.</p>
<p>An active object uses threads to decouple method execution from method invocation, or to perform tasks autonomously, without intervention of a caller.</p>
<p>An activity is a (typically longer running) method that executes within its own task. Activities can be started automatically (upon object construction) or manually at a later time. Activities can also be stopped at any time. However, to make stopping an activity work, the method implementing the activity has to check periodically whether it has been requested to stop, and if so, return. Activities are stopped before the object they belong to is destroyed. Methods implementing activities cannot have arguments or return values.</p>
<p><a class="reference internal" href="#doxid-class-poco-1-1-activity"><span class="std std-ref">Activity</span></a> objects are used as follows:</p>
<pre class="highlight literal-block">
<span></span><span class="k">class</span> <span class="n">ActiveObject</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="n">ActiveObject</span><span class="p">()</span><span class="o">:</span>
        <span class="n">_activity</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ActiveObject</span><span class="o">::</span><span class="n">runActivity</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="p">...</span>
    <span class="p">}</span>

    <span class="p">...</span>

<span class="k">protected</span><span class="o">:</span>
    <span class="kt">void</span> <span class="n">runActivity</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">_activity</span><span class="p">.</span><span class="n">isStopped</span><span class="p">())</span>
        <span class="p">{</span>
            <span class="p">...</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="k">private</span><span class="o">:</span>
    <span class="n">Activity</span><span class="o">&lt;</span><span class="n">ActiveObject</span><span class="o">&gt;</span> <span class="n">_activity</span><span class="p">;</span>
<span class="p">};</span>
</pre>
<div class="section" id="construction">
<h3>Construction</h3>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-class-poco-1-1-activity-1a42e3d306d56e3432204fdfb755ebf836">
<span id="index-1"></span><span></span><span class="n">Activity</span><span class="p">(</span>
    <span class="n">C</span><span class="o">*</span> <span class="n">pOwner</span><span class="p">,</span>
    <a class="reference internal" href="#doxid-class-poco-1-1-activity-1a07e5f781240253023fea7a02f730d213"><span class="std std-ref">Callback</span></a><span></span> <span class="n">method</span>
    <span class="p">)</span>
</pre>
<p>Creates the activity.</p>
<p>Call <a class="reference internal" href="#doxid-class-poco-1-1-activity-1aeb95d190e39653462b3b35cb3c36bab6"><span class="std std-ref">start()</span></a> to start it.</p>
</div>
<div class="section" id="methods">
<h3>Methods</h3>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-class-poco-1-1-activity-1aeb95d190e39653462b3b35cb3c36bab6">
<span id="index-2"></span><span></span><span class="kt">void</span>
<span class="n">start</span><span class="p">()</span>
</pre>
<p>Starts the activity by acquiring a thread for it from the default thread pool.</p>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-class-poco-1-1-activity-1ab3ebbec884bedeb87d6a5e83ea050912">
<span id="index-3"></span><span></span><span class="kt">void</span>
<span class="n">stop</span><span class="p">()</span>
</pre>
<p>Requests to stop the activity.</p>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-class-poco-1-1-activity-1a7ac1dcc3ebaf0c74993291a7fa143b32">
<span id="index-4"></span><span></span><span class="kt">void</span>
<span class="n">wait</span><span class="p">()</span>
</pre>
<p>Waits for the activity to complete.</p>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-class-poco-1-1-activity-1a203d47ab11d1b78313069318ddd1fbb2">
<span id="index-5"></span><span></span><span class="kt">void</span>
<span class="n">wait</span><span class="p">(</span><span class="kt">long</span> <span class="n">milliseconds</span><span class="p">)</span>
</pre>
<p>Waits the given interval for the activity to complete.</p>
<p>An TimeoutException is thrown if the activity does not complete within the given interval.</p>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-class-poco-1-1-activity-1a7ab614e94138541cf34fde0ec058bcd4">
<span id="index-6"></span><span></span><span class="kt">bool</span>
<span class="n">isStopped</span><span class="p">()</span> <span class="k">const</span>
</pre>
<p>Returns true if the activity has been requested to stop.</p>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-class-poco-1-1-activity-1acf920215a00ee8c68a6ebbfc0cba86bc">
<span id="index-7"></span><span></span><span class="kt">bool</span>
<span class="n">isRunning</span><span class="p">()</span> <span class="k">const</span>
</pre>
<p>Returns true if the activity is running.</p>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-class-poco-1-1-activity-1a892d0678d0100ae0efbea64c1732efb8">
<span id="index-8"></span><span></span><span class="k">virtual</span>
<span class="kt">void</span>
<span class="n">run</span><span class="p">()</span>
</pre>
<p>Do whatever the thread needs to do.</p>
<p>Must be overridden by subclasses.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="class_Poco_Any.html" title="class Poco::Any"
             >next</a> |</li>
        <li class="right" >
          <a href="class_Poco_ActiveStarter-2.html" title="template class Poco::ActiveStarter"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">POCO C++ Libraries Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="global.html" >Global Namespace</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="namespace_Poco.html" >namespace Poco</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005-2017, POCO Maintainers.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>