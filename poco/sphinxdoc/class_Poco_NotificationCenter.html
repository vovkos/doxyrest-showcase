
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>class Poco::NotificationCenter &#8212; POCO C++ Libraries Documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/doxyrest-pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/doxyrest-sphinxdoc.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="_static/target-highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="class Poco::NotificationQueue" href="class_Poco_NotificationQueue.html" />
    <link rel="prev" title="class Poco::Notification" href="class_Poco_Notification.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="class_Poco_NotificationQueue.html" title="class Poco::NotificationQueue"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="class_Poco_Notification.html" title="class Poco::Notification"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">POCO C++ Libraries Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="global.html" >Global Namespace</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="namespace_Poco.html" accesskey="U">namespace Poco</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">class Poco::NotificationCenter</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#detailed-documentation">Detailed Documentation</a><ul>
<li><a class="reference internal" href="#construction">Construction</a></li>
<li><a class="reference internal" href="#methods">Methods</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="class_Poco_Notification.html"
                        title="previous chapter">class Poco::Notification</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="class_Poco_NotificationQueue.html"
                        title="next chapter">class Poco::NotificationQueue</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="class-poco-notificationcenter">
<span id="doxid-class-poco-1-1-notification-center"></span><span id="index-0"></span><h1>class Poco::NotificationCenter</h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="overview">
<h2>Overview</h2>
<p>A <a class="reference internal" href="#doxid-class-poco-1-1-notification-center"><span class="std std-ref">NotificationCenter</span></a> is essentially a notification dispatcher. <a class="reference internal" href="#details-class-poco-1-1-notification-center"><span class="std std-ref">More…</span></a></p>
<pre class="highlight doxyrest-overview-code-block literal-block">
<span></span><span class="cp">#include</span> <span class="cpf">&lt;NotificationCenter.h&gt;</span><span class="cp"></span>

<span class="k">class</span> <span class="n">NotificationCenter</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="c1">// methods</span>

    <span class="kt">void</span>
    <a class="reference internal" href="#doxid-class-poco-1-1-notification-center-1a36fa984a40c2080ea5a8b2b9c5da3680"><span class="std std-ref">addObserver</span></a><span></span><span class="p">(</span><a class="reference internal" href="global.html#doxid-zconf-8h-1a2c212835823e3c54a8ab6d95c652660e"><span class="std std-ref">const</span></a><span></span> <a class="reference internal" href="class_Poco_AbstractObserver.html#doxid-class-poco-1-1-abstract-observer"><span class="std std-ref">AbstractObserver</span></a><span></span><span class="o">&amp;</span> <span class="n">observer</span><span class="p">);</span>

    <span class="kt">void</span>
    <a class="reference internal" href="#doxid-class-poco-1-1-notification-center-1aa47beb5100bdf9767d7e6f414fbb0f03"><span class="std std-ref">removeObserver</span></a><span></span><span class="p">(</span><a class="reference internal" href="global.html#doxid-zconf-8h-1a2c212835823e3c54a8ab6d95c652660e"><span class="std std-ref">const</span></a><span></span> <a class="reference internal" href="class_Poco_AbstractObserver.html#doxid-class-poco-1-1-abstract-observer"><span class="std std-ref">AbstractObserver</span></a><span></span><span class="o">&amp;</span> <span class="n">observer</span><span class="p">);</span>

    <span class="kt">bool</span>
    <a class="reference internal" href="#doxid-class-poco-1-1-notification-center-1a631e3a5114b3cf3396c9944cb3442506"><span class="std std-ref">hasObserver</span></a><span></span><span class="p">(</span><a class="reference internal" href="global.html#doxid-zconf-8h-1a2c212835823e3c54a8ab6d95c652660e"><span class="std std-ref">const</span></a><span></span> <a class="reference internal" href="class_Poco_AbstractObserver.html#doxid-class-poco-1-1-abstract-observer"><span class="std std-ref">AbstractObserver</span></a><span></span><span class="o">&amp;</span> <span class="n">observer</span><span class="p">)</span> <span class="k">const</span><span class="p">;</span>

    <span class="kt">void</span>
    <a class="reference internal" href="#doxid-class-poco-1-1-notification-center-1a536fefa90d14a43ae79d257b74742ac4"><span class="std std-ref">postNotification</span></a><span></span><span class="p">(</span><a class="reference internal" href="class_Poco_Notification.html#doxid-class-poco-1-1-notification-1a135c7b6ff2d0e72b57b40c52534c7744"><span class="std std-ref">Notification::Ptr</span></a><span></span> <span class="n">pNotification</span><span class="p">);</span>

    <span class="kt">bool</span>
    <a class="reference internal" href="#doxid-class-poco-1-1-notification-center-1ab78e01011c82464a58886b9edf616857"><span class="std std-ref">hasObservers</span></a><span></span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span>
    <a class="reference internal" href="#doxid-class-poco-1-1-notification-center-1a9f4ee966ef5af7994779e5486366cf59"><span class="std std-ref">countObservers</span></a><span></span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>

    <span class="k">static</span>
    <span class="n">NotificationCenter</span><span class="o">&amp;</span>
    <a class="reference internal" href="#doxid-class-poco-1-1-notification-center-1aa00128fcf2fb07e0383857181686c1c8"><span class="std std-ref">defaultCenter</span></a><span></span><span class="p">();</span>
<span class="p">};</span>
</pre>
</div>
<div class="section" id="detailed-documentation">
<span id="details-class-poco-1-1-notification-center"></span><h2>Detailed Documentation</h2>
<p>A <a class="reference internal" href="#doxid-class-poco-1-1-notification-center"><span class="std std-ref">NotificationCenter</span></a> is essentially a notification dispatcher.</p>
<p>It notifies all observers of notifications meeting specific criteria. This information is encapsulated in <a class="reference internal" href="class_Poco_Notification.html#doxid-class-poco-1-1-notification"><span class="std std-ref">Notification</span></a> objects. Client objects register themselves with the notification center as observers of specific notifications posted by other objects. When an event occurs, an object posts an appropriate notification to the notification center. The notification center invokes the registered method on each matching observer, passing the notification as argument.</p>
<p>The order in which observers receive notifications is undefined. It is possible for the posting object and the observing object to be the same. The <a class="reference internal" href="#doxid-class-poco-1-1-notification-center"><span class="std std-ref">NotificationCenter</span></a> delivers notifications to observers synchronously. In other words the <a class="reference internal" href="#doxid-class-poco-1-1-notification-center-1a536fefa90d14a43ae79d257b74742ac4"><span class="std std-ref">postNotification()</span></a> method does not return until all observers have received and processed the notification. If an observer throws an exception while handling a notification, the <a class="reference internal" href="#doxid-class-poco-1-1-notification-center"><span class="std std-ref">NotificationCenter</span></a> stops dispatching the notification and <a class="reference internal" href="#doxid-class-poco-1-1-notification-center-1a536fefa90d14a43ae79d257b74742ac4"><span class="std std-ref">postNotification()</span></a> rethrows the exception.</p>
<p>In a multithreaded scenario, notifications are always delivered in the thread in which the notification was posted, which may not be the same thread in which an observer registered itself.</p>
<p>The <a class="reference internal" href="#doxid-class-poco-1-1-notification-center"><span class="std std-ref">NotificationCenter</span></a> class is basically a C++ implementation of the NSNotificationCenter class found in Apple’s Cocoa (or OpenStep).</p>
<p>While handling a notification, an observer can unregister itself from the notification center, or it can register or unregister other observers. Observers added during a dispatch cycle will not receive the current notification.</p>
<p>The method receiving the notification must be implemented as</p>
<pre class="highlight literal-block">
<span></span><span class="kt">void</span> <span class="nf">handleNotification</span><span class="p">(</span><span class="n">MyNotification</span><span class="o">*</span> <span class="n">pNf</span><span class="p">);</span>
</pre>
<p>The handler method gets co-ownership of the <a class="reference internal" href="class_Poco_Notification.html#doxid-class-poco-1-1-notification"><span class="std std-ref">Notification</span></a> object and must release it when done. This is best done with an <a class="reference internal" href="class_Poco_AutoPtr.html#doxid-class-poco-1-1-auto-ptr"><span class="std std-ref">AutoPtr</span></a> :</p>
<pre class="highlight literal-block">
<span></span><span class="kt">void</span> <span class="n">MyClass</span><span class="o">::</span><span class="n">handleNotification</span><span class="p">(</span><span class="n">MyNotification</span><span class="o">*</span> <span class="n">pNf</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">AutoPtr</span><span class="o">&lt;</span><span class="n">MyNotification</span><span class="o">&gt;</span> <span class="n">nf</span><span class="p">(</span><span class="n">pNf</span><span class="p">);</span>
    <span class="p">...</span>
<span class="p">}</span>
</pre>
<p>Alternatively, the <a class="reference internal" href="class_Poco_NObserver.html#doxid-class-poco-1-1-n-observer"><span class="std std-ref">NObserver</span></a> class template can be used to register a callback method. In this case, the callback method receives the <a class="reference internal" href="class_Poco_Notification.html#doxid-class-poco-1-1-notification"><span class="std std-ref">Notification</span></a> in an <a class="reference internal" href="class_Poco_AutoPtr.html#doxid-class-poco-1-1-auto-ptr"><span class="std std-ref">AutoPtr</span></a> and thus does not have to deal with object ownership issues:</p>
<pre class="highlight literal-block">
<span></span><span class="kt">void</span> <span class="n">MyClass</span><span class="o">::</span><span class="n">handleNotification</span><span class="p">(</span><span class="k">const</span> <span class="n">AutoPtr</span><span class="o">&lt;</span><span class="n">MyNotification</span><span class="o">&gt;&amp;</span> <span class="n">pNf</span><span class="p">)</span>
<span class="p">{</span>
    <span class="p">...</span>
<span class="p">}</span>
</pre>
<div class="section" id="construction">
<h3>Construction</h3>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-class-poco-1-1-notification-center-1a60097d098670f87fa06ea2701d4464b9">
<span></span><span class="o">~</span><span class="n">NotificationCenter</span><span class="p">()</span>
</pre>
<p>Destroys the <a class="reference internal" href="#doxid-class-poco-1-1-notification-center"><span class="std std-ref">NotificationCenter</span></a>.</p>
</div>
<div class="section" id="methods">
<h3>Methods</h3>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-class-poco-1-1-notification-center-1a36fa984a40c2080ea5a8b2b9c5da3680">
<span id="index-1"></span><span></span><span class="kt">void</span>
<span class="n">addObserver</span><span class="p">(</span><a class="reference internal" href="global.html#doxid-zconf-8h-1a2c212835823e3c54a8ab6d95c652660e"><span class="std std-ref">const</span></a><span></span> <a class="reference internal" href="class_Poco_AbstractObserver.html#doxid-class-poco-1-1-abstract-observer"><span class="std std-ref">AbstractObserver</span></a><span></span><span class="o">&amp;</span> <span class="n">observer</span><span class="p">)</span>
</pre>
<p>Registers an observer with the <a class="reference internal" href="#doxid-class-poco-1-1-notification-center"><span class="std std-ref">NotificationCenter</span></a>.</p>
<p>Usage:</p>
<pre class="highlight literal-block">
<span></span><span class="n">Observer</span><span class="o">&lt;</span><span class="n">MyClass</span><span class="p">,</span> <span class="n">MyNotification</span><span class="o">&gt;</span> <span class="n">obs</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">MyClass</span><span class="o">::</span><span class="n">handleNotification</span><span class="p">);</span>
<span class="n">notificationCenter</span><span class="p">.</span><span class="n">addObserver</span><span class="p">(</span><span class="n">obs</span><span class="p">);</span>
</pre>
<p>Alternatively, the <a class="reference internal" href="class_Poco_NObserver.html#doxid-class-poco-1-1-n-observer"><span class="std std-ref">NObserver</span></a> template class can be used instead of <a class="reference internal" href="class_Poco_Observer.html#doxid-class-poco-1-1-observer"><span class="std std-ref">Observer</span></a>.</p>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-class-poco-1-1-notification-center-1aa47beb5100bdf9767d7e6f414fbb0f03">
<span id="index-2"></span><span></span><span class="kt">void</span>
<span class="n">removeObserver</span><span class="p">(</span><a class="reference internal" href="global.html#doxid-zconf-8h-1a2c212835823e3c54a8ab6d95c652660e"><span class="std std-ref">const</span></a><span></span> <a class="reference internal" href="class_Poco_AbstractObserver.html#doxid-class-poco-1-1-abstract-observer"><span class="std std-ref">AbstractObserver</span></a><span></span><span class="o">&amp;</span> <span class="n">observer</span><span class="p">)</span>
</pre>
<p>Unregisters an observer with the <a class="reference internal" href="#doxid-class-poco-1-1-notification-center"><span class="std std-ref">NotificationCenter</span></a>.</p>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-class-poco-1-1-notification-center-1a631e3a5114b3cf3396c9944cb3442506">
<span id="index-3"></span><span></span><span class="kt">bool</span>
<span class="n">hasObserver</span><span class="p">(</span><a class="reference internal" href="global.html#doxid-zconf-8h-1a2c212835823e3c54a8ab6d95c652660e"><span class="std std-ref">const</span></a><span></span> <a class="reference internal" href="class_Poco_AbstractObserver.html#doxid-class-poco-1-1-abstract-observer"><span class="std std-ref">AbstractObserver</span></a><span></span><span class="o">&amp;</span> <span class="n">observer</span><span class="p">)</span> <span class="k">const</span>
</pre>
<p>Returns true if the observer is registered with this <a class="reference internal" href="#doxid-class-poco-1-1-notification-center"><span class="std std-ref">NotificationCenter</span></a>.</p>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-class-poco-1-1-notification-center-1a536fefa90d14a43ae79d257b74742ac4">
<span id="index-4"></span><span></span><span class="kt">void</span>
<span class="n">postNotification</span><span class="p">(</span><a class="reference internal" href="class_Poco_Notification.html#doxid-class-poco-1-1-notification-1a135c7b6ff2d0e72b57b40c52534c7744"><span class="std std-ref">Notification::Ptr</span></a><span></span> <span class="n">pNotification</span><span class="p">)</span>
</pre>
<p>Posts a notification to the <a class="reference internal" href="#doxid-class-poco-1-1-notification-center"><span class="std std-ref">NotificationCenter</span></a>.</p>
<p>The <a class="reference internal" href="#doxid-class-poco-1-1-notification-center"><span class="std std-ref">NotificationCenter</span></a> then delivers the notification to all interested observers. If an observer throws an exception, dispatching terminates and the exception is rethrown to the caller. Ownership of the notification object is claimed and the notification is released before returning. Therefore, a call like</p>
<pre class="highlight literal-block">
<span></span><span class="n">notificationCenter</span><span class="p">.</span><span class="n">postNotification</span><span class="p">(</span><span class="k">new</span> <span class="n">MyNotification</span><span class="p">);</span>
</pre>
<p>does not result in a memory leak.</p>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-class-poco-1-1-notification-center-1ab78e01011c82464a58886b9edf616857">
<span id="index-5"></span><span></span><span class="kt">bool</span>
<span class="n">hasObservers</span><span class="p">()</span> <span class="k">const</span>
</pre>
<p>Returns true iff there is at least one registered observer.</p>
<p>Can be used to improve performance if an expensive notification shall only be created and posted if there are any observers.</p>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-class-poco-1-1-notification-center-1a9f4ee966ef5af7994779e5486366cf59">
<span id="index-6"></span><span></span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span>
<span class="n">countObservers</span><span class="p">()</span> <span class="k">const</span>
</pre>
<p>Returns the number of registered observers.</p>
<pre class="highlight doxyrest-title-code-block literal-block" id="doxid-class-poco-1-1-notification-center-1aa00128fcf2fb07e0383857181686c1c8">
<span id="index-7"></span><span></span><span class="k">static</span>
<span class="n">NotificationCenter</span><span class="o">&amp;</span>
<span class="n">defaultCenter</span><span class="p">()</span>
</pre>
<p>Returns a reference to the default <a class="reference internal" href="#doxid-class-poco-1-1-notification-center"><span class="std std-ref">NotificationCenter</span></a>.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="class_Poco_NotificationQueue.html" title="class Poco::NotificationQueue"
             >next</a> |</li>
        <li class="right" >
          <a href="class_Poco_Notification.html" title="class Poco::Notification"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">POCO C++ Libraries Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="global.html" >Global Namespace</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="namespace_Poco.html" >namespace Poco</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2005-2017, POCO Maintainers.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>